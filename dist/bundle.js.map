{"version":3,"sources":["node_modules/browser-pack/_prelude.js","tsoutput/app.js","node_modules/babel-polyfill/lib/index.js","node_modules/three/three.js","node_modules/babel-regenerator-runtime/runtime.js","node_modules/core-js/shim.js","node_modules/process/browser.js","node_modules/core-js/modules/es6.object.create.js","node_modules/core-js/modules/es6.symbol.js","node_modules/core-js/modules/es6.object.define-property.js","node_modules/core-js/modules/es6.object.define-properties.js","node_modules/core-js/modules/es6.object.get-own-property-descriptor.js","node_modules/core-js/modules/es6.object.get-prototype-of.js","node_modules/core-js/modules/es6.object.keys.js","node_modules/core-js/modules/es6.object.freeze.js","node_modules/core-js/modules/es6.object.get-own-property-names.js","node_modules/core-js/modules/es6.object.prevent-extensions.js","node_modules/core-js/modules/es6.object.seal.js","node_modules/core-js/modules/es6.object.is-frozen.js","node_modules/core-js/modules/es6.object.is-sealed.js","node_modules/core-js/modules/es6.object.assign.js","node_modules/core-js/modules/es6.object.is-extensible.js","node_modules/core-js/modules/es6.object.is.js","node_modules/core-js/modules/es6.object.to-string.js","node_modules/core-js/modules/es6.object.set-prototype-of.js","node_modules/core-js/modules/es6.function.bind.js","node_modules/core-js/modules/es6.function.name.js","node_modules/core-js/modules/es6.parse-float.js","node_modules/core-js/modules/es6.function.has-instance.js","node_modules/core-js/modules/es6.parse-int.js","node_modules/core-js/modules/es6.number.constructor.js","node_modules/core-js/modules/es6.number.to-fixed.js","node_modules/core-js/modules/es6.number.to-precision.js","node_modules/core-js/modules/es6.number.epsilon.js","node_modules/core-js/modules/es6.number.is-finite.js","node_modules/core-js/modules/es6.number.is-integer.js","node_modules/core-js/modules/es6.number.is-nan.js","node_modules/core-js/modules/es6.number.max-safe-integer.js","node_modules/core-js/modules/es6.number.is-safe-integer.js","node_modules/core-js/modules/es6.number.min-safe-integer.js","node_modules/core-js/modules/es6.number.parse-float.js","node_modules/core-js/modules/es6.number.parse-int.js","node_modules/core-js/modules/es6.math.acosh.js","node_modules/core-js/modules/es6.math.asinh.js","node_modules/core-js/modules/es6.math.atanh.js","node_modules/core-js/modules/es6.math.cbrt.js","node_modules/core-js/modules/es6.math.clz32.js","node_modules/core-js/modules/es6.math.expm1.js","node_modules/core-js/modules/es6.math.fround.js","node_modules/core-js/modules/es6.math.cosh.js","node_modules/core-js/modules/es6.math.hypot.js","node_modules/core-js/modules/es6.math.imul.js","node_modules/core-js/modules/es6.math.log10.js","node_modules/core-js/modules/es6.math.log1p.js","node_modules/core-js/modules/es6.math.log2.js","node_modules/core-js/modules/es6.math.sign.js","node_modules/core-js/modules/es6.math.sinh.js","node_modules/core-js/modules/es6.math.tanh.js","node_modules/core-js/modules/es6.math.trunc.js","node_modules/core-js/modules/es6.string.from-code-point.js","node_modules/core-js/modules/es6.string.raw.js","node_modules/core-js/modules/es6.string.code-point-at.js","node_modules/core-js/modules/es6.string.trim.js","node_modules/core-js/modules/es6.string.ends-with.js","node_modules/core-js/modules/es6.string.iterator.js","node_modules/core-js/modules/es6.string.includes.js","node_modules/core-js/modules/es6.string.repeat.js","node_modules/core-js/modules/es6.string.starts-with.js","node_modules/core-js/modules/es6.string.anchor.js","node_modules/core-js/modules/es6.string.big.js","node_modules/core-js/modules/es6.string.blink.js","node_modules/core-js/modules/es6.string.bold.js","node_modules/core-js/modules/es6.string.fixed.js","node_modules/core-js/modules/es6.string.fontsize.js","node_modules/core-js/modules/es6.string.fontcolor.js","node_modules/core-js/modules/es6.string.link.js","node_modules/core-js/modules/es6.string.italics.js","node_modules/core-js/modules/es6.string.small.js","node_modules/core-js/modules/es6.string.strike.js","node_modules/core-js/modules/es6.string.sub.js","node_modules/core-js/modules/es6.string.sup.js","node_modules/core-js/modules/es6.date.now.js","node_modules/core-js/modules/es6.date.to-string.js","node_modules/core-js/modules/es6.date.to-json.js","node_modules/core-js/modules/es6.date.to-primitive.js","node_modules/core-js/modules/es6.date.to-iso-string.js","node_modules/core-js/modules/es6.array.from.js","node_modules/core-js/modules/es6.array.is-array.js","node_modules/core-js/modules/es6.array.slice.js","node_modules/core-js/modules/es6.array.of.js","node_modules/core-js/modules/es6.array.join.js","node_modules/core-js/modules/es6.array.for-each.js","node_modules/core-js/modules/es6.array.sort.js","node_modules/core-js/modules/es6.array.map.js","node_modules/core-js/modules/es6.array.filter.js","node_modules/core-js/modules/es6.array.some.js","node_modules/core-js/modules/es6.array.every.js","node_modules/core-js/modules/es6.array.reduce.js","node_modules/core-js/modules/es6.array.reduce-right.js","node_modules/core-js/modules/es6.array.index-of.js","node_modules/core-js/modules/es6.array.find.js","node_modules/core-js/modules/es6.array.last-index-of.js","node_modules/core-js/modules/es6.array.fill.js","node_modules/core-js/modules/es6.array.find-index.js","node_modules/core-js/modules/es6.array.copy-within.js","node_modules/core-js/modules/es6.regexp.constructor.js","node_modules/core-js/modules/es6.array.species.js","node_modules/core-js/modules/es6.regexp.to-string.js","node_modules/core-js/modules/es6.array.iterator.js","node_modules/core-js/modules/es6.regexp.flags.js","node_modules/core-js/modules/es6.regexp.replace.js","node_modules/core-js/modules/es6.regexp.match.js","node_modules/core-js/modules/es6.regexp.search.js","node_modules/core-js/modules/es6.promise.js","node_modules/core-js/modules/es6.map.js","node_modules/core-js/modules/es6.regexp.split.js","node_modules/core-js/modules/es6.set.js","node_modules/core-js/modules/es6.weak-map.js","node_modules/core-js/modules/es6.weak-set.js","node_modules/core-js/modules/es6.typed.array-buffer.js","node_modules/core-js/modules/es6.typed.int8-array.js","node_modules/core-js/modules/es6.typed.data-view.js","node_modules/core-js/modules/es6.typed.uint8-array.js","node_modules/core-js/modules/es6.typed.uint8-clamped-array.js","node_modules/core-js/modules/es6.typed.int16-array.js","node_modules/core-js/modules/es6.typed.uint16-array.js","node_modules/core-js/modules/es6.typed.int32-array.js","node_modules/core-js/modules/es6.typed.uint32-array.js","node_modules/core-js/modules/es6.reflect.apply.js","node_modules/core-js/modules/es6.typed.float64-array.js","node_modules/core-js/modules/es6.reflect.construct.js","node_modules/core-js/modules/es6.reflect.delete-property.js","node_modules/core-js/modules/es6.reflect.define-property.js","node_modules/core-js/modules/es6.reflect.enumerate.js","node_modules/core-js/modules/es6.reflect.get.js","node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js","node_modules/core-js/modules/es6.reflect.has.js","node_modules/core-js/modules/es6.reflect.get-prototype-of.js","node_modules/core-js/modules/es6.reflect.is-extensible.js","node_modules/core-js/modules/es6.reflect.own-keys.js","node_modules/core-js/modules/es6.reflect.prevent-extensions.js","node_modules/core-js/modules/es6.reflect.set.js","node_modules/core-js/modules/es6.reflect.set-prototype-of.js","node_modules/core-js/modules/es7.string.at.js","node_modules/core-js/modules/es7.array.includes.js","node_modules/core-js/modules/es7.string.pad-end.js","node_modules/core-js/modules/es7.string.pad-start.js","node_modules/core-js/modules/es7.string.trim-left.js","node_modules/core-js/modules/es7.string.trim-right.js","node_modules/core-js/modules/es7.string.match-all.js","node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","node_modules/core-js/modules/es7.symbol.async-iterator.js","node_modules/core-js/modules/es7.object.values.js","node_modules/core-js/modules/es7.object.define-getter.js","node_modules/core-js/modules/es6.typed.float32-array.js","node_modules/core-js/modules/es7.object.entries.js","node_modules/core-js/modules/es7.symbol.observable.js","node_modules/core-js/modules/es7.object.define-setter.js","node_modules/core-js/modules/es7.object.lookup-setter.js","node_modules/core-js/modules/es7.object.lookup-getter.js","node_modules/core-js/modules/es7.set.to-json.js","node_modules/core-js/modules/es7.map.to-json.js","node_modules/core-js/modules/es7.system.global.js","node_modules/core-js/modules/es7.math.iaddh.js","node_modules/core-js/modules/es7.error.is-error.js","node_modules/core-js/modules/es7.math.isubh.js","node_modules/core-js/modules/es7.math.umulh.js","node_modules/core-js/modules/es7.math.imulh.js","node_modules/core-js/modules/es7.reflect.define-metadata.js","node_modules/core-js/modules/es7.reflect.delete-metadata.js","node_modules/core-js/modules/es7.reflect.get-own-metadata.js","node_modules/core-js/modules/es7.reflect.get-metadata.js","node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js","node_modules/core-js/modules/es7.reflect.get-metadata-keys.js","node_modules/core-js/modules/es7.reflect.has-metadata.js","node_modules/core-js/modules/es7.reflect.has-own-metadata.js","node_modules/core-js/modules/es7.observable.js","node_modules/core-js/modules/es7.asap.js","node_modules/core-js/modules/es7.reflect.metadata.js","node_modules/core-js/modules/web.immediate.js","node_modules/core-js/modules/web.timers.js","node_modules/core-js/modules/_core.js","node_modules/core-js/modules/web.dom.iterable.js","node_modules/core-js/fn/regexp/escape.js","node_modules/core-js/modules/_export.js","node_modules/core-js/modules/_global.js","node_modules/core-js/modules/_object-create.js","node_modules/core-js/modules/_has.js","node_modules/core-js/modules/_descriptors.js","node_modules/core-js/modules/_meta.js","node_modules/core-js/modules/_redefine.js","node_modules/core-js/modules/_shared.js","node_modules/core-js/modules/_fails.js","node_modules/core-js/modules/_uid.js","node_modules/core-js/modules/_wks-ext.js","node_modules/core-js/modules/_keyof.js","node_modules/core-js/modules/_wks-define.js","node_modules/core-js/modules/_wks.js","node_modules/core-js/modules/_set-to-string-tag.js","node_modules/core-js/modules/_enum-keys.js","node_modules/core-js/modules/_an-object.js","node_modules/core-js/modules/_to-primitive.js","node_modules/core-js/modules/_property-desc.js","node_modules/core-js/modules/_is-array.js","node_modules/core-js/modules/_to-iobject.js","node_modules/core-js/modules/_object-keys.js","node_modules/core-js/modules/_object-gopd.js","node_modules/core-js/modules/_library.js","node_modules/core-js/modules/_object-dp.js","node_modules/core-js/modules/_object-gopn.js","node_modules/core-js/modules/_object-pie.js","node_modules/core-js/modules/_object-gops.js","node_modules/core-js/modules/_object-gopn-ext.js","node_modules/core-js/modules/_hide.js","node_modules/core-js/modules/_object-sap.js","node_modules/core-js/modules/_object-dps.js","node_modules/core-js/modules/_to-object.js","node_modules/core-js/modules/_object-gpo.js","node_modules/core-js/modules/_is-object.js","node_modules/core-js/modules/_object-assign.js","node_modules/core-js/modules/_same-value.js","node_modules/core-js/modules/_classof.js","node_modules/core-js/modules/_set-proto.js","node_modules/core-js/modules/_bind.js","node_modules/core-js/modules/_parse-int.js","node_modules/core-js/modules/_parse-float.js","node_modules/core-js/modules/_inherit-if-required.js","node_modules/core-js/modules/_cof.js","node_modules/core-js/modules/_string-trim.js","node_modules/core-js/modules/_string-repeat.js","node_modules/core-js/modules/_an-instance.js","node_modules/core-js/modules/_to-integer.js","node_modules/core-js/modules/_a-number-value.js","node_modules/core-js/modules/_is-integer.js","node_modules/core-js/modules/_math-log1p.js","node_modules/core-js/modules/_math-expm1.js","node_modules/core-js/modules/_math-sign.js","node_modules/core-js/modules/_to-index.js","node_modules/core-js/modules/_to-length.js","node_modules/core-js/modules/_string-at.js","node_modules/core-js/modules/_fails-is-regexp.js","node_modules/core-js/modules/_string-context.js","node_modules/core-js/modules/_iter-define.js","node_modules/core-js/modules/_string-html.js","node_modules/core-js/modules/_date-to-primitive.js","node_modules/core-js/modules/_iter-call.js","node_modules/core-js/modules/_ctx.js","node_modules/core-js/modules/_is-array-iter.js","node_modules/core-js/modules/_create-property.js","node_modules/core-js/modules/core.get-iterator-method.js","node_modules/core-js/modules/_html.js","node_modules/core-js/modules/_iobject.js","node_modules/core-js/modules/_strict-method.js","node_modules/core-js/modules/_array-methods.js","node_modules/core-js/modules/_iter-detect.js","node_modules/core-js/modules/_array-includes.js","node_modules/core-js/modules/_add-to-unscopables.js","node_modules/core-js/modules/_array-reduce.js","node_modules/core-js/modules/_array-fill.js","node_modules/core-js/modules/_array-copy-within.js","node_modules/core-js/modules/_is-regexp.js","node_modules/core-js/modules/_flags.js","node_modules/core-js/modules/_set-species.js","node_modules/core-js/modules/_iter-step.js","node_modules/core-js/modules/_iterators.js","node_modules/core-js/modules/_fix-re-wks.js","node_modules/core-js/modules/_a-function.js","node_modules/core-js/modules/_for-of.js","node_modules/core-js/modules/_task.js","node_modules/core-js/modules/_microtask.js","node_modules/core-js/modules/_collection.js","node_modules/core-js/modules/_species-constructor.js","node_modules/core-js/modules/_collection-strong.js","node_modules/core-js/modules/_redefine-all.js","node_modules/core-js/modules/_collection-weak.js","node_modules/core-js/modules/_typed-buffer.js","node_modules/core-js/modules/_typed.js","node_modules/core-js/modules/_typed-array.js","node_modules/core-js/modules/_iter-create.js","node_modules/core-js/modules/_own-keys.js","node_modules/core-js/modules/_string-pad.js","node_modules/core-js/modules/_defined.js","node_modules/core-js/modules/_object-to-array.js","node_modules/core-js/modules/_object-forced-pam.js","node_modules/core-js/modules/_collection-to-json.js","node_modules/core-js/modules/_metadata.js","node_modules/core-js/modules/_array-from-iterable.js","node_modules/core-js/modules/_invoke.js","node_modules/core-js/modules/_partial.js","node_modules/core-js/modules/core.regexp.escape.js","node_modules/core-js/modules/_shared-key.js","node_modules/core-js/modules/_enum-bug-keys.js","node_modules/core-js/modules/_dom-create.js","node_modules/core-js/modules/_object-keys-internal.js","node_modules/core-js/modules/_ie8-dom-define.js","node_modules/core-js/modules/_string-ws.js","node_modules/core-js/modules/_array-species-create.js","node_modules/core-js/modules/core.is-iterable.js","node_modules/core-js/modules/_path.js","node_modules/core-js/modules/_replacer.js","node_modules/core-js/modules/_array-species-constructor.js"],"names":["require","Three","text","renderer","WebGLRenderer","clearDepth","document","getElementById","innerText","define","O","key","value","Object","DEFINE_PROPERTY","writable","configurable","global","_babelPolyfill","Error","String","prototype","padStart","padEnd","split","forEach","Array","Function","call","bind","self","THREE","REVISION","amd","exports","module","undefined","Number","EPSILON","Math","pow","sign","x","name","defineProperty","get","this","toString","match","assign","target","TypeError","to","i","n","arguments","length","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","enumerable","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","Color","color","fromArray","set","constructor","r","g","b","copy","setHex","setStyle","setScalar","scalar","hex","floor","setRGB","setHSL","hue2rgb","p","q","t","h","s","l","euclideanModulo","clamp","style","handleAlpha","string","parseFloat","console","warn","m","exec","components","min","parseInt","size","charAt","ColorKeywords","clone","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","sqrt","getHex","getHexString","slice","getHSL","optionalTarget","hue","saturation","hsl","max","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","c","array","offset","toArray","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Quaternion","y","z","w","_x","_y","_z","_w","onChangeCallback","quaternion","setFromEuler","euler","update","Euler","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","EPS","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","a","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","slerp","qb","cosHalfTheta","sinHalfTheta","halfTheta","atan2","ratioA","ratioB","onChange","callback","qa","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","tDir","f","Vector2","width","height","setX","setY","setComponent","index","getComponent","addVectors","addScaledVector","sub","subVectors","subScalar","isFinite","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","ceil","round","roundToZero","negate","lengthManhattan","PI","distanceTo","distanceToSquared","dx","dy","setLength","lerpVectors","v2","fromAttribute","attribute","itemSize","rotateAround","center","setZ","multiplyVectors","applyEuler","error","applyQuaternion","applyAxisAngle","applyMatrix3","e","applyMatrix4","applyProjection","d","qx","qy","qz","qw","ix","iy","iz","iw","project","matrix","camera","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","vector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromMatrixPosition","setFromMatrixColumn","setFromMatrixScale","sx","sy","sz","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","end","line","result","distanceSq","distance","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","Infinity","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","isEmpty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","intersectsBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromObject","object","scope","updateMatrixWorld","traverse","node","geometry","boundingBox","computeBoundingBox","intersectsSphere","closestPoint","sphere","intersectsPlane","plane","constant","getBoundingSphere","Sphere","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","me","setFromMatrix4","applyToVector3Array","j","applyToBuffer","buffer","getX","getY","getZ","setXYZ","determinant","throwOnDegenerate","t11","t12","t13","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","matrix4","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","x2","y2","z2","wx","wy","wz","lookAt","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","getPosition","setPosition","t14","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","intersectSphere","tca","d2","radius2","thc","t0","t1","distanceToPlane","denominator","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","intersectsLine","startSign","endSign","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","Spherical","other","makeSafe","vec3","generateUUID","chars","uuid","rnd","random","join","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","nearestPowerOfTwo","log","LN2","nextPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","pa","pb","pc","pd","v3","initFromArray","getPoint","k","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","push","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","values","stride","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","create","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","DiscreteInterpolant","LinearInterpolant","offset1","offset0","weight1","weight0","QuaternionLinearInterpolant","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","now","stop","getElapsedTime","getDelta","newTime","EventDispatcher","apply","addEventListener","hasEventListener","removeEventListener","dispatchEvent","type","listener","_listeners","listeners","indexOf","listenerArray","splice","event","Layers","mask","channel","enable","toggle","disable","test","layers","ascSort","intersectObject","raycaster","intersects","recursive","visible","raycast","children","Raycaster","params","Mesh","Line","LOD","Points","threshold","Sprite","defineProperties","PointCloud","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","sort","intersectObjects","objects","isArray","Object3D","onRotationChange","rotation","onQuaternionChange","Object3DIdCount","parent","DefaultUp","modelViewMatrix","rotationAutoUpdate","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","frustumCulled","renderOrder","userData","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getObjectById","id","getObjectByProperty","getObjectByName","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","meta","extractFromCache","cache","data","metadata","isRootObject","output","geometries","materials","textures","images","version","generator","JSON","stringify","material","source","parse","Face3","materialIndex","vertexNormals","vertexColors","BufferAttribute","dynamic","updateRange","count","needsUpdate","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyIndicesArray","indices","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","getW","setXY","setXYZW","Int8Attribute","Int8Array","Uint8Attribute","Uint8Array","Uint8ClampedAttribute","Uint8ClampedArray","Int16Attribute","Int16Array","Uint16Attribute","Uint16Array","Int32Attribute","Int32Array","Uint32Attribute","Uint32Array","Float32Attribute","Float64Attribute","Float64Array","DynamicBufferAttribute","InstancedBufferAttribute","meshPerAttribute","InterleavedBuffer","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","Geometry","GeometryIdCount","vertices","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","face","jl","obj","fromBufferGeometry","addFace","normals","tempNormals","uvs","tempUVs","uvs2","tempUVs2","attributes","positions","uv","uv2","groups","group","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","computeTangents","computeLineDistances","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precisionPoints","precision","faceIndicesToRemove","dupIndex","idx","sortFacesByMaterialIndex","materialIndexSort","_id","newUvs1","newUvs2","setBit","enabled","getNormalIndex","hash","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","dispose","DirectGeometry","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","BufferGeometry","morphAttributes","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","TypeArray","isNaN","pA","pB","pC","normalizeNormals","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","toNonIndexed","geometry2","array2","MaxIndex","InstancedBufferGeometry","maxInstancedCount","instances","Uniform","onUpdate","onUpdateCallback","AnimationClip","duration","tracks","resetDuration","trim","optimize","track","times","json","jsonTracks","frameTime","fps","KeyframeTrack","clip","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","numMorphTargets","AnimationUtils","getKeyframeOrder","sortedArray","NumberKeyframeTrack","findByName","clipArray","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","animation","bones","nodeName","addNonemptyTrack","trackType","trackName","animationKeys","propertyName","destTracks","flattenJSON","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","time","boneName","VectorKeyframeTrack","QuaternionKeyframeTrack","AnimationMixer","root","_root","_initMemoryManager","_accuIndex","timeScale","clipAction","optionalRoot","prototypeAction","rootUuid","clipObject","actionsForClip","_actionsByClip","existingAction","actionByRoot","knownActions","_clip","newAction","_Action","_bindAction","_addInactiveAction","stopAllAction","actions","_actions","nActions","_nActiveActions","bindings","_bindings","nBindings","_nActiveBindings","reset","useCount","deltaTime","timeDirection","accuIndex","action","_update","getRoot","uncacheClip","actionsByClip","actionsToRemove","_deactivateAction","cacheIndex","_cacheIndex","lastInactiveAction","_byClipCacheIndex","pop","_removeInactiveBindingsForAction","uncacheRoot","_removeInactiveAction","bindingsByRoot","_bindingsByRootAndName","bindingByName","binding","restoreOriginalState","_removeInactiveBinding","uncacheAction","mixer","localRoot","_mixer","_localRoot","nTracks","interpolants","interpolantSettings","interpolant","createInterpolant","_interpolantSettings","_interpolants","_propertyBindings","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","mode","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","_currentTimeScale","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","accumulate","interpolantValue","pause","loopCount","pingPong","_setEndings","loopDelta","pending","atStart","atEnd","weightNow","weightThen","bindingsByName","referenceCount","_addInactiveBinding","path","parsedPath","PropertyMixer","PropertyBinding","ValueTypeName","getValueSize","_lendBinding","saveOriginalState","_lendAction","_takeBackBinding","_takeBackAction","_controlInterpolants","_nActiveControlInterpolants","stats","inUse","controlInterpolants","knownActionsForClip","lastKnownAction","byClipCacheIndex","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","propBinding","rootNode","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","AnimationObjectGroup","var_args","_objects","nCachedObjects_","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","bindingsPerObject","nObjects","nCachedObjects","indicesByUUID","paths","parsedPaths","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastIndex","lastObject","last","subscribe_","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","arraySlice","from","isTypedArray","subarray","convertArray","forceClone","BYTES_PER_ELEMENT","ArrayBuffer","isView","DataView","compareTime","nValues","srcOffset","jsonKeys","valuePropertyName","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","message","getInterpolation","shift","timeOffset","endTime","nKeys","valid","prevTime","currTime","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","_getTrackTypeForValueTypeName","typeName","toLowerCase","ColorKeyframeTrack","BooleanKeyframeTrack","StringKeyframeTrack","parseTrackName","findNode","getValue","targetArray","setValue","sourceArray","targetObject","objectName","propertyIndex","_getValue_unavailable","_setValue_unavailable","objectIndex","skeleton","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","resolvedProperty","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","_getValue_unbound","_setValue_unbound","dest","Composite","targetGroup","optionalParsedPath","_targetGroup","firstValidIndex","re","matches","results","searchSkeleton","bone","searchNodeSubtree","childNode","subTreeNode","mixFunction","bufferType","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","currentWeight","mix","originalValueOffset","IntepolateDiscrete","Audio","context","createBufferSource","onended","onEnded","gain","createGain","connect","getInput","autoplay","playbackRate","isPlaying","hasPlaybackControl","sourceType","filter","getOutput","load","file","AudioBuffer","setBuffer","setNodeSource","audioNode","audioBuffer","onReady","currentTime","disconnect","getFilter","setFilter","setPlaybackRate","getPlaybackRate","getLoop","setVolume","getVolume","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getData","getByteFrequencyData","ready","readyCallbacks","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","send","PositionalAudio","panner","createPanner","setRefDistance","refDistance","getRefDistance","setRolloffFactor","rolloffFactor","getRolloffFactor","setDistanceModel","distanceModel","getDistanceModel","setMaxDistance","maxDistance","getMaxDistance","AudioListener","window","AudioContext","webkitAudioContext","destination","removeFilter","setMasterVolume","getMasterVolume","orientation","setOrientation","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","options","format","magFilter","minFilter","renderTarget","WebGLRenderTargetCube","updateCubeMap","scene","generateMipmaps","texture","activeCubeFace","render","setRenderTarget","zoom","updateProjectionMatrix","cx","cy","focalLength","setLens","frameHeight","atan","setViewOffset","fullWidth","fullHeight","StereoCamera","cameraL","cameraR","eyeRight","eyeLeft","eyeSep","eyeSepOnProjection","Light","intensity","groundColor","decay","penumbra","LightShadow","bias","mapSize","map","AmbientLight","DirectionalLight","shadow","HemisphereLight","skyColor","PointLight","power","SpotLight","Cache","files","clear","Loader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","extractUrlBase","url","initMaterials","texturePath","createMaterial","textureLoader","materialLoader","loadTexture","repeat","wrap","anisotropy","fullPath","loader","Handlers","setCrossOrigin","wrapS","wrapT","TextureLoader","MaterialLoader","blending","specular","emissive","shininess","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","lightMap","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","aoMap","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","bumpMap","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","bumpScale","normalMap","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","normalScale","specularMap","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","alphaMap","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","side","opacity","transparent","setTextures","handlers","regex","XHRLoader","manager","DefaultLoadingManager","onLoad","onProgress","onError","cached","setTimeout","overrideMimeType","status","itemEnd","itemError","withCredentials","itemStart","setPath","setResponseType","setWithCredentials","FontLoader","Font","substring","ImageLoader","image","createElement","src","JSONLoader","statusDomElement","_statusDomElement","setTexturePath","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","parseMorphing","dstVertices","srcVertices","morphColors","parseAnimations","outputAnimations","animations","concat","morphAnimationClips","LoadingManager","isLoading","itemsLoaded","itemsTotal","onStart","BufferGeometryLoader","TYPED_ARRAYS","typedArray","drawcalls","offsets","getTexture","roughness","metalness","uniforms","vertexShader","fragmentShader","shading","alphaTest","depthTest","depthWrite","colorWrite","wireframe","wireframeLinewidth","sizeAttenuation","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","emissiveIntensity","envMap","combine","reflectivity","lightMapIntensity","aoMapIntensity","ObjectLoader","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","widthSegments","heightSegments","depth","depthSegments","segments","thetaStart","thetaLength","radiusTop","radiusBottom","radialSegments","openEnded","phiStart","phiLength","DodecahedronGeometry","detail","IcosahedronGeometry","OctahedronGeometry","TetrahedronGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","tube","tubularSegments","arc","LatheGeometry","loadImage","parseConstant","Texture","mapping","getGeometry","getMaterial","Scene","SkinnedMesh","Group","levels","level","addLevel","CubeTextureLoader","urls","loaded","CubeTexture","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","texData","mipmaps","mipmapCount","CompressedTextureLoader","texDatas","CompressedTexture","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","overdraw","_needsUpdate","setValues","newValue","currentValue","isRoot","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","MeshBasicMaterial","refractionRatio","wireframeLinecap","wireframeLinejoin","skinning","MeshLambertMaterial","MeshPhongMaterial","MeshStandardMaterial","envMapIntensity","MeshDepthMaterial","MeshNormalMaterial","MultiMaterial","PointsMaterial","ShaderMaterial","defines","lights","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","UniformsUtils","RawShaderMaterial","SpriteMaterial","TextureIdCount","sourceFile","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","encoding","getDataURL","canvas","toDataURL","getContext","drawImage","transformUv","CanvasTexture","VideoTexture","video","requestAnimationFrame","readyState","HAVE_ENOUGH_DATA","inverseMatrix","testPoint","rayPointDistanceSq","localThresholdSq","intersectPoint","distanceToRay","localThreshold","LineSegments","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","faceIndex","nbVertices","LineStrip","LinePieces","drawMode","updateMorphTargets","setDrawMode","morphTargetBase","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","uvIntersection","uv1","uv3","barycoord","checkIntersection","intersectionPointWorld","checkBufferGeometryIntersection","intersection","intersectionPoint","uvA","uvB","uvC","tempA","tempB","tempC","fvA","fvB","fvC","isFaceMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","Bone","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","offsetMatrix","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","sw","vec","skinWeight","getObjectForDistance","matrixPosition","guessSizeSq","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","diffuse","offsetRepeat","flipEnvMap","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLights","properties","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","spotShadowMap","spotShadowMatrix","pointLights","pointShadowMap","pointShadowMatrix","hemisphereLights","ShaderLib","basic","lambert","phong","standard","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","distanceRGBA","lightPos","getTargetPixelRatio","_currentRenderTarget","_pixelRatio","glClearColor","_premultipliedAlpha","state","clearColor","setDefaultGLState","init","scissor","_currentScissor","_scissor","viewport","_currentViewport","_viewport","_clearColor","_clearAlpha","resetGLState","_currentProgram","_currentCamera","_currentGeometryProgram","_currentMaterialId","onContextLost","preventDefault","onTextureDispose","deallocateTexture","_infoMemory","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","textureProperties","__image__webglTextureCube","_gl","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglDepthbuffer","releaseMaterialProgramReference","programInfo","program","programCache","releaseProgram","setupVertexAttributes","startIndex","extension","initAttributes","geometryAttributes","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","getAttributeBuffer","enableAttributeAndDivisor","enableAttribute","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","disableUnusedAttributes","absNumericalSort","painterSortStable","reversePainterSortStable","pushRenderItem","transparentObjects","transparentObjectsLastIndex","opaqueObjects","opaqueObjectsLastIndex","renderItem","_vector3","projectObject","_frustum","sprites","ImmediateRenderObject","_this","sortObjects","_projScreenMatrix","groupMaterial","renderObjects","renderList","setMaterial","setProgram","renderBufferImmediate","renderBufferDirect","initMaterial","materialProperties","getParameters","_lights","code","getProgramCode","programChange","shaderID","shader","__webglShader","acquireProgram","numSupportedMorphTargets","maxMorphTargets","numSupportedMorphNormals","maxMorphNormals","uniformsList","uniformLocations","getUniforms","location","lightsHash","ambient","directional","spot","hemi","hasDynamicUniforms","uniform","setMaterialFaces","setBlending","setDepthFunc","setDepthTest","setDepthWrite","setColorWrite","setPolygonOffset","CULL_FACE","setFlipSided","_usedTextureUnits","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","uniformMatrix4fv","capabilities","logarithmicDepthBuffer","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","toneMappingExposure","toneMappingWhitePoint","floatVertexTextures","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","refreshUniformsLambert","refreshUniformsPhong","refreshUniformsStandard","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","updateDynamicUniforms","dynamicUniforms","uvScaleMap","WebGLRenderTarget","_canvas","clientHeight","uniformMatrix3fv","maxTextures","loadUniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix2fv","property","locationProperty","valueProperty","_array","i3","i4","setCubeTexture","setCubeTextureDynamic","setupLights","ll","light","directionalLength","pointLength","spotLength","hemiLength","shadowsLength","shadowsPointLight","lightCache","shadows","setTextureParameters","textureType","isPowerOfTwoImage","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","uploadTexture","slot","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","maxTextureSize","textureNeedsPowerOfTwo","makePowerOfTwo","glFormat","glType","mipmap","texImage2D","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","__version","maxSize","HTMLImageElement","HTMLCanvasElement","TEXTURE_CUBE_MAP","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthRenderbuffer","isCube","createRenderbuffer","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","HALF_FLOAT_OES","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_preserveDrawingBuffer","preserveDrawingBuffer","domElement","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaInput","gammaOutput","physicallyCorrectLights","toneMapping","_currentFramebuffer","_currentScissorTest","_width","_height","_scissorTest","_infoRender","calls","info","memory","programs","getShaderPrecisionFormat","rangeMin","rangeMax","WebGLExtensions","WebGLCapabilities","WebGLState","WebGLProperties","WebGLObjects","WebGLPrograms","WebGLLights","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","shadowMap","WebGLShadowMap","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","getContextAttributes","forceContextLoss","loseContext","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","setSize","getSize","updateStyle","setViewport","setScissor","setScissorTest","boolean","getClearColor","setClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearStencil","clearTarget","buffers","hasPositions","createBuffer","hasNormals","hasUvs","hasColors","bufferData","positionArray","DYNAMIC_DRAW","normalArray","nx","ny","nz","uvArray","colorArray","drawArrays","TRIANGLES","updateBuffers","geometryProgram","activeInfluences","getWireframeAttribute","ELEMENT_ARRAY_BUFFER","dataStart","dataCount","rangeStart","rangeCount","groupStart","groupCount","drawStart","drawEnd","drawCount","setLineWidth","setMode","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","lineWidth","LINE_STRIP","POINTS","renderInstances","forceClear","setFaceCulling","cullFace","frontFaceDirection","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","complete","getCurrentRenderTarget","scissorTest","activeMipMapLevel","readRenderTargetPixels","restore","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","drawArraysInstancedANGLE","drawElements","drawElementsInstancedANGLE","gl","getExtension","getMaxPrecision","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","_maxPrecision","WebGLGeometries","onGeometryDispose","buffergeometry","_bufferGeometry","deleteAttribute","deleteAttributes","bufferproperty","__webglBuffer","deleteBuffer","removeAttributeBuffer","updateAttribute","attributeProperties","updateBuffer","usage","STATIC_DRAW","bufferSubData","edges","checkEdge","list","WebGLProgram","getEncodingComponents","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","rendererExtensions","envMapCubeUV","flatShading","filterEmptyLine","generateDefines","fetchUniformLocations","identifiers","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","structRe","structName","structProperty","uniformsStruct","arrayStructRe","arrayName","arrayIndex","arrayProperty","uniformsArray","uniformsArrayIndex","arrayRe","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","replaceLightNums","replace","numDirLights","numSpotLights","numPointLights","numHemiLights","parseIncludes","include","unrollLoops","snippet","unroll","programIdCount","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","customDefines","createProgram","supportsVertexTextures","maxBones","doubleSided","flipSided","shadowMapEnabled","pointLightShadows","useFog","fogExp","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedUniforms","cachedAttributes","destroy","deleteProgram","usedTimes","allocateBones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","shaderIDs","parameterNames","envMapMode","parameterName","pl","addLineNumbers","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","_renderer","getDepthMaterial","isPointLight","lightPositionWorld","newMaterial","materialVariants","_depthMaterials","customMaterial","customDepthMaterial","_distanceMaterials","customDistanceMaterial","useMorphing","useSkinning","variantIndex","_MorphingFlag","_SkinningFlag","shadowCamera","_renderList","_state","_shadowMapSize","_lookTarget","_lightPositionWorld","_NumberOfMaterialVariants","cubeDirections","cubeUps","cube2DViewPorts","depthShader","depthUniforms","distanceShader","distanceUniforms","depthMaterial","distanceMaterial","USE_SHADOWMAP","faceCount","BLEND","vpWidth","vpHeight","pars","shadowMatrix","vpDimensions","clearAlpha","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentDepthFunc","currentDepthWrite","currentColorWrite","currentStencilWrite","currentStencilFunc","currentStencilRef","currentStencilMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentFlipSided","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentScissorTest","currentTextureSlot","currentBoundTextures","currentClearColor","currentClearDepth","currentClearStencil","currentScissor","currentViewport","emptyTexture","DEPTH_TEST","LEQUAL","blendFunc","enableVertexAttribArray","vertexAttribDivisorANGLE","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","blendFuncSeparate","NEVER","ALWAYS","LESS","EQUAL","GEQUAL","GREATER","NOTEQUAL","depthMask","colorMask","setStencilFunc","stencilFunc","stencilRef","stencilMask","setStencilOp","stencilFail","stencilZFail","stencilZPass","stencilOp","setStencilTest","stencilTest","STENCIL_TEST","setStencilWrite","stencilWrite","factor","units","POLYGON_OFFSET_FILL","getScissorTest","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","flares","vertexBuffer","elementBuffer","tempTexture","occlusionTexture","hasVertexTexture","renderType","occlusionMap","screenPosition","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","uvOffset","uvScale","fogType","fillStyle","fillRect","spritePosition","spriteRotation","spriteScale","oldFogType","sceneFogType","isIntersectionBox","isIntersectionSphere","multiplyVector3","multiplyVector3Array","extractPosition","multiplyVector4","rotateAxis","crossVector","rotateByAxis","isIntersectionLine","isIntersectionPlane","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","Face4","Vertex","eulerOrder","getChildByName","renderDepth","useQuaternion","ParticleSystem","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","addIndex","addDrawCall","indexOffset","clearDrawCalls","computeOffsets","wrapAround","wrapRGB","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","metal","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapCullFace","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","MeshFaceMaterial","CurveUtils","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","SceneUtils","createMultiMaterialObject","detach","attach","ShapeUtils","contour","triangulate","snip","verts","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cpx","cpy","cCROSSap","bCROSScp","aCROSSbp","vertIndices","nv","triangulateShape","holes","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","shape","prevShapeIdx","nextShapeIdx","insideAngle","hole","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","sIdx","nextIdx","intersectsHoleEdge","ihIdx","chkHole","hIdx","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","counter","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","isClockWise","pts","b2p0","b2p1","b2p2","b3","b3p0","b3p1","b3p2","b3p3","Curve","getPointAt","getUtoTmapping","getPoints","divisions","getSpacedPoints","lengths","getLengths","cacheArcLengths","current","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","getTangentAt","getPointFunc","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","createPointsGeometry","createGeometry","createSpacedPointsGeometry","generateShapes","createPaths","resolution","ret","createPath","glyph","glyphs","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","Path","o","outline","_cachedOutline","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","ha","shapes","toShapes","fromPoints","args","lastargs","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","lastPoint","item","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","Shape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sLen","sho","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","extrude","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","extractAllPoints","extractPoints","tangent","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","CatmullRomCurve3","CubicPoly","pz","c0","initNonuniformCatmullRom","x3","dt0","dt1","dt2","initCatmullRom","tension","calc","closed","ClosedSplineCurve3","BoxGeometry","BoxBufferGeometry","CubeGeometry","calculateVertexCount","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","vertexBufferOffset","uvBufferOffset","numberOfVertices","indexBufferOffset","vertexCount","indexCount","CircleGeometry","CircleBufferGeometry","ii","segment","CylinderBufferGeometry","calculateIndexCount","generateTorso","tanTheta","indexRow","halfHeight","indexArray","generateCap","centerIndexStart","centerIndexEnd","CylinderGeometry","EdgesGeometry","thresholdAngle","sortFunction","thresholdDot","edge","vert1","vert2","face1","face2","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","vlen","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","curveSegments","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","frames","TubeGeometry","FrenetFrames","shapePoints","reverse","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheBufferGeometry","base","inverseSegments","n1","n2","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","offset2","RingBufferGeometry","radiusStep","thetaSegmentLevel","RingGeometry","SphereGeometry","SphereBufferGeometry","thetaEnd","verticesRow","v4","TextGeometry","font","TorusBufferGeometry","TorusGeometry","TorusKnotBufferGeometry","calculatePositionOnCurve","cu","su","quOverP","cs","P1","P2","B","T","N","TorusKnotGeometry","heightScale","taper","NoTaper","ip","jp","uva","uvb","uvc","uvd","grid","numpoints","pos2","tangents","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","tz","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","cols","aj","bj","rows","ParametricGeometry","func","slices","stacks","sliceCount","WireframeGeometry","numEdges","ol","numTris","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","CameraHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","FaceNormalsHelper","nNormals","objGeometry","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","objPos","objNorm","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","lastFrame","currentFrame","active","directionBackwards","mirroredLoop","autoCreateAnimations","firstAnimation","frameRanges","morph","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","playAnimation","stopAnimation","keyframe","innerFn","outerFn","tryLocsList","Generator","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","err","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","method","AwaitArgument","AsyncIterator","invoke","Promise","resolve","then","invokeNext","invokeThrow","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","process","domain","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","iterator","returnMethod","record","done","GenStateSuspendedYield","resultName","next","nextLoc","_sent","sent","dispatchException","abrupt","ContinueSentinel","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","iteratorSymbol","hasOwn","hasOwnProperty","Symbol","inModule","runtime","regeneratorRuntime","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","skipTempReset","prev","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","catch","thrown","delegateYield","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","run","clearTimeout","Item","fun","noop","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","cwd","chdir","umask","$export","S","has","DESCRIPTORS","redefine","META","KEY","$fails","shared","setToStringTag","uid","wks","wksExt","wksDefine","keyOf","enumKeys","anObject","toIObject","toPrimitive","createDesc","_create","gOPNExt","$GOPD","$DP","$keys","gOPD","dP","gOPN","$Symbol","$JSON","_stringify","PROTOTYPE","HIDDEN","TO_PRIMITIVE","isEnum","propertyIsEnumerable","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","it","D","protoDesc","tag","sym","_k","isSymbol","$defineProperty","$defineProperties","P","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","$getOwnPropertySymbols","IS_OP","$set","G","W","F","symbols","store","for","keyFor","useSetter","useSimple","getOwnPropertyNames","getOwnPropertySymbols","replacer","$replacer","valueOf","toObject","$getPrototypeOf","isObject","onFreeze","$freeze","$preventExtensions","$seal","$isFrozen","$isSealed","$isExtensible","is","classof","FProto","nameRE","NAME","isExtensible","$parseFloat","getPrototypeOf","HAS_INSTANCE","FunctionProto","$parseInt","cof","inheritIfRequired","fails","$trim","NUMBER","$Number","Base","proto","BROKEN_COF","TRIM","toNumber","argument","third","radix","maxCode","first","charCodeAt","NaN","digits","anInstance","toInteger","aNumberValue","$toFixed","toFixed","ERROR","numToString","acc","fractionDigits","RangeError","$toPrecision","toPrecision","_isFinite","isInteger","number","MAX_SAFE_INTEGER","isSafeInteger","MIN_SAFE_INTEGER","log1p","$acosh","acosh","asinh","$asinh","$atanh","atanh","cbrt","clz32","LOG2E","$expm1","expm1","EPSILON32","MAX32","MIN32","roundTiesToEven","fround","$abs","$sign","exp","cosh","hypot","value1","value2","div","aLen","larg","$imul","imul","UINT16","xn","yn","xl","yl","log10","LN10","log2","sinh","tanh","trunc","toIndex","fromCharCode","$fromCodePoint","fromCodePoint","res","toLength","raw","callSite","tpl","$at","codePointAt","ENDS_WITH","$endsWith","endsWith","searchString","endPosition","search","iterated","_t","_i","INCLUDES","includes","STARTS_WITH","$startsWith","startsWith","createHTML","Date","getTime","DateProto","INVALID_DATE","TO_STRING","$toString","toISOString","pv","lz","num","getUTCFullYear","getUTCMilliseconds","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","ctx","isArrayIter","createProperty","getIterFn","arrayLike","C","mapfn","iterFn","html","begin","klass","upTo","cloned","of","arrayJoin","separator","$forEach","STRICT","callbackfn","aFunction","$sort","comparefn","$map","$filter","$some","some","$every","every","$reduce","reduce","reduceRight","$indexOf","$native","NEGATIVE_ZERO","searchElement","$find","forced","find","fill","findIndex","copyWithin","isRegExp","$flags","$RegExp","RegExp","re1","re2","CORRECT_NEW","tiRE","piRE","fiU","proxy","flags","R","addToUnscopables","Iterators","kind","Arguments","defined","REPLACE","$replace","searchValue","replaceValue","MATCH","$match","regexp","SEARCH","$search","LIBRARY","forOf","setProto","speciesConstructor","task","microtask","PROMISE","$Promise","isNode","Internal","GenericPromiseCapability","Wrapper","promise","FakePromise","PromiseRejectionEvent","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","reject","$$resolve","$$reject","perform","notify","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","_h","onHandleUnhandled","enter","exit","onUnhandled","isUnhandled","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","$resolve","wrapper","executor","onFulfilled","onRejected","capability","all","remaining","$index","alreadyCalled","race","strong","getEntry","def","SPLIT","$split","_split","$push","$SPLIT","LENGTH","LAST_INDEX","NPCG","separator2","lastLength","ignoreCase","multiline","unicode","sticky","lastLastIndex","splitLimit","separatorCopy","each","weak","getWeak","uncaughtFrozenStore","ufstore","InternalMap","methods","$WeakMap","freeze","getConstructor","NEED","_f","$typed","TYPED_ARRAY","$ArrayBuffer","$DataView","$isView","ABV","$slice","VIEW","CONSTR","U","byteLength","final","viewS","viewT","setUint8","getUint8","byteOffset","_apply","thisArgument","argumentsList","Reflect","construct","Target","newTarget","$args","instance","deleteProperty","propertyKey","Enumerate","enumerate","receiver","getProto","ownKeys","preventExtensions","V","existingDescriptor","ownDesc","check","$includes","el","$pad","maxLength","getFlags","RegExpProto","$RegExpStringIterator","_r","matchAll","rx","getOwnPropertyDescriptors","getDesc","$values","__defineGetter__","getter","$entries","entries","__defineSetter__","__lookupSetter__","K","__lookupGetter__","iaddh","$x0","$x1","$y0","isError","isubh","umulh","$u","$v","u0","u1","imulh","toMetaKey","ordinaryDefineOwnMetadata","defineMetadata","metadataKey","metadataValue","targetKey","getOrCreateMetadataMap","deleteMetadata","metadataMap","targetMetadata","ordinaryGetOwnMetadata","getOwnMetadata","ordinaryHasOwnMetadata","ordinaryGetMetadata","MetadataKey","getMetadata","ordinaryOwnMetadataKeys","getOwnMetadataKeys","Set","ordinaryMetadataKeys","oKeys","pKeys","getMetadataKeys","ordinaryHasMetadata","hasMetadata","hasOwnMetadata","core","OBSERVABLE","redefineAll","hide","RETURN","getMethod","cleanupSubscription","subscription","cleanup","subscriptionClosed","_o","closeSubscription","Subscription","observer","subscriber","SubscriptionObserver","unsubscribe","$Observable","subscribe","observable","items","Observable","asap","$task","setImmediate","clearImmediate","partial","navigator","MSIE","userAgent","setInterval","__e","$iterators","ITERATOR","TO_STRING_TAG","ArrayValues","collections","Collection","escape","own","out","IS_FORCED","IS_GLOBAL","IS_STATIC","IS_PROTO","IS_BIND","expProto","__g","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","gt","display","appendChild","contentWindow","write","close","Properties","setDesc","FREEZE","setMeta","fastKey","SRC","TPL","inspectSource","val","safe","isFunction","SHARED","getKeys","USE_SYMBOL","$exports","TAG","stat","gOPS","pIE","getSymbols","bitmap","IObject","IE8_DOM_DEFINE","Attributes","hiddenKeys","windowNames","getWindowNames","$assign","A","ARG","tryGet","callee","buggy","factories","partArgs","bound","ws","str","spaces","space","non","ltrim","rtrim","exporter","ALIAS","FORCE","TYPE","Constructor","forbiddenField","$iterCreate","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","DEFAULT","IS_SET","FORCED","IteratorPrototype","DEF_VALUES","VALUES_BUG","$default","$anyNative","quot","hint","ArrayProto","getIteratorMethod","documentElement","asc","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","SAFE_CLOSING","riter","skipClosing","arr","IS_INCLUDES","fromIndex","UNSCOPABLES","memo","isRight","endPos","inc","SPECIES","SYMBOL","fns","strfn","rxfn","BREAK","cel","setTask","clearTask","MessageChannel","ONREADYSTATECHANGE","defer","port","port2","port1","onmessage","postMessage","importScripts","removeChild","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","flush","createTextNode","observe","characterData","$iterDetect","IS_WEAK","ADDER","fixMethod","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","setStrong","$iterDefine","setSpecies","SIZE","_l","delete","createArrayMethod","$has","arrayFind","arrayFindIndex","UncaughtFrozenStore","findUncaughtFrozen","arrayFill","DATA_VIEW","WRONG_LENGTH","WRONG_INDEX","BaseBuffer","BUFFER","BYTE_LENGTH","BYTE_OFFSET","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","eLen","eMax","eBias","rt","unpackIEEE754","nBits","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","addGetter","internal","view","isLittleEndian","numIndex","intIndex","_b","pack","conversion","validateArrayBufferArguments","numberLength","ArrayBufferProto","$setInt8","setInt8","getInt8","bufferLength","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","TYPED","Typed","TypedArrayConstructors","$buffer","propertyDesc","same","isIterable","createArrayIncludes","ArrayIterators","arrayCopyWithin","SHARED_BUFFER","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayIncludes","arrayIndexOf","arrayValues","arrayKeys","arrayEntries","arrayLastIndexOf","arrayReduce","arrayReduceRight","arraySort","arrayToString","arrayToLocaleString","toLocaleString","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","allocate","LITTLE_ENDIAN","FORCED_SET","strictToLength","SAME","toOffset","BYTES","speciesFromList","fromList","$from","$of","TO_LOCALE_BUG","$toLocaleString","predicate","middle","$begin","isTAIndex","$getDesc","$setDesc","$TypedArrayPrototype$","CLAMPED","ISNT_UINT8","GETTER","SETTER","TypedArray","TAC","TypedArrayPrototype","addElement","$offset","$length","$len","$nativeIterator","CORRECT_ITER_NAME","$iterator","descriptor","fillString","stringLength","fillStr","intMaxLength","fillLen","stringFiller","isEntries","Map","keyMetadata","MetadataValue","un","pargs","holder","$re","original","regExp","part"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\r\nrequire(\"babel-polyfill\");\r\nvar Three = require(\"three\");\r\nvar text = \"hello world!\";\r\nvar renderer = new Three.WebGLRenderer();\r\nrenderer.clearDepth();\r\ndocument.getElementById(\"main\").innerText += text;\r\n// let a = async () => {\r\n//     console.log(\"doSome\");\r\n// };\r\n// a();\r\n//# sourceMappingURL=app.js.map","/*istanbul ignore next*/\"use strict\";\n\n/*istanbul ignore next*/require(\"core-js/shim\");\n\n/*istanbul ignore next*/require(\"babel-regenerator-runtime\");\n\n/*istanbul ignore next*/require(\"core-js/fn/regexp/escape\");\n\n/* eslint max-len: 0 */\n\nif (global._babelPolyfill) {\n  throw new Error(\"only one instance of babel-polyfill is allowed\");\n}\nglobal._babelPolyfill = true;\n\n// Should be removed in the next major release:\n\nvar DEFINE_PROPERTY = \"defineProperty\";\nfunction define(O, key, value) {\n  O[key] || Object[DEFINE_PROPERTY](O, key, {\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\n\ndefine(String.prototype, \"padLeft\", \"\".padStart);\ndefine(String.prototype, \"padRight\", \"\".padEnd);\n\n\"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill\".split(\",\").forEach(function (key) {\n  [][key] && define(Array, key, Function.call.bind([][key]));\n});","var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '75' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\tObject.defineProperty( Object, 'assign', {\r\n\r\n\t\twritable: true,\r\n\t\tconfigurable: true,\r\n\r\n\t\tvalue: function ( target ) {\r\n\r\n\t\t\t'use strict';\r\n\r\n\t\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\t\tthrow new TypeError( \"Cannot convert first argument to object\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar to = Object( target );\r\n\r\n\t\t\tfor ( var i = 1, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar nextSource = arguments[ i ];\r\n\r\n\t\t\t\tif ( nextSource === undefined || nextSource === null ) continue;\r\n\r\n\t\t\t\tnextSource = Object( nextSource );\r\n\r\n\t\t\t\tvar keysArray = Object.keys( nextSource );\r\n\r\n\t\t\t\tfor ( var nextIndex = 0, len = keysArray.length; nextIndex !== len; ++ nextIndex ) {\r\n\r\n\t\t\t\t\tvar nextKey = keysArray[ nextIndex ];\r\n\t\t\t\t\tvar desc = Object.getOwnPropertyDescriptor( nextSource, nextKey );\r\n\r\n\t\t\t\t\tif ( desc !== undefined && desc.enumerable ) {\r\n\r\n\t\t\t\t\t\tto[ nextKey ] = nextSource[ nextKey ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn to;\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n// mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n// depth modes\r\n\r\nTHREE.NeverDepth = 0;\r\nTHREE.AlwaysDepth = 1;\r\nTHREE.LessDepth = 2;\r\nTHREE.LessEqualDepth = 3;\r\nTHREE.EqualDepth = 4;\r\nTHREE.GreaterEqualDepth = 5;\r\nTHREE.GreaterDepth = 6;\r\nTHREE.NotEqualDepth = 7;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Tone Mapping modes\r\n\r\nTHREE.NoToneMapping = 0; // do not do any tone mapping, not even exposure (required for special purpose passes.)\r\nTHREE.LinearToneMapping = 1; // only apply exposure.\r\nTHREE.ReinhardToneMapping = 2;\r\nTHREE.Uncharted2ToneMapping = 3; // John Hable\r\nTHREE.CineonToneMapping = 4;  // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = 300;\r\n\r\nTHREE.CubeReflectionMapping = 301;\r\nTHREE.CubeRefractionMapping = 302;\r\n\r\nTHREE.EquirectangularReflectionMapping = 303;\r\nTHREE.EquirectangularRefractionMapping = 304;\r\n\r\nTHREE.SphericalReflectionMapping = 305;\r\nTHREE.CubeUVReflectionMapping = 306;\r\nTHREE.CubeUVRefractionMapping = 307;\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\nTHREE.HalfFloatType = 1025;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n// ETC compressed texture formats\r\n\r\nTHREE.RGB_ETC1_Format = 2151;\r\n\r\n// Loop styles for AnimationAction\r\n\r\nTHREE.LoopOnce = 2200;\r\nTHREE.LoopRepeat = 2201;\r\nTHREE.LoopPingPong = 2202;\r\n\r\n// Interpolation\r\n\r\nTHREE.InterpolateDiscrete = 2300;\r\nTHREE.InterpolateLinear = 2301;\r\nTHREE.InterpolateSmooth = 2302;\r\n\r\n// Interpolant ending modes\r\n\r\nTHREE.ZeroCurvatureEnding = 2400;\r\nTHREE.ZeroSlopeEnding = 2401;\r\nTHREE.WrapAroundEnding = 2402;\r\n\r\n// Triangle Draw modes\r\n\r\nTHREE.TrianglesDrawMode = 0;\r\nTHREE.TriangleStripDrawMode = 1;\r\nTHREE.TriangleFanDrawMode = 2;\r\n\r\n// Texture Encodings\r\n\r\nTHREE.LinearEncoding = 3000; // No encoding at all.\r\nTHREE.sRGBEncoding = 3001;\r\nTHREE.GammaEncoding = 3007; // uses GAMMA_FACTOR, for backwards compatibility with WebGLRenderer.gammaInput/gammaOutput\r\n\r\n// The following Texture Encodings are for RGB-only (no alpha) HDR light emission sources.\r\n// These encodings should not specified as output encodings except in rare situations.\r\nTHREE.RGBEEncoding = 3002; // AKA Radiance.\r\nTHREE.LogLuvEncoding = 3003;\r\nTHREE.RGBM7Encoding = 3004;\r\nTHREE.RGBM16Encoding = 3005;\r\nTHREE.RGBDEncoding = 3006; // MaxRange is 256.\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.fromArray( arguments );\r\n\r\n\t}\r\n\r\n\treturn this.set( color );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nObject.assign( THREE.Quaternion, {\r\n\r\n\tslerp: function( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function(\r\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\r\n\r\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tvar s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.x;\r\n\r\n\t},\r\n\r\n\tset width( value ) {\r\n\r\n\t\tthis.x = value;\r\n\r\n\t},\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.y;\r\n\r\n\t},\r\n\r\n\tset height( value ) {\r\n\r\n\t\tthis.y = value;\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\tthis.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tvar angle = Math.atan2( this.y, this.x );\r\n\r\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tvar x = this.x - center.x;\r\n\t\tvar y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\tthis.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function( s ) {\r\n\r\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\r\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\treturn this.setFromMatrixColumn( m, 3 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\tif ( typeof m === 'number' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).' );\r\n\r\n\t\t\tm = arguments[ 1 ];\r\n\t\t\tindex = arguments[ 0 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tvar minX = + Infinity;\r\n\t\tvar minY = + Infinity;\r\n\t\tvar minZ = + Infinity;\r\n\r\n\t\tvar maxX = - Infinity;\r\n\t\tvar maxY = - Infinity;\r\n\t\tvar maxZ = - Infinity;\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; i += 3 ) {\r\n\r\n\t\t\tvar x = array[ i ];\r\n\t\t\tvar y = array[ i + 1 ];\r\n\t\t\tvar z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar box;\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tif ( box === undefined ) box = new THREE.Box3();\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\t\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( geometry.boundingBox.isEmpty() === false ) {\r\n\r\n\t\t\t\t\t\tbox.copy( geometry.boundingBox );\r\n\t\t\t\t\t\tbox.applyMatrix4( node.matrixWorld );\r\n\t\t\t\t\t\tscope.union( box );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t\t point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t\t point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t\t box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t\t box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: ( function () {\r\n\r\n\t\tvar closestPoint;\r\n\r\n\t\treturn function intersectsSphere( sphere ) {\r\n\r\n\t\t\tif ( closestPoint === undefined ) closestPoint = new THREE.Vector3();\r\n\r\n\t\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\r\n\r\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tvar min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= plane.constant && max >= plane.constant );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n * @author tschw\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( matrix instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\t\t}\r\n\r\n\t\tte[ 0 ] = t11;\r\n\t\tte[ 1 ] = n31 * n23 - n33 * n21;\r\n\t\tte[ 2 ] = n32 * n21 - n31 * n22;\r\n\r\n\t\tte[ 3 ] = t12;\r\n\t\tte[ 4 ] = n33 * n11 - n31 * n13;\r\n\t\tte[ 5 ] = n31 * n12 - n32 * n11;\r\n\r\n\t\tte[ 6 ] = t13;\r\n\t\tte[ 7 ] = n21 * n13 - n23 * n11;\r\n\t\tte[ 8 ] = n22 * n11 - n21 * n12;\r\n\r\n\t\treturn this.multiplyScalar( 1 / det );\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\treturn v1.setFromMatrixColumn( this, 3 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\r\n\t\t}\r\n\r\n\t\tte[ 0 ] = t11;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\r\n\t\tte[ 4 ] = t12;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\r\n\t\tte[ 8 ] = t13;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\r\n\t\tte[ 12 ] = t14;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\treturn this.multiplyScalar( 1 / det );\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = 1.0 / ( right - left );\r\n\t\tvar h = 1.0 / ( top - bottom );\r\n\t\tvar p = 1.0 / ( far - near );\r\n\r\n\t\tvar x = ( right + left ) * w;\r\n\t\tvar y = ( top + bottom ) * h;\r\n\t\tvar z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectsBox: ( function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We use the following equation to compute the signed distance from\r\n\t\t// the center of the sphere to the plane.\r\n\t\t//\r\n\t\t// distance = q * n - d\r\n\t\t//\r\n\t\t// If this distance is greater than the radius of the sphere,\r\n\t\t// then there is no intersection.\r\n\r\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spherical.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The poles (phi) are at the positive and negative y axis.\r\n * The equator starts at positive z.\r\n */\r\n\r\nTHREE.Spherical = function ( radius, phi, theta ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\r\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Spherical.prototype = {\r\n\r\n\tconstructor: THREE.Spherical,\r\n\r\n\tset: function ( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius.copy( other.radius );\r\n\t\tthis.phi.copy( other.phi );\r\n\t\tthis.theta.copy( other.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe: function() {\r\n\r\n\t\tvar EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function( vec3 ) {\r\n\r\n\t\tthis.radius = vec3.length();\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\r\n\t\t\tthis.phi = Math.acos( THREE.Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Interpolant.js\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.Interpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n};\r\n\r\nTHREE.Interpolant.prototype = {\r\n\r\n\tconstructor: THREE.Interpolant,\r\n\r\n\tevaluate: function( t ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[   i1   ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tvar right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n//- See http://jsperf.com/comparison-to-undefined/3\r\n//- slower code:\r\n//-\r\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n//- slower code:\r\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[   i1   ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function() {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tthrow new Error( \"call to abstract method\" );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Interpolant.prototype, {\r\n\r\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_,\r\n\r\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/CubicInterpolant.js\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.CubicInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = -0;\r\n\tthis._offsetPrev = -0;\r\n\tthis._weightNext = -0;\r\n\tthis._offsetNext = -0;\r\n\r\n};\r\n\r\nTHREE.CubicInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\r\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\r\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\r\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/DiscreteInterpolant.js\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.DiscreteInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.DiscreteInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.DiscreteInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/LinearInterpolant.js\r\n\r\n/**\r\n * @author tschw\r\n */\r\n\r\nTHREE.LinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.LinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.LinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/QuaternionLinearInterpolant.js\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionLinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.QuaternionLinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset = i1 * stride,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tTHREE.Quaternion.slerpFlat( result, 0,\r\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = performance.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = performance.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Layers.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Layers = function () {\r\n\r\n\tthis.mask = 1;\r\n\r\n};\r\n\r\nTHREE.Layers.prototype = {\r\n\r\n\tconstructor: THREE.Layers,\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel );\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://clara.io/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction ascSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new THREE.Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRootObject = ( meta === undefined );\r\n\r\n\t\tvar output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tvar object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.geometry !== undefined ) {\r\n\r\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.geometry = this.geometry.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.material = this.material.uuid;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.count;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex  );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tvar faces = this.faces;\r\n\t\tvar length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tvar newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = true;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.DirectGeometry.prototype = {\r\n\r\n\tconstructor: THREE.DirectGeometry,\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tvar morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tvar morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tthis.boundingBox.setFromArray( positions );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tbox.setFromArray( positions );\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar array = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tarray[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry2 = new THREE.BufferGeometry();\r\n\r\n\t\tvar indices = this.index.array;\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\r\n\t\t\tvar array = attribute.array;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\r\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tvar index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.addAttribute( name, new THREE.BufferAttribute( array2, itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\r\n// File:src/core/Uniform.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Uniform = function ( type, value ) {\r\n\r\n\tthis.type = type;\r\n\tthis.value = value;\r\n\r\n\tthis.dynamic = false;\r\n\r\n};\r\n\r\nTHREE.Uniform.prototype = {\r\n\r\n\tconstructor: THREE.Uniform,\r\n\r\n\tonUpdate: function ( callback ) {\r\n\r\n\t\tthis.dynamic = true;\r\n\t\tthis.onUpdateCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/AnimationClip.js\r\n\r\n/**\r\n *\r\n * Reusable set of Tracks that represent an animation.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationClip = function ( name, duration, tracks ) {\r\n\r\n\tthis.name = name || THREE.Math.generateUUID();\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n\t// maybe only do these on demand, as doing them here could potentially slow down loading\r\n\t// but leaving these here during development as this ensures a lot of testing of these functions\r\n\tthis.trim();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.AnimationClip.prototype = {\r\n\r\n\tconstructor: THREE.AnimationClip,\r\n\r\n\tresetDuration: function() {\r\n\r\n\t\tvar tracks = this.tracks,\r\n\t\t\tduration = 0;\r\n\r\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max(\r\n\t\t\t\t\tduration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t},\r\n\r\n\ttrim: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\toptimize: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.AnimationClip, {\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( json.name, json.duration, tracks );\r\n\r\n\t},\r\n\r\n\r\n\ttoJSON: function( clip ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tvar json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\r\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps ) {\r\n\r\n\t\tvar numMorphTargets = morphTargetSequence.length;\r\n\t\tvar tracks = [];\r\n\r\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tvar times = [];\r\n\t\t\tvar values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tvar order = THREE.AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = THREE.AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = THREE.AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\t\tnew THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\t\ttimes, values\r\n\t\t\t\t\t).scale( 1.0 / fps ) );\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( name, -1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function( clipArray, name ) {\r\n\r\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps ) {\r\n\r\n\t\tvar animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\t\tvar parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tvar name = parts[ 1 ];\r\n\r\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar clips = [];\r\n\r\n\t\tfor ( var name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( THREE.AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function( animation, bones, nodeName ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar addNonemptyTrack = function(\r\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tvar times = [];\r\n\t\t\t\tvar values = [];\r\n\r\n\t\t\t\tTHREE.AnimationUtils.flattenJSON(\r\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar tracks = [];\r\n\r\n\t\tvar clipName = animation.name || 'default';\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tvar duration = animation.length || -1;\r\n\t\tvar fps = animation.fps || 30;\r\n\r\n\t\tvar hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length == 0 ) continue;\r\n\r\n\t\t\t// process morph targets in a way exactly compatible\r\n\t\t\t// with AnimationHandler.init( animation )\r\n\t\t\tif ( animationKeys[0].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tvar morphTargetNames = {};\r\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tvar times = [];\r\n\t\t\t\t\tvar values = [];\r\n\r\n\t\t\t\t\tfor ( var m = 0;\r\n\t\t\t\t\t\t\tm !== animationKeys[k].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 )\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t\t'.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.QuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar clip = new THREE.AnimationClip( clipName, duration, tracks );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n// File:src/animation/AnimationMixer.js\r\n\r\n/**\r\n *\r\n * Player for AnimationClips.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationMixer = function( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n};\r\n\r\nTHREE.AnimationMixer.prototype = {\r\n\r\n\tconstructor: THREE.AnimationMixer,\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tclipName = ( typeof clip === 'string' ) ? clip : clip.name,\r\n\t\t\tclipObject = ( clip !== clipName ) ? clip : null,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipName ],\r\n\t\t\tprototypeAction;\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tvar existingAction =\r\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t\tif ( clip !== clipName && clip !== clipObject ) {\r\n\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\"Different clips with the same name detected!\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tvar newAction = new THREE.\r\n\t\t\t\tAnimationMixer._Action( this, clipObject, optionalRoot );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipName, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tclipName = ( typeof clip === 'string' ) ? clip : clip.name,\r\n\t\t\tactionsForClip = this._actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function() {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tthis._nActiveActions = 0;\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tactions[ i ].reset();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].useCount = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tvar action = actions[ i ];\r\n\r\n\t\t\tif ( action.enabled ) {\r\n\r\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function( clip ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tclipName = clip.name,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tvar cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipName ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function( root ) {\r\n\r\n\t\tvar rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( var clipName in actionsByClip ) {\r\n\r\n\t\t\tvar actionByRoot = actionsByClip[ clipName ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( var trackName in bindingByName ) {\r\n\r\n\t\t\t\tvar binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.AnimationMixer.prototype );\r\n\r\nTHREE.AnimationMixer._Action =\r\n\t\tfunction( mixer, clip, localRoot ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\r\n\tvar tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tvar interpolantSettings = {\r\n\t\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants;\t// bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\r\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = THREE.LoopRepeat;\r\n\tthis._loopCount = -1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\r\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\r\n\r\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n};\r\n\r\nTHREE.AnimationMixer._Action.prototype = {\r\n\r\n\tconstructor: THREE.AnimationMixer._Action,\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function() {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function() {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0;\t\t\t// restart clip\r\n\t\tthis._loopCount = -1;\t// forget previous loops\r\n\t\tthis._startTime = null;\t// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function() {\r\n\r\n\t\tvar start = this._startTime;\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this )\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function() {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function() {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\r\n\r\n\t\tvar mixer = this._mixer;\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif( warp ) {\r\n\r\n\t\t\tvar fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function() {\r\n\r\n\t\tvar weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the weight stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function() {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function( duration ) {\r\n\r\n\t\treturn this.warp( this._currentTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._timeScaleInterpolant,\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function() {\r\n\r\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function() {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function() {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\r\n\t\t// called by the mixer\r\n\r\n\t\tvar startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tvar clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tvar weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tvar interpolants = this._interpolants;\r\n\t\t\tvar propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function( time ) {\r\n\r\n\t\tvar weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tvar interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function( time ) {\r\n\r\n\t\tvar timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tvar interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.pause = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function( deltaTime ) {\r\n\r\n\t\tvar time = this.time + deltaTime;\r\n\r\n\t\tif ( deltaTime === 0 ) return time;\r\n\r\n\t\tvar duration = this._clip.duration,\r\n\r\n\t\t\tloop = this.loop,\r\n\t\t\tloopCount = this._loopCount,\r\n\r\n\t\t\tpingPong = false;\r\n\r\n\t\tswitch ( loop ) {\r\n\r\n\t\t\tcase THREE.LoopOnce:\r\n\r\n\t\t\t\tif ( loopCount === -1 ) {\r\n\r\n\t\t\t\t\t// just started\r\n\r\n\t\t\t\t\tthis.loopCount = 0;\r\n\t\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else break;\r\n\r\n\t\t\t\t// reached the end\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.pause = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.LoopPingPong:\r\n\r\n\t\t\t\tpingPong = true;\r\n\r\n\t\t\tcase THREE.LoopRepeat:\r\n\r\n\t\t\t\tif ( loopCount === -1 ) {\r\n\r\n\t\t\t\t\t// just started\r\n\r\n\t\t\t\t\tif ( deltaTime > 0 ) {\r\n\r\n\t\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( time >= duration || time < 0 ) {\r\n\r\n\t\t\t\t\t// wrap around\r\n\r\n\t\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\t\tvar pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\t\tif ( pending < 0 ) {\r\n\r\n\t\t\t\t\t\t// stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t} else if ( pending === 0 ) {\r\n\r\n\t\t\t\t\t\t// transition to last round\r\n\r\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( loop === THREE.LoopPingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n\t\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\treturn duration - time;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tthis.time = time;\r\n\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function( atStart, atEnd, pingPong ) {\r\n\r\n\t\tvar settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart \t= THREE.ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd\t\t= THREE.ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Implementation details:\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, {\r\n\r\n\t_bindAction: function( action, prototypeAction ) {\r\n\r\n\t\tvar root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tvar track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name,\r\n\t\t\t\tbinding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new THREE.PropertyMixer(\r\n\t\t\t\t\t\tTHREE.PropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipName = action._clip.name,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipName ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipName, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function() {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \t\tknownActions: Array< _Action >\t- used as prototypes\r\n\t\t// \t\tactionByRoot: _Action\t\t\t- lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() { return scope._actions.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveActions; }\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() { return scope._bindings.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for _Action objects\r\n\r\n\t_isActiveAction: function( action ) {\r\n\r\n\t\tvar index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function( action, clipName, rootUuid ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipName ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function( action ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tvar clipName = action._clip.name,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipName ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function( action ) {\r\n\r\n\t\tvar bindings = action._propertyBindings;\r\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function( binding, rootUuid, trackName ) {\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tremove_empty_map: {\r\n\r\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function() {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\r\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new THREE.LinearInterpolant(\r\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function( interpolant ) {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\r\n\r\n} );\r\n\r\n\r\n// File:src/animation/AnimationObjectGroup.js\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n *\r\n * \t-\tInstead pass this object as 'root'.\r\n *\r\n * \t-\tYou can also add and remove objects later when the mixer\r\n * \t\tis running.\r\n *\r\n * Note:\r\n *\r\n *  \tObjects of this class appear as one object to the mixer,\r\n *  \tso cache control of the individual objects must be done\r\n *  \ton the group.\r\n *\r\n * Limitation:\r\n *\r\n * \t- \tThe animated properties must be compatible among the\r\n * \t\tall objects in the group.\r\n *\r\n *  -\tA single property can either be controlled through a\r\n *  \ttarget group or directly, but not both.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationObjectGroup = function( var_args ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0;\t\t\t// threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tvar indices = {};\r\n\tthis._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = [];\t\t\t\t\t// inside: string\r\n\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() { return scope._objects.length; },\r\n\t\t\tget inUse() { return this.total - scope.nCachedObjects_;  }\r\n\t\t},\r\n\r\n\t\tget bindingsPerObject() { return scope._bindings.length; }\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.AnimationObjectGroup.prototype = {\r\n\r\n\tconstructor: THREE.AnimationObjectGroup,\r\n\r\n\tadd: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push(\r\n\t\t\t\t\t\t\tnew THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tvar knownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject) {\r\n\r\n\t\t\t\tconsole.error( \"Different objects with the same UUID \" +\r\n\t\t\t\t\t\t\"detected. Clean the caches or recreate your \" +\r\n\t\t\t\t\t\t\"infrastructure when reloading scenes...\" );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tvar lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function( path, parsedPath ) {\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tvar paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( var i = nCachedObjects,\r\n\t\t\t\tn = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = objects[ i ];\r\n\r\n\t\t\tbindingsForPath[ i ] =\r\n\t\t\t\t\tnew THREE.PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function( path ) {\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationUtils.js\r\n\r\n/**\r\n * @author tschw\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function( array, from, to ) {\r\n\r\n\t\tif ( THREE.AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tvar n = times.length;\r\n\t\tvar result = new Array( n );\r\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function( values, stride, order ) {\r\n\r\n\t\tvar nValues = values.length;\r\n\t\tvar result = new values.constructor( nValues );\r\n\r\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tvar srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tvar i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tvar value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/KeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A timed sequence of keyframes for a specific property.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.KeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\r\n\r\n\tif( times === undefined || times.length === 0 ) {\r\n\r\n\t\tthrow new Error( \"no keyframes in track named \" + name );\r\n\r\n\t}\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = THREE.AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = THREE.AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n\tthis.validate();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.KeyframeTrack.prototype = {\r\n\r\n\tconstructor: THREE.KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function( result ) {\r\n\r\n\t\treturn new THREE.DiscreteInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.LinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function( result ) {\r\n\r\n\t\treturn new THREE.CubicInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function( interpolation ) {\r\n\r\n\t\tvar factoryMethod = undefined;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase THREE.InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tvar message = \"unsupported interpolation for \" +\r\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( message );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function() {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn THREE.InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn THREE.InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn THREE.InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function() {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function( timeOffset ) {\r\n\r\n\t\tif( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function( timeScale ) {\r\n\r\n\t\tif( timeScale !== 1.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function( startTime, endTime ) {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tnKeys = times.length,\r\n\t\t\tfrom = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\r\n\t\twhile ( to !== -1 && times[ to ] > endTime ) -- to;\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) to = Math.max( to , 1 ), from = to - 1;\r\n\r\n\t\t\tvar stride = this.getValueSize();\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = THREE.AnimationUtils.\r\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function() {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tvar valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( \"invalid value size in track\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( \"track is empty\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar prevTime = null;\r\n\r\n\t\tfor( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tvar currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( THREE.AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tvar value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function() {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\twriteIndex = 1;\r\n\r\n\t\tfor( var i = 1, n = times.length - 1; i <= n; ++ i ) {\r\n\r\n\t\t\tvar keep = false;\r\n\r\n\t\t\tvar time = times[ i ];\r\n\t\t\tvar timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\t\t\t\tvar offset = i * stride,\r\n\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\tvar value = values[ offset + j ];\r\n\r\n\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tvar readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = THREE.AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tif( json.type === undefined ) {\r\n\r\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar trackType = THREE.KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n\t\tif ( json.times === undefined ) {\r\n\r\n\t\t\tconsole.warn( \"legacy JSON format detected, converting\" );\r\n\r\n\t\t\tvar times = [], values = [];\r\n\r\n\t\t\tTHREE.AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\t\tjson.times = times;\r\n\t\t\tjson.values = values;\r\n\r\n\t\t}\r\n\r\n\t\t// derived classes can define a static parse method\r\n\t\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\t\treturn trackType.parse( json );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we asssume a constructor compatible with the base\r\n\t\t\treturn new trackType(\r\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function( track ) {\r\n\r\n\t\tvar trackType = track.constructor;\r\n\r\n\t\tvar json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': THREE.AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': THREE.AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\t_getTrackTypeForValueTypeName: function( typeName ) {\r\n\r\n\t\tswitch( typeName.toLowerCase() ) {\r\n\r\n\t\t\tcase \"scalar\":\r\n\t\t\tcase \"double\":\r\n\t\t\tcase \"float\":\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"integer\":\r\n\r\n\t\t\t\treturn THREE.NumberKeyframeTrack;\r\n\r\n\t\t\tcase \"vector\":\r\n\t\t\tcase \"vector2\":\r\n\t\t\tcase \"vector3\":\r\n\t\t\tcase \"vector4\":\r\n\r\n\t\t\t\treturn THREE.VectorKeyframeTrack;\r\n\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\treturn THREE.ColorKeyframeTrack;\r\n\r\n\t\t\tcase \"quaternion\":\r\n\r\n\t\t\t\treturn THREE.QuaternionKeyframeTrack;\r\n\r\n\t\t\tcase \"bool\":\r\n\t\t\tcase \"boolean\":\r\n\r\n\t\t\t\treturn THREE.BooleanKeyframeTrack;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\t\treturn THREE.StringKeyframeTrack;\r\n\r\n\t\t};\r\n\r\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/PropertyBinding.js\r\n\r\n/**\r\n *\r\n * A reference to a real property in the scene graph.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyBinding = function ( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = THREE.PropertyBinding.findNode(\r\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding,\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function() {\r\n\r\n\t\tvar targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = THREE.PropertyBinding.findNode(\r\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n \t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif( objectName ) {\r\n\r\n\t\t\tvar objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[i].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tvar nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( ! nodeProperty ) {\r\n\r\n\t\t\tvar nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\r\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tvar versioning = this.Versioning.None;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tvar bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[i].name === propertyIndex ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( nodeProperty.length !== undefined ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function() {},\r\n\t_setValue_unavailable: function() {},\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: THREE.PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: THREE.PropertyBinding.prototype.setValue,\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tvar source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t]\r\n\r\n} );\r\n\r\nTHREE.PropertyBinding.Composite =\r\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tvar parsedPath = optionalParsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.Composite.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding.Composite,\r\n\r\n\tgetValue: function( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function( array, offset ) {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.create = function( root, path, parsedPath ) {\r\n\r\n\tif ( ! ( root instanceof THREE.AnimationObjectGroup ) ) {\r\n\r\n\t\treturn new THREE.PropertyBinding( root, path, parsedPath );\r\n\r\n\t} else {\r\n\r\n\t\treturn new THREE.PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.parseTrackName = function( trackName ) {\r\n\r\n\t// matches strings in the form of:\r\n\t//    nodeName.property\r\n\t//    nodeName.property[accessor]\r\n\t//    nodeName.material.property[accessor]\r\n\t//    uuid.property[accessor]\r\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\r\n\t//    parentName/nodeName.property\r\n\t//    parentName/parentName/nodeName.property[index]\r\n\t//\t  .bone[Armature.DEF_cog].position\r\n\t// created and tested via https://regex101.com/#javascript\r\n\r\n\tvar re = /^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_.:\\- ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;\r\n\tvar matches = re.exec(trackName);\r\n\r\n\tif( ! matches ) {\r\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\r\n\t}\r\n\r\n    if (matches.index === re.lastIndex) {\r\n        re.lastIndex++;\r\n    }\r\n\r\n\tvar results = {\r\n\t\t// directoryName: matches[1], // (tschw) currently unused\r\n\t\tnodeName: matches[3], \t// allowed to be null, specified root node.\r\n\t\tobjectName: matches[5],\r\n\t\tobjectIndex: matches[7],\r\n\t\tpropertyName: matches[9],\r\n\t\tpropertyIndex: matches[11]\t// allowed to be null, specifies that the whole property is set.\r\n\t};\r\n\r\n\tif( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\r\n\t}\r\n\r\n\treturn results;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.findNode = function( root, nodeName ) {\r\n\r\n\tif( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\treturn root;\r\n\r\n\t}\r\n\r\n\t// search into skeleton bones.\r\n\tif( root.skeleton ) {\r\n\r\n\t\tvar searchSkeleton = function( skeleton ) {\r\n\r\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\r\n\r\n\t\t\t\tvar bone = skeleton.bones[i];\r\n\r\n\t\t\t\tif( bone.name === nodeName ) {\r\n\r\n\t\t\t\t\treturn bone;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar bone = searchSkeleton( root.skeleton );\r\n\r\n\t\tif( bone ) {\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// search into node subtree.\r\n\tif( root.children ) {\r\n\r\n\t\tvar searchNodeSubtree = function( children ) {\r\n\r\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tvar childNode = children[i];\r\n\r\n\t\t\t\tif( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\tif( result ) return result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\tif( subTreeNode ) {\r\n\r\n\t\t\treturn subTreeNode;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\n// File:src/animation/PropertyMixer.js\r\n\r\n/**\r\n *\r\n * Buffered scene graph property that allows weighted accumulation.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyMixer = function ( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tvar bufferType = Float64Array,\r\n\t\tmixFunction;\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\t\t\tmixFunction = this._slerp;\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\r\n\t\t\tbufferType = Array,\t\tmixFunction = this._select;\t\tbreak;\r\n\r\n\t\tdefault:\t\t\t\t\tmixFunction = this._lerp;\r\n\r\n\t}\r\n\r\n\tthis.buffer = new bufferType( valueSize * 4 );\r\n\t// layout: [ incoming | accu0 | accu1 | orig ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n};\r\n\r\nTHREE.PropertyMixer.prototype = {\r\n\r\n\tconstructor: THREE.PropertyMixer,\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tcurrentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tvar mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function( accuIndex ) {\r\n\r\n\t\tvar stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tvar originalValueOffset = stride * 3;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function() {\r\n\r\n\t\tvar binding = this.binding;\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * 3;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function() {\r\n\r\n\t\tvar originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tTHREE.Quaternion.slerpFlat( buffer, dstOffset,\r\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tvar s = 1 - t;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tvar j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/tracks/BooleanKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of Boolean keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.BooleanKeyframeTrack = function ( name, times, values ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values );\r\n\r\n};\r\n\r\nTHREE.BooleanKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.IntepolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/NumberKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of numeric keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.NumberKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.NumberKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/QuaternionKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of quaternion keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.QuaternionKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.QuaternionLinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/StringKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track that interpolates Strings\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.StringKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.StringKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.IntepolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/VectorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of vectored keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.VectorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.VectorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\r\nTHREE.Audio.prototype.getOutput = function () {\r\n\r\n\treturn this.gain;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar buffer = new THREE.AudioBuffer( this.context );\r\n\tbuffer.load( file );\r\n\r\n\tthis.setBuffer( buffer );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setNodeSource = function ( audioNode ) {\r\n\r\n\tthis.hasPlaybackControl = false;\r\n\tthis.sourceType = 'audioNode';\r\n\tthis.source = audioNode;\r\n\tthis.connect();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setBuffer = function ( audioBuffer ) {\r\n\r\n\tvar scope = this;\r\n\r\n\taudioBuffer.onReady( function( buffer ) {\r\n\r\n\t\tscope.source.buffer = buffer;\r\n\t\tscope.sourceType = 'buffer';\r\n\t\tif ( scope.autoplay ) scope.play();\r\n\r\n\t} );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.play = function () {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar source = this.context.createBufferSource();\r\n\r\n\tsource.buffer = this.source.buffer;\r\n\tsource.loop = this.source.loop;\r\n\tsource.onended = this.source.onended;\r\n\tsource.start( 0, this.startTime );\r\n\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.source = source;\r\n\r\n\tthis.connect();\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.pause = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = this.context.currentTime;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.stop = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = 0;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.connect = function () {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.source.connect( this.filter );\r\n\t\tthis.filter.connect( this.getOutput() );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.disconnect = function () {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.source.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.getOutput() );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( value === undefined ) value = null;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.disconnect();\r\n\t\tthis.filter = value;\r\n\t\tthis.connect();\r\n\r\n\t} else {\r\n\r\n\t\tthis.filter = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.playbackRate = value;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\r\n\treturn this.playbackRate;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.onEnded = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getLoop = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn this.source.loop;\r\n\r\n};\r\n\r\n\r\nTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\n// File:src/audio/AudioAnalyser.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioAnalyser = function ( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n};\r\n\r\nTHREE.AudioAnalyser.prototype = {\r\n\r\n\tconstructor: THREE.AudioAnalyser,\r\n\r\n\tgetData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\t\treturn this.data;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/audio/AudioBuffer.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioBuffer = function ( context ) {\r\n\r\n\tthis.context = context;\r\n\tthis.ready = false;\r\n\tthis.readyCallbacks = [];\r\n\r\n};\r\n\r\nTHREE.AudioBuffer.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.buffer = buffer;\r\n\t\t\tscope.ready = true;\r\n\r\n\t\t\tfor ( var i = 0; i < scope.readyCallbacks.length; i ++ ) {\r\n\r\n\t\t\t\tscope.readyCallbacks[ i ]( scope.buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.readyCallbacks = [];\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.AudioBuffer.prototype.onReady = function ( callback ) {\r\n\r\n\tif ( this.ready ) {\r\n\r\n\t\tcallback( this.buffer );\r\n\r\n\t} else {\r\n\r\n\t\tthis.readyCallbacks.push( callback );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/audio/PositionalAudio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PositionalAudio = function ( listener ) {\r\n\r\n\tTHREE.Audio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype = Object.create( THREE.Audio.prototype );\r\nTHREE.PositionalAudio.prototype.constructor = THREE.PositionalAudio;\r\n\r\nTHREE.PositionalAudio.prototype.getOutput = function () {\r\n\r\n\treturn this.panner;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getRefDistance = function () {\r\n\r\n\treturn this.panner.refDistance;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getRolloffFactor = function () {\r\n\r\n\treturn this.panner.rolloffFactor;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setDistanceModel = function ( value ) {\r\n\r\n\tthis.panner.distanceModel = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getDistanceModel = function () {\r\n\r\n\treturn this.panner.distanceModel;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setMaxDistance = function ( value ) {\r\n\r\n\tthis.panner.maxDistance = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getMaxDistance = function () {\r\n\r\n\treturn this.panner.maxDistance;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\r\nTHREE.AudioListener.prototype.getInput = function () {\r\n\r\n\treturn this.gain;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.removeFilter = function ( ) {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.gain.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.context.destination );\r\n\t\tthis.gain.connect( this.context.destination );\r\n\t\tthis.filter = null;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.gain.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t} else {\r\n\r\n\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t}\r\n\r\n\tthis.filter = value;\r\n\tthis.gain.connect( this.filter );\r\n\tthis.filter.connect( this.context.destination );\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.setMasterVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.getMasterVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\t\tvar up = this.up;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tvar options = { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter };\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\tthis.left = source.left;\r\n\tthis.right = source.right;\r\n\tthis.top = source.top;\r\n\tthis.bottom = source.bottom;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\r\n\tthis.zoom = source.zoom;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.left = this.left;\r\n\tdata.object.right = this.right;\r\n\tdata.object.top = this.top;\r\n\tdata.object.bottom = this.bottom;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.focalLength = 10;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (full-frame) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\tthis.focalLength = source.focalLength;\r\n\tthis.zoom = source.zoom;\r\n\r\n\tthis.fov = source.fov;\r\n\tthis.aspect = source.aspect;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.focalLength = this.focalLength;\r\n\tdata.object.zoom = this.zoom;\r\n\r\n\tdata.object.fov = this.fov;\r\n\tdata.object.aspect = this.aspect;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/StereoCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.StereoCamera = function () {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.cameraL = new THREE.PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new THREE.PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.StereoCamera.prototype = {\r\n\r\n\tconstructor: THREE.StereoCamera,\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar focalLength, fov, aspect, near, far;\r\n\r\n\t\tvar eyeRight = new THREE.Matrix4();\r\n\t\tvar eyeLeft = new THREE.Matrix4();\r\n\r\n\t\treturn function update ( camera ) {\r\n\r\n\t\t\tvar needsUpdate = focalLength !== camera.focalLength || fov !== camera.fov ||\r\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far;\r\n\r\n\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\tfocalLength = camera.focalLength;\r\n\t\t\t\tfov = camera.fov;\r\n\t\t\t\taspect = camera.aspect * this.aspect;\r\n\t\t\t\tnear = camera.near;\r\n\t\t\t\tfar = camera.far;\r\n\r\n\t\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\t\tvar eyeSep = 0.064 / 2;\r\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focalLength;\r\n\t\t\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\t\t\tvar xmin, xmax;\r\n\r\n\t\t\t\t// translate xOffset\r\n\r\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\r\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\r\n\r\n\t\t\t\t// for left eye\r\n\r\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t\t// for right eye\r\n\r\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color, intensity ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Light.prototype.constructor = THREE.Light;\r\n\r\nTHREE.Light.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.intensity = source.intensity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Light.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/LightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LightShadow = function ( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new THREE.Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.matrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.LightShadow.prototype = {\r\n\r\n\tconstructor: THREE.LightShadow,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\r\nTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\r\nTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.groundColor.copy( source.groundColor );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\r\nObject.defineProperty( THREE.PointLight.prototype, \"power\", {\r\n\r\n\tget: function () {\r\n\r\n\t\t// intensity = power per solid angle.\r\n\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t},\r\n\r\n\tset: function ( power ) {\r\n\r\n\t\t// intensity = power per solid angle.\r\n\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.PointLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.distance = source.distance;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\r\nObject.defineProperty( THREE.SpotLight.prototype, \"power\", {\r\n\r\n\tget: function () {\r\n\r\n\t\t// intensity = power per solid angle.\r\n\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\treturn this.intensity * Math.PI;\r\n\r\n\t},\r\n\r\n\tset: function ( power ) {\r\n\r\n\t\t// intensity = power per solid angle.\r\n\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\tthis.intensity = power / Math.PI;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.distance = source.distance;\r\n\tthis.angle = source.angle;\r\n\tthis.penumbra = source.penumbra;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar color, textureLoader, materialLoader;\r\n\r\n\t\treturn function ( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tif ( color === undefined ) color = new THREE.Color();\r\n\t\t\tif ( textureLoader === undefined ) textureLoader = new THREE.TextureLoader();\r\n\t\t\tif ( materialLoader === undefined ) materialLoader = new THREE.MaterialLoader();\r\n\r\n\t\t\t// convert from old material format\r\n\r\n\t\t\tvar textures = {};\r\n\r\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + path;\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( repeat !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.offset.fromArray( offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap !== undefined ) {\r\n\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uuid = THREE.Math.generateUUID();\r\n\r\n\t\t\t\ttextures[ uuid ] = texture;\r\n\r\n\t\t\t\treturn uuid;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar json = {\r\n\t\t\t\tuuid: THREE.Math.generateUUID(),\r\n\t\t\t\ttype: 'MeshLambertMaterial'\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var name in m ) {\r\n\r\n\t\t\t\tvar value = m[ name ];\r\n\r\n\t\t\t\tswitch ( name ) {\r\n\t\t\t\t\tcase 'DbgColor':\r\n\t\t\t\t\tcase 'DbgIndex':\r\n\t\t\t\t\tcase 'opticalDensity':\r\n\t\t\t\t\tcase 'illumination':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'DbgName':\r\n\t\t\t\t\t\tjson.name = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'blending':\r\n\t\t\t\t\t\tjson.blending = THREE[ value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorAmbient':\r\n\t\t\t\t\tcase 'mapAmbient':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorDiffuse':\r\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorSpecular':\r\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorEmissive':\r\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specularCoef':\r\n\t\t\t\t\t\tjson.shininess = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shading':\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuse':\r\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuseRepeat':\r\n\t\t\t\t\tcase 'mapDiffuseOffset':\r\n\t\t\t\t\tcase 'mapDiffuseWrap':\r\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLight':\r\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLightRepeat':\r\n\t\t\t\t\tcase 'mapLightOffset':\r\n\t\t\t\t\tcase 'mapLightWrap':\r\n\t\t\t\t\tcase 'mapLightAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAO':\r\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAORepeat':\r\n\t\t\t\t\tcase 'mapAOOffset':\r\n\t\t\t\t\tcase 'mapAOWrap':\r\n\t\t\t\t\tcase 'mapAOAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBump':\r\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpScale':\r\n\t\t\t\t\t\tjson.bumpScale = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpRepeat':\r\n\t\t\t\t\tcase 'mapBumpOffset':\r\n\t\t\t\t\tcase 'mapBumpWrap':\r\n\t\t\t\t\tcase 'mapBumpAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormal':\r\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalFactor':\r\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalRepeat':\r\n\t\t\t\t\tcase 'mapNormalOffset':\r\n\t\t\t\t\tcase 'mapNormalWrap':\r\n\t\t\t\t\tcase 'mapNormalAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecular':\r\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecularRepeat':\r\n\t\t\t\t\tcase 'mapSpecularOffset':\r\n\t\t\t\t\tcase 'mapSpecularWrap':\r\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlpha':\r\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlphaRepeat':\r\n\t\t\t\t\tcase 'mapAlphaOffset':\r\n\t\t\t\t\tcase 'mapAlphaWrap':\r\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'flipSided':\r\n\t\t\t\t\t\tjson.side = THREE.BackSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'doubleSided':\r\n\t\t\t\t\t\tjson.side = THREE.DoubleSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n\t\t\t\t\t\tjson.opacity = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'depthTest':\r\n\t\t\t\t\tcase 'depthWrite':\r\n\t\t\t\t\tcase 'colorWrite':\r\n\t\t\t\t\tcase 'opacity':\r\n\t\t\t\t\tcase 'reflectivity':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'visible':\r\n\t\t\t\t\tcase 'wireframe':\r\n\t\t\t\t\t\tjson[ name ] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vertexColors':\r\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = THREE.FaceColors;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\r\n\r\n\t\t\tmaterialLoader.setTextures( textures );\r\n\r\n\t\t\treturn materialLoader.parse( json );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tvar handlers = this.handlers;\r\n\r\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = handlers[ i ];\r\n\t\t\tvar loader  = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.overrideMimeType( 'text/plain' );\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tvar response = event.target.response;\r\n\r\n\t\t\tTHREE.Cache.add( url, response );\r\n\r\n\t\t\tif ( this.status === 200 ) {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else if ( this.status === 0 ) {\r\n\r\n\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\tconsole.warn( 'THREE.XHRLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/FontLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.FontLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.FontLoader.prototype = {\r\n\r\n\tconstructor: THREE.FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( new THREE.Font( JSON.parse( text.substring( 65, text.length - 2 ) ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tvar type = metadata.type;\r\n\r\n\t\t\t\tif ( type !== undefined ) {\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\t\tparseAnimations();\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\r\n\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimations() {\r\n\r\n\t\t\tvar outputAnimations = [];\r\n\r\n\t\t\t// parse old style Bone/Hierarchy animations\r\n\t\t\tvar animations = [];\r\n\r\n\t\t\tif ( json.animation !== undefined ) {\r\n\r\n\t\t\t\tanimations.push( json.animation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.animations !== undefined ) {\r\n\r\n\t\t\t\tif ( json.animations.length ) {\r\n\r\n\t\t\t\t\tanimations = animations.concat( json.animations );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tanimations.push( json.animations );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n\t\t\t\tvar clip = THREE.AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// parse implicit morph animations\r\n\t\t\tif ( geometry.morphTargets ) {\r\n\r\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n\t\t\t\tvar morphAnimationClips = THREE.AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n\t\t};\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tvar TYPED_ARRAYS = {\r\n\t\t\t'Int8Array': Int8Array,\r\n\t\t\t'Uint8Array': Uint8Array,\r\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\r\n\t\t\t'Int16Array': Int16Array,\r\n\t\t\t'Uint16Array': Uint16Array,\r\n\t\t\t'Int32Array': Int32Array,\r\n\t\t\t'Uint32Array': Uint32Array,\r\n\t\t\t'Float32Array': Float32Array,\r\n\t\t\t'Float64Array': Float64Array\r\n\t\t};\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tvar normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new THREE.Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = this.getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = this.getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = this.getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MultiMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.LatheGeometry(\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tvar animations = [];\r\n\r\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tvar clip = THREE.AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\r\n\t\t\t\t\tvar material = getMaterial( data.material );\r\n\r\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t};\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.Texture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CubeTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.CubeTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.CubeTexture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRoot = meta === undefined;\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== 0.5 ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== 0.5 ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.roughnessMap instanceof THREE.Texture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap instanceof THREE.Texture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap instanceof THREE.Texture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.side = source.side;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blending = source.blending;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.FaceColors / THREE.VertexColors\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshStandardMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshStandardMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 0.5;\r\n\tthis.metalness = 0.5;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshStandardMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial;\r\n\r\nTHREE.MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tvar materials = this.materials;\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar material = materials[ i ].toJSON( meta );\r\n\t\t\tdelete material.metadata;\r\n\r\n\t\t\toutput.materials.push( material );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.lights = source.lights;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = source.extensions;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = THREE.LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nObject.defineProperty( THREE.CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tfunction update() {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Group.prototype.constructor = THREE.Group;\r\n\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Points.prototype.constructor = THREE.Points;\r\n\r\nTHREE.Points.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Points.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Line.prototype.constructor = THREE.Line;\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar vStart = new THREE.Vector3();\r\n\t\tvar vEnd = new THREE.Vector3();\r\n\t\tvar interSegment = new THREE.Vector3();\r\n\t\tvar interRay = new THREE.Vector3();\r\n\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// DEPRECATED\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.drawMode = THREE.TrianglesDrawMode;\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\r\nTHREE.Mesh.prototype.setDrawMode = function ( value ) {\r\n\r\n\tthis.drawMode = value;\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\tvar tempA = new THREE.Vector3();\r\n\tvar tempB = new THREE.Vector3();\r\n\tvar tempC = new THREE.Vector3();\r\n\r\n\tvar uvA = new THREE.Vector2();\r\n\tvar uvB = new THREE.Vector2();\r\n\tvar uvC = new THREE.Vector2();\r\n\r\n\tvar barycoord = new THREE.Vector3();\r\n\r\n\tvar intersectionPoint = new THREE.Vector3();\r\n\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\treturn uv1.clone();\r\n\r\n\t}\r\n\r\n\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\t\tvar intersect;\r\n\t\tvar material = object.material;\r\n\r\n\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== THREE.DoubleSide, point );\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersect === null ) return null;\r\n\r\n\t\tintersectionPointWorld.copy( point );\r\n\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\t\treturn {\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\tobject: object\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction checkBufferGeometryIntersection( object, raycaster, ray, positions, uvs, a, b, c ) {\r\n\r\n\t\tvA.fromArray( positions, a * 3 );\r\n\t\tvB.fromArray( positions, b * 3 );\r\n\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\t\tif ( intersection ) {\r\n\r\n\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC,  uvA, uvB, uvC );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersection.face = new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) );\r\n\t\t\tintersection.faceIndex = a;\r\n\r\n\t\t}\r\n\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar material = this.material;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t}\r\n\r\n\t\tvar uvs, intersection;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar a, b, c;\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\tuvs = attributes.uv.array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar fvA, fvB, fvC;\r\n\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\r\n\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\tfvA = vertices[ face.a ];\r\n\t\t\t\tfvB = vertices[ face.b ];\r\n\t\t\t\tfvC = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( fvA );\r\n\t\t\t\t\tvB.add( fvB );\r\n\t\t\t\t\tvC.add( fvC );\r\n\r\n\t\t\t\t\tfvA = vA;\r\n\t\t\t\t\tfvB = vB;\r\n\t\t\t\t\tfvC = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\r\n\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\r\nTHREE.Bone.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.skin = source.skin;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\t\t\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\treturn function update() {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Skeleton.prototype.clone = function () {\r\n\r\n\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n};\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else if ( this.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tvar vec = new THREE.Vector4();\r\n\r\n\t\tvar skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n\t\t\tvec.x = skinWeight.getX( i );\r\n\t\t\tvec.y = skinWeight.getY( i );\r\n\t\t\tvec.z = skinWeight.getZ( i );\r\n\t\t\tvec.w = skinWeight.getW( i );\r\n\r\n\t\t\tvar scale = 1.0 / vec.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tvec.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function() {\r\n\r\n\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t},\r\n\t\tobjects: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\treturn this.levels;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn levels[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function update( camera ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\tvar levels = source.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.levels = [];\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tdata.object.levels.push( {\r\n\t\t\tobject: level.object.uuid,\r\n\t\t\tdistance: level.distance\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function Sprite( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\r\n\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.material ).copy( this );\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture,\t// THREE.Texture\r\n\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\tscale: 1, \t\t// scale\r\n\t\trotation: 0, \t\t// rotation\r\n\t\topacity: opacity,\t// opacity\r\n\t\tcolor: color,\t\t// color\r\n\t\tblending: blending\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.positionScreen.copy( source.positionScreen );\r\n\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source, recursive ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment' ] = \"#ifdef ALPHATEST\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment' ] = \"#ifdef USE_AOMAP\\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment' ] = \"#ifdef USE_AOMAP\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex' ] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex' ] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\r\n\r\nTHREE.ShaderChunk[ 'bsdfs' ] = \"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\t\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\t\t}\\n\t\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\treturn 1.0 / ( gl * gv );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat alpha = pow2( roughness );\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_GGX_Smith( alpha, dotNL, dotNV );\\n\tfloat D = D_GGX( alpha, dotNH );\\n\treturn F * ( G * D );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\tvec4 r = roughness * c0 + c1;\\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_BlinnPhong_Implicit( );\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment' ] = \"#ifdef USE_BUMPMAP\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\tvec2 dHdxy_fwd() {\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\t\treturn vec2( dBx, dBy );\\n\t}\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment' ] = \"#ifdef USE_COLOR\\n\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex' ] = \"#ifdef USE_COLOR\\n\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common' ] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nstruct IncidentLight {\\n\tvec3 color;\\n\tvec3 direction;\\n\tbool visible;\\n};\\nstruct ReflectedLight {\\n\tvec3 directDiffuse;\\n\tvec3 directSpecular;\\n\tvec3 indirectDiffuse;\\n\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\tvec3 position;\\n\tvec3 normal;\\n\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_uv_reflection_fragment' ] = \"#ifdef ENVMAP_TYPE_CUBE_UV\\nconst float cubeUV_textureSize = 1024.0;\\nint getFaceFromDirection(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    int face = -1;\\n    if( absDirection.x > absDirection.z ) {\\n        if(absDirection.x > absDirection.y )\\n            face = direction.x > 0.0 ? 0 : 3;\\n        else\\n            face = direction.y > 0.0 ? 1 : 4;\\n    }\\n    else {\\n        if(absDirection.z > absDirection.y )\\n            face = direction.z > 0.0 ? 2 : 5;\\n        else\\n            face = direction.y > 0.0 ? 1 : 4;\\n    }\\n    return face;\\n}\\nconst float cubeUV_maxLods1 = log2(cubeUV_textureSize*0.25) - 1.0;\\nconst float cubeUV_rangeClamp = exp2((6.0 - 1.0) * 2.0);\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n    float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n    float dxRoughness = dFdx(roughness);\\n    float dyRoughness = dFdy(roughness);\\n    vec3 dx = dFdx( vec * scale * dxRoughness );\\n    vec3 dy = dFdy( vec * scale * dyRoughness );\\n    float d = max( dot( dx, dx ), dot( dy, dy ) );\\n    d = clamp(d, 1.0, cubeUV_rangeClamp);\\n    float mipLevel = 0.5 * log2(d);\\n    return vec2(floor(mipLevel), fract(mipLevel));\\n}\\nconst float cubeUV_maxLods2 = log2(cubeUV_textureSize*0.25) - 2.0;\\nconst float cubeUV_rcpTextureSize = 1.0 / cubeUV_textureSize;\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n    mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n    float a = 16.0 * cubeUV_rcpTextureSize;\\n    vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n    vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n    float powScale = exp2_packed.x * exp2_packed.y;\\n    float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n    float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n    bool bRes = mipLevel == 0.0;\\n    scale =  bRes && (scale < a) ? a : scale;\\n    vec3 r;\\n    vec2 offset;\\n    int face = getFaceFromDirection(direction);\\n    float rcpPowScale = 1.0 / powScale;\\n    if( face == 0) {\\n        r = vec3(direction.x, -direction.z, direction.y);\\n        offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n    }\\n    else if( face == 1) {\\n        r = vec3(direction.y, direction.x, direction.z);\\n        offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n    }\\n    else if( face == 2) {\\n        r = vec3(direction.z, direction.x, direction.y);\\n        offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n    }\\n    else if( face == 3) {\\n        r = vec3(direction.x, direction.z, direction.y);\\n        offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n    }\\n    else if( face == 4) {\\n        r = vec3(direction.y, direction.x, -direction.z);\\n        offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n    }\\n    else {\\n        r = vec3(direction.z, -direction.x, direction.y);\\n        offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n    }\\n    r = normalize(r);\\n    float texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n    vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n    vec2 base = offset + vec2( texelOffset );\\n    return base + s * ( scale - 2.0 * texelOffset );\\n}\\nconst float cubeUV_maxLods3 = log2(cubeUV_textureSize*0.25) - 3.0;\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n    float roughnessVal = roughness* cubeUV_maxLods3;\\n    float r1 = floor(roughnessVal);\\n    float r2 = r1 + 1.0;\\n    float t = fract(roughnessVal);\\n    vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n    float s = mipInfo.y;\\n    float level0 = mipInfo.x;\\n    float level1 = level0 + 1.0;\\n    level1 = level1 > 5.0 ? 5.0 : level1;\\n    level0 += min( floor( s + 0.5 ), 5.0 );\\n    vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n    vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n    vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n    vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n    vec4 result = mix(color10, color20, t);\\n    return vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex' ] = \"#ifdef FLIP_SIDED\\n\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_pars_fragment' ] = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n  return value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n  float maxComponent = max( max( value.r, value.g ), value.b );\\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n  float maxRGB = max( value.x, max( value.g, value.b ) );\\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n  M            = ceil( M * 255.0 ) / 255.0;\\n  return vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n    float maxRGB = max( value.x, max( value.g, value.b ) );\\n    float D      = max( maxRange / maxRGB, 1.0 );\\n    D            = min( floor( D ) / 255.0, 1.0 );\\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n  vec4 vResult;\\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n  vResult.w = fract(Le);\\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n  return vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n  float Le = value.z * 255.0 + value.w;\\n  vec3 Xp_Y_XYZp;\\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n  return vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_fragment' ] = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#else\\n\t\tvec3 reflectVec = vReflect;\\n\t#endif\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\tenvColor = envMapTexelToLinear( envColor );\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment' ] = \"#if defined( USE_ENVMAP ) || defined( STANDARD )\\n\tuniform float reflectivity;\\n\tuniform float envMapIntenstiy;\\n#endif\\n#ifdef USE_ENVMAP\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\\n\t\tuniform float refractionRatio;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex' ] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\\n\tvarying vec3 vReflect;\\n\tuniform float refractionRatio;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex' ] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\t#else\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment' ] = \"#ifdef USE_FOG\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\t#ifdef FOG_EXP2\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\t#else\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\t#endif\\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment' ] = \"#ifdef USE_FOG\\n\tuniform vec3 fogColor;\\n\t#ifdef FOG_EXP2\\n\t\tuniform float fogDensity;\\n\t#else\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex' ] = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tdirectLight = getPointDirectLightIrradiance( pointLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tdirectLight = getSpotDirectLightIrradiance( spotLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectLight = getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_pars' ] = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\tvec3 irradiance = ambientLightColor;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\tstruct DirectionalLight {\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\tIncidentLight getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tdirectLight.color = directionalLight.color;\\n\t\tdirectLight.direction = directionalLight.direction;\\n\t\tdirectLight.visible = true;\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\tstruct PointLight {\\n\t\tvec3 position;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\tIncidentLight getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tvec3 lVector = pointLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\\n\t\t\tdirectLight.color = pointLight.color;\\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tstruct SpotLight {\\n\t\tvec3 position;\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tfloat coneCos;\\n\t\tfloat penumbraCos;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\tIncidentLight getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tvec3 lVector = spotLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\t\t\tdirectLight.color = spotLight.color;\\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tstruct HemisphereLight {\\n\t\tvec3 direction;\\n\t\tvec3 skyColor;\\n\t\tvec3 groundColor;\\n\t};\\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tirradiance *= PI;\\n\t\t#endif\\n\t\treturn irradiance;\\n\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#endif\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\t\t#else\\n\t\t\tvec4 envMapColor = vec4( 0.0 );\\n\t\t#endif\\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\\n\t}\\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\t}\\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\t\t#endif\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\t\tvec2 sampleUV;\\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#endif\\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\treturn envMapColor.rgb * envMapIntensity;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment' ] = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment' ] = \"#ifdef USE_ENVMAP\\n\tvarying vec3 vWorldPosition;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\tvec3\tdiffuseColor;\\n\tvec3\tspecularColor;\\n\tfloat\tspecularShininess;\\n\tfloat\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\t(0)\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex' ] = \"#ifdef USE_ENVMAP\\n\tvarying vec3 vWorldPosition;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex' ] = \"#ifdef USE_ENVMAP\\n\tvWorldPosition = worldPosition.xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_standard_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_standard_fragment' ] = \"StandardMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_standard_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_standard_pars_fragment' ] = \"struct StandardMaterial {\\n\tvec3\tdiffuseColor;\\n\tfloat\tspecularRoughness;\\n\tvec3\tspecularColor;\\n};\\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n}\\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_Standard\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Standard\\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Standard\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_template' ] = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tdirectLight = getPointDirectLightIrradiance( pointLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tdirectLight = getSpotDirectLightIrradiance( spotLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tdirectLight = getDirectionalDirectLightIrradiance( directionalLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\t#ifdef USE_LIGHTMAP\\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tlightMapIrradiance *= PI;\\n\t\t#endif\\n\t\tirradiance += lightMapIrradiance;\\n\t#endif\\n\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t}\\n\t#endif\\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\t#endif\\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment' ] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tuniform float logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\t#else\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 texelColor = texture2D( map, vUv );\\n\ttexelColor = mapTexelToLinear( texelColor );\\n\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_fragment' ] = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_pars_fragment' ] = \"#ifdef USE_METALNESSMAP\\n\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex' ] = \"#ifdef USE_MORPHNORMALS\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\t#ifndef USE_MORPHNORMALS\\n\tuniform float morphTargetInfluences[ 8 ];\\n\t#else\\n\tuniform float morphTargetInfluences[ 4 ];\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\t#ifndef USE_MORPHNORMALS\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_fragment' ] = \"#ifdef FLAT_SHADED\\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\tvec3 normal = normalize( vNormal );\\n\t#ifdef DOUBLE_SIDED\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment' ] = \"#ifdef USE_NORMALMAP\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'premultiplied_alpha_fragment' ] = \"#ifdef PREMULTIPLIED_ALPHA\\n\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_fragment' ] = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_pars_fragment' ] = \"#ifdef USE_ROUGHNESSMAP\\n\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\treturn dot( rgba_depth, bit_shift );\\n\t}\\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\t\treturn step( compare, unpackDepth( texture2D( depths, uv ) ) );\\n\t}\\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\t\tvec2 f = fract( uv * size + 0.5 );\\n\t\tfloat a = mix( lb, lt, f.y );\\n\t\tfloat b = mix( rb, rt, f.y );\\n\t\tfloat c = mix( a, b, f.x );\\n\t\treturn c;\\n\t}\\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tshadowCoord.xyz /= shadowCoord.w;\\n\t\tshadowCoord.z += shadowBias;\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\t\tbool frustumTest = all( frustumTestVec );\\n\t\tif ( frustumTest ) {\\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\t\t#endif\\n\t\t}\\n\t\treturn 1.0;\\n\t}\\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\t\tvec3 absV = abs( v );\\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\t\tabsV *= scaleToCube;\\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\t\tvec2 planar = v.xy;\\n\t\tfloat almostATexel = 1.5 * texelSizeY;\\n\t\tfloat almostOne = 1.0 - almostATexel;\\n\t\tif ( absV.z >= almostOne ) {\\n\t\t\tif ( v.z > 0.0 )\\n\t\t\t\tplanar.x = 4.0 - v.x;\\n\t\t} else if ( absV.x >= almostOne ) {\\n\t\t\tfloat signX = sign( v.x );\\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\\n\t\t} else if ( absV.y >= almostOne ) {\\n\t\t\tfloat signY = sign( v.y );\\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\t\t\tplanar.y = v.z * signY - 2.0;\\n\t\t}\\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\t}\\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\t\tvec3 lightToPosition = shadowCoord.xyz;\\n\t\tvec3 bd3D = normalize( lightToPosition );\\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmask_pars_fragment' ] = \"float getShadowMask() {\\n\tfloat shadow = 1.0;\\n\t#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#endif\\n\treturn shadow;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex' ] = \"#ifdef USE_SKINNING\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\t#ifdef BONE_TEXTURE\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\t\t\ty = dy * ( y + 0.5 );\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\t\t\treturn bone;\\n\t\t}\\n\t#else\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\t\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment' ] = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n#else\\n\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment' ] = \"#ifdef USE_SPECULARMAP\\n\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_fragment' ] = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_pars_fragment' ] = \"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n  return toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  color = max( vec3( 0.0 ), color - 0.004 );\\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvUv2 = uv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex' ] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\t#ifdef USE_SKINNING\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\t#else\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\": { type: \"t\", value: null },\r\n\t\t\"alphaMap\": { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\": { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\": { type: \"f\", value: - 1 },\r\n\t\t\"reflectivity\": { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\": { type: \"f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\": { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\": { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\": { type: \"t\", value: null },\r\n\t\t\"bumpScale\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\": { type: \"t\", value: null },\r\n\t\t\"normalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\": { type: \"t\", value: null },\r\n\t\t\"displacementScale\": { type: \"f\", value: 1 },\r\n\t\t\"displacementBias\": { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\t\"roughnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\t\"metalnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\t\"fogDensity\": { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\": { type: \"f\", value: 1 },\r\n\t\t\"fogFar\": { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\": { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\": { type: \"fv\", value: [] },\r\n\r\n\t\t\"directionalLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"color\": { type: \"c\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"directionalShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"directionalShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"spotLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"distance\": { type: \"f\" },\r\n\t\t\t\"coneCos\": { type: \"f\" },\r\n\t\t\t\"penumbraCos\": { type: \"f\" },\r\n\t\t\t\"decay\": { type: \"f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"spotShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"spotShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"pointLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"decay\": { type: \"f\" },\r\n\t\t\t\"distance\": { type: \"f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"pointShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"pointShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"hemisphereLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"skyColor\": { type: \"c\" },\r\n\t\t\t\"groundColor\": { type: \"c\" }\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"f\", value: 1.0 },\r\n\t\t\"size\": { type: \"f\", value: 1.0 },\r\n\t\t\"scale\": { type: \"f\", value: 1.0 },\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_frag' ] = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_frag' ] = \"uniform float mNear;\\nuniform float mFar;\\nuniform float opacity;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\t#include <logdepthbuf_fragment>\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\\n\tgl_FragColor = vec4( vec3( color ), opacity );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_vert' ] = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depthRGBA_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'depthRGBA_frag' ] = \"#include <common>\\n#include <logdepthbuf_pars_fragment>\\nvec4 pack_depth( const in float depth ) {\\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\\n\tres -= res.xxyz * bit_mask;\\n\treturn res;\\n}\\nvoid main() {\\n\t#include <logdepthbuf_fragment>\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\\n\t#else\\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\\n\t#endif\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depthRGBA_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'depthRGBA_vert' ] = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_frag' ] = \"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\nvec4 pack1K ( float depth ) {\\n\tdepth /= 1000.0;\\n\tconst vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\\n\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\\n\tvec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\\n\tres -= res.xxyz * bitMsk;\\n\treturn res;\\n}\\nfloat unpack1K ( vec4 color ) {\\n\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\treturn dot( color, bitSh ) * 1000.0;\\n}\\nvoid main () {\\n\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_vert' ] = \"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\nvoid main() {\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\tvWorldPosition = worldPosition;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_frag' ] = \"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec3 direction = normalize( vWorldPosition );\\n\tvec2 sampleUV;\\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\t\tdiscard;\\n\t}\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <color_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_vert' ] = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\tvLineDistance = scale * lineDistance;\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\tgl_Position = projectionMatrix * mvPosition;\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\tReflectedLight reflectedLight;\\n\treflectedLight.directDiffuse = vec3( 0.0 );\\n\treflectedLight.directSpecular = vec3( 0.0 );\\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\\n\treflectedLight.indirectSpecular = vec3( 0.0 );\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_vert' ] = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <skinbase_vertex>\\n\t#ifdef USE_ENVMAP\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#endif\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_frag' ] = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <emissivemap_fragment>\\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\t#include <lightmap_fragment>\\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\t#ifdef DOUBLE_SIDED\\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\t#else\\n\t\treflectedLight.directDiffuse = vLightFront;\\n\t#endif\\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_vert' ] = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <lights_lambert_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_frag' ] = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_phong_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_vert' ] = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <lights_phong_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <lights_phong_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshstandard_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshstandard_frag' ] = \"#define STANDARD\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\nuniform float envMapIntensity;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_standard_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <roughnessmap_fragment>\\n\t#include <metalnessmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_standard_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshstandard_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshstandard_vert' ] = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_frag' ] = \"uniform float opacity;\\nvarying vec3 vNormal;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_vert' ] = \"varying vec3 vNormal;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\tvNormal = normalize( normalMatrix * normal );\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_particle_fragment>\\n\t#include <color_fragment>\\n\t#include <alphatest_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_vert' ] = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#ifdef USE_SIZEATTENUATION\\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\t#else\\n\t\tgl_PointSize = size;\\n\t#endif\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['meshbasic_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['meshbasic_frag']\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['meshlambert_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['meshlambert_frag']\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['meshphong_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['meshphong_frag']\r\n\r\n\t},\r\n\r\n\t'standard': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"roughnessmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"metalnessmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"roughness\": { type: \"f\", value: 0.5 },\r\n\t\t\t\t\"metalness\": { type: \"f\", value: 0 },\r\n\t\t\t\t\"envMapIntensity\" : { type: \"f\", value: 1 } // temporary\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['meshstandard_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['meshstandard_frag']\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['points_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['points_frag']\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['linedashed_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['linedashed_frag']\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['depth_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['depth_frag']\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['normal_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['normal_frag']\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tCube\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['cube_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['cube_frag']\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['equirect_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['equirect_frag']\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['depthRGBA_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['depthRGBA_frag']\r\n\r\n\t},\r\n\r\n\r\n\t'distanceRGBA': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"lightPos\": { type: \"v3\", value: new THREE.Vector3( 0, 0, 0 ) }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk['distanceRGBA_vert'],\r\n\t\tfragmentShader: THREE.ShaderChunk['distanceRGBA_frag']\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = - 1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = - 1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = THREE.LinearToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\tthis.toneMappingWhitePoint = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentRenderTarget = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_currentScissor = new THREE.Vector4(),\r\n\t_currentScissorTest = null,\r\n\r\n\t_currentViewport = new THREE.Vector4(),\r\n\r\n\t//\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t//\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\t_pixelRatio = 1,\r\n\r\n\t_scissor = new THREE.Vector4( 0, 0, _width, _height ),\r\n\t_scissorTest = false,\r\n\r\n\t_viewport = new THREE.Vector4( 0, 0, _width, _height ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t// camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_lights = {\r\n\r\n\t\thash: '',\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\tpoint: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: [],\r\n\r\n\t\tshadows: [],\r\n\t\tshadowsPointLight: 0\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\tvar lightCache = new THREE.WebGLLights();\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\tstate.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.properties = properties;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, _lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * _pixelRatio;\r\n\t\t_canvas.height = height * _pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t}\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget || textureProperties.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget.texture );\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.type !== 'MeshStandardMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( absNumericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uniforms = program.getUniforms();\r\n\r\n\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar dataStart = 0;\r\n\t\tvar dataCount = Infinity;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdataCount = index.count;\r\n\r\n\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\tdataCount = position.count;\r\n\r\n\t\t}\r\n\r\n\t\tvar rangeStart = geometry.drawRange.start;\r\n\t\tvar rangeCount = geometry.drawRange.count;\r\n\r\n\t\tvar groupStart = group !== null ? group.start : 0;\r\n\t\tvar groupCount = group !== null ? group.count : Infinity;\r\n\r\n\t\tvar drawStart = Math.max( dataStart, rangeStart, groupStart );\r\n\t\tvar drawEnd = Math.min( dataStart + dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\t//\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( object.drawMode ) {\r\n\r\n\t\t\t\t\tcase THREE.TrianglesDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleStripDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleFanDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction absNumericalSort( a, b ) {\r\n\r\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = - 1;\r\n\t\ttransparentObjectsLastIndex = - 1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene, camera );\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\tsetupLights( lights, camera );\r\n\r\n\t\t//\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\trenderTarget = null;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\t\trenderObjects( opaqueObjects, camera, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.NearestFilter &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) ) {\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tsetMaterial( material );\r\n\r\n\t\t\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, fog, geometry, material, object, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters( material, _lights, fog, object );\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.uniformsList = [];\r\n\r\n\t\tvar uniforms = materialProperties.__webglShader.uniforms,\r\n\t\t\tuniformLocations = materialProperties.program.getUniforms();\r\n\r\n\t\tfor ( var u in uniforms ) {\r\n\r\n\t\t\tvar location = uniformLocations[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\r\n\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\tmaterial instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\tmaterial instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\tmaterial.lights ) {\r\n\r\n\t\t\t// store the light setup it was created for\r\n\r\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\r\n\t\t\tuniforms.directionalLights.value = _lights.directional;\r\n\t\t\tuniforms.spotLights.value = _lights.spot;\r\n\t\t\tuniforms.pointLights.value = _lights.point;\r\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\r\n\r\n\t\t}\r\n\r\n\t\t// detect dynamic uniforms\r\n\r\n\t\tmaterialProperties.hasDynamicUniforms = false;\r\n\r\n\t\tfor ( var j = 0, jl = materialProperties.uniformsList.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = materialProperties.uniformsList[ j ][ 0 ];\r\n\r\n\t\t\tif ( uniform.dynamic === true ) {\r\n\r\n\t\t\t\tmaterialProperties.hasDynamicUniforms = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tsetMaterialFaces( material );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setMaterialFaces( material ) {\r\n\r\n\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.lightsHash !== undefined &&\r\n\t\t\tmaterialProperties.lightsHash !== _lights.hash ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tinitMaterial( material, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( p_uniforms.toneMappingExposure !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.toneMappingExposure, _this.toneMappingExposure );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p_uniforms.toneMappingWhitePoint !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.toneMappingWhitePoint, _this.toneMappingWhitePoint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.hasDynamicUniforms === true ) {\r\n\r\n\t\t\tupdateDynamicUniforms( materialProperties.uniformsList, object, camera );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction updateDynamicUniforms ( uniforms, object, camera ) {\r\n\r\n\t\tvar dynamicUniforms = [];\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\t\t\tvar onUpdateCallback = uniform.onUpdateCallback;\r\n\r\n\t\t\tif ( onUpdateCallback !== undefined ) {\r\n\r\n\t\t\t\tonUpdateCallback.bind( uniform )( object, camera );\r\n\t\t\t\tdynamicUniforms.push( uniforms[ j ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsGeneric( dynamicUniforms );\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * _pixelRatio;\r\n\t\tuniforms.scale.value = _canvas.clientHeight / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard ( uniforms, material ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniform( uniform, type, location, value ) {\r\n\r\n\t\tvar texture, textureUnit;\r\n\r\n\t\tif ( type === '1i' ) {\r\n\r\n\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t} else if ( type === '1f' ) {\r\n\r\n\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t} else if ( type === '2f' ) {\r\n\r\n\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\r\n\t\t} else if ( type === '3f' ) {\r\n\r\n\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\r\n\t\t} else if ( type === '4f' ) {\r\n\r\n\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\r\n\t\t} else if ( type === '1iv' ) {\r\n\r\n\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t} else if ( type === '3iv' ) {\r\n\r\n\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t} else if ( type === '1fv' ) {\r\n\r\n\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t} else if ( type === '2fv' ) {\r\n\r\n\t\t\t_gl.uniform2fv( location, value );\r\n\r\n\t\t} else if ( type === '3fv' ) {\r\n\r\n\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t} else if ( type === '4fv' ) {\r\n\r\n\t\t\t_gl.uniform4fv( location, value );\r\n\r\n\t\t} else if ( type === 'Matrix2fv' ) {\r\n\r\n\t\t\t_gl.uniformMatrix2fv( location, false, value );\r\n\r\n\t\t} else if ( type === 'Matrix3fv' ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\r\n\t\t} else if ( type === 'Matrix4fv' ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\r\n\t\t//\r\n\r\n\t\t} else if ( type === 'i' ) {\r\n\r\n\t\t\t// single integer\r\n\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t} else if ( type === 'f' ) {\r\n\r\n\t\t\t// single float\r\n\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t} else if ( type === 'v2' ) {\r\n\r\n\t\t\t// single THREE.Vector2\r\n\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t} else if ( type === 'v3' ) {\r\n\r\n\t\t\t// single THREE.Vector3\r\n\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t} else if ( type === 'v4' ) {\r\n\r\n\t\t\t// single THREE.Vector4\r\n\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t} else if ( type === 'c' ) {\r\n\r\n\t\t\t// single THREE.Color\r\n\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t} else if ( type === 's' ) {\r\n\r\n\t\t\t// TODO: Optimize this\r\n\r\n\t\t\tvar properties = uniform.properties;\r\n\r\n\t\t\tfor ( var name in properties ) {\r\n\r\n\t\t\t\tvar property = properties[ name ];\r\n\t\t\t\tvar locationProperty = location[ name ];\r\n\t\t\t\tvar valueProperty = value[ name ];\r\n\r\n\t\t\t\tloadUniform( property, property.type, locationProperty, valueProperty );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( type === 'sa' ) {\r\n\r\n\t\t\t// TODO: Optimize this\r\n\r\n\t\t\tvar properties = uniform.properties;\r\n\r\n\t\t\tfor ( var i = 0, l = value.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var name in properties ) {\r\n\r\n\t\t\t\t\tvar property = properties[ name ];\r\n\t\t\t\t\tvar locationProperty =  location[ i ][ name ];\r\n\t\t\t\t\tvar valueProperty = value[ i ][ name ];\r\n\r\n\t\t\t\t\tloadUniform( property, property.type, locationProperty, valueProperty );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( type === 'iv1' ) {\r\n\r\n\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t} else if ( type === 'iv' ) {\r\n\r\n\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t} else if ( type === 'fv1' ) {\r\n\r\n\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t} else if ( type === 'fv' ) {\r\n\r\n\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t} else if ( type === 'v2v' ) {\r\n\r\n\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\r\n\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t} else if ( type === 'v3v' ) {\r\n\r\n\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\r\n\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t} else if ( type === 'v4v' ) {\r\n\r\n\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\r\n\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t} else if ( type === 'm2' ) {\r\n\r\n\t\t\t// single THREE.Matrix2\r\n\t\t\t_gl.uniformMatrix2fv( location, false, value.elements );\r\n\r\n\t\t} else if ( type === 'm3' ) {\r\n\r\n\t\t\t// single THREE.Matrix3\r\n\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t} else if ( type === 'm3v' ) {\r\n\r\n\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t} else if ( type === 'm4' ) {\r\n\r\n\t\t\t// single THREE.Matrix4\r\n\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t} else if ( type === 'm4v' ) {\r\n\r\n\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t} else if ( type === 't' ) {\r\n\r\n\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\ttexture = value;\r\n\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\tif ( ! texture ) return;\r\n\r\n\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\tsetCubeTextureDynamic( texture.texture, textureUnit );\r\n\r\n\t\t\t} else if ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\t_this.setTexture( texture.texture, textureUnit );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( type === 'tv' ) {\r\n\r\n\t\t\t// array of THREE.Texture (2d or cube)\r\n\r\n\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t ( texture.image instanceof Array && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t_this.setTexture( texture.texture, textureUnit );\r\n\r\n\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\tsetCubeTextureDynamic( texture.texture, textureUnit );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric( uniforms ) {\r\n\r\n\t\tfor ( var i = 0, l = uniforms.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ i ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar location = uniforms[ i ][ 1 ];\r\n\t\t\tvar value = uniform.value;\r\n\r\n\t\t\tloadUniform( uniform, type, location, value );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirectionalLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tshadowsLength = 0;\r\n\r\n\t\t_lights.shadowsPointLight = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = light.shadow.map;\r\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = light.shadow.map;\r\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = light.shadow.map;\r\n\r\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\r\n\r\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new THREE.Matrix4();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\r\n\t\t\t\t// equal to inverse of the light's position\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\r\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\r\n\r\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.ambient[ 0 ] = r;\r\n\t\t_lights.ambient[ 1 ] = g;\r\n\t\t_lights.ambient[ 2 ] = b;\r\n\r\n\t\t_lights.directional.length = directionalLength;\r\n\t\t_lights.spot.length = spotLength;\r\n\t\t_lights.point.length = pointLength;\r\n\t\t_lights.hemi.length = hemiLength;\r\n\r\n\t\t_lights.shadows.length = shadowsLength;\r\n\r\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + hemiLength + ',' + shadowsLength;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isPowerOfTwoImage ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n\t\t\timage = makePowerOfTwo( image );\r\n\r\n\t\t}\r\n\r\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) return true;\r\n\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) return true;\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction makePowerOfTwo( image ) {\r\n\r\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\r\n\t\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture ( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\r\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\r\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// FIXME: We don't support !depth !stencil\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t_infoMemory.textures ++;\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height );\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.getCurrentRenderTarget = function() {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tsetupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar framebuffer;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTarget === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat\r\n\t\t\t\t\t&& paramThreeToGL( texture.format ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.type !== THREE.UnsignedByteType\r\n\t\t\t\t\t&& paramThreeToGL( texture.type ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE )\r\n\t\t\t\t\t&& ! ( texture.type === THREE.FloatType && extensions.get( 'WEBGL_color_buffer_float' ) )\r\n\t\t\t\t\t&& ! ( texture.type === THREE.HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( texture.format ), paramThreeToGL( texture.type ), buffer );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tvar target = renderTarget instanceof THREE.WebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n\t\tvar texture = properties.get( renderTarget.texture ).__webglTexture;\r\n\r\n\t\tstate.bindTexture( target, texture );\r\n\t\t_gl.generateMipmap( target );\r\n\t\tstate.bindTexture( target, null );\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_ETC1_Format ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author Marius Kintel / https://github.com/kintel\r\n */\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new THREE.Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new THREE.Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tif ( options.minFilter === undefined ) options.minFilter = THREE.LinearFilter;\r\n\r\n\tthis.texture = new THREE.Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy );\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\tthis.activeMipMapLevel = 0;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tcount = position.data.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcount = position.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry, start, count ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_etc1':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tdeleteAttribute( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\t// TODO\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( property.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( geometry );\r\n\r\n\t\tvar bufferproperty = properties.get( buffergeometry );\r\n\r\n\t\tif ( bufferproperty.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( buffergeometry );\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLLights.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLLights = function () {\r\n\r\n\tvar lights = {};\r\n\r\n\tthis.get = function ( light ) {\r\n\r\n\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\treturn lights[ light.id ];\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms;\r\n\r\n\t\tswitch ( light.type ) {\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tskyColor: new THREE.Color(),\r\n\t\t\t\t\tgroundColor: new THREE.Color()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\t// TODO: Combine the regex\r\n\tvar structRe = /^([\\w\\d_]+)\\.([\\w\\d_]+)$/;\r\n\tvar arrayStructRe = /^([\\w\\d_]+)\\[(\\d+)\\]\\.([\\w\\d_]+)$/;\r\n\tvar arrayRe = /^([\\w\\d_]+)\\[0\\]$/;\r\n\r\n\tfunction getEncodingComponents( encoding ) {\r\n\r\n\t\tswitch ( encoding ) {\r\n\r\n\t\t\tcase THREE.LinearEncoding:\r\n\t\t\t\treturn [ 'Linear','( value )' ];\r\n\t\t\tcase THREE.sRGBEncoding:\r\n\t\t\t\treturn [ 'sRGB','( value )' ];\r\n\t\t\tcase THREE.RGBEEncoding:\r\n\t\t\t\treturn [ 'RGBE','( value )' ];\r\n\t\t\tcase THREE.RGBM7Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\r\n\t\t\tcase THREE.RGBM16Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\r\n\t\t\tcase THREE.RGBDEncoding:\r\n\t\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\r\n\t\t\tcase THREE.GammaEncoding:\r\n\t\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\t\tvar toneMappingName;\r\n\r\n\t\tswitch ( toneMapping ) {\r\n\r\n\t\t\tcase THREE.LinearToneMapping:\r\n\t\t\t\ttoneMappingName = \"Linear\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.ReinhardToneMapping:\r\n\t\t\t\ttoneMappingName = \"Reinhard\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.Uncharted2ToneMapping:\r\n\t\t\t\ttoneMappingName = \"Uncharted2\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.CineonToneMapping:\r\n\t\t\t\ttoneMappingName = \"OptimizedCineon\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\r\n\r\n\t\t}\r\n\r\n\t\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\r\n\r\n\t}\r\n\r\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n\t\textensions = extensions || {};\r\n\r\n\t\tvar chunks = [\r\n\t\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : '',\r\n\t\t];\r\n\r\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\tvar name = info.name;\r\n\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\r\n\t\t\t//console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\r\n\t\t\tvar matches = structRe.exec( name );\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar structName = matches[ 1 ];\r\n\t\t\t\tvar structProperty = matches[ 2 ];\r\n\r\n\t\t\t\tvar uniformsStruct = uniforms[ structName ];\r\n\r\n\t\t\t\tif ( ! uniformsStruct ) {\r\n\r\n\t\t\t\t\tuniformsStruct = uniforms[ structName ] = {};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniformsStruct[ structProperty ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmatches = arrayStructRe.exec( name );\r\n\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar arrayName = matches[ 1 ];\r\n\t\t\t\tvar arrayIndex = matches[ 2 ];\r\n\t\t\t\tvar arrayProperty = matches[ 3 ];\r\n\r\n\t\t\t\tvar uniformsArray = uniforms[ arrayName ];\r\n\r\n\t\t\t\tif ( ! uniformsArray ) {\r\n\r\n\t\t\t\t\tuniformsArray = uniforms[ arrayName ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniformsArrayIndex = uniformsArray[ arrayIndex ];\r\n\r\n\t\t\t\tif ( ! uniformsArrayIndex ) {\r\n\r\n\t\t\t\t\tuniformsArrayIndex = uniformsArray[ arrayIndex ] = {};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniformsArrayIndex[ arrayProperty ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmatches = arrayRe.exec( name );\r\n\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar arrayName = matches[ 1 ];\r\n\r\n\t\t\t\tuniforms[ arrayName ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms[ name ] = location;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\tfunction replaceLightNums( string, parameters ) {\r\n\r\n\t\treturn string\r\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n\t}\r\n\r\n\tfunction parseIncludes( string ) {\r\n\r\n\t\tvar pattern = /#include +<([\\w\\d.]+)>/g;\r\n\r\n\t\tfunction replace( match, include ) {\r\n\r\n\t\t\tvar replace = THREE.ShaderChunk[ include ];\r\n\r\n\t\t\tif ( replace === undefined ) {\r\n\r\n\t\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn parseIncludes( replace );\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\tfunction unrollLoops( string ) {\r\n\r\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n\t\tfunction replace( match, start, end, snippet ) {\r\n\r\n\t\t\tvar unroll = '';\r\n\r\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn unroll;\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar extensions = material.extensions;\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.CubeUVReflectionMapping:\r\n\t\t\t\tcase THREE.CubeUVRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.pointLightShadows > 0 ? '#define POINT_LIGHT_SHADOWS' : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tcustomExtensions,\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.pointLightShadows > 0 ? '#define POINT_LIGHT_SHADOWS' : '',\r\n\r\n\t\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\r\n\r\n\t\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? THREE.ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\r\n\r\n\t\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? THREE.ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvertexShader = parseIncludes( vertexShader, parameters );\r\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\r\n\t\tfragmentShader = parseIncludes( fragmentShader, parameters );\r\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\r\n\t\tif ( material instanceof THREE.ShaderMaterial === false ) {\r\n\r\n\t\t\tvertexShader = unrollLoops( vertexShader );\r\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshStandardMaterial: 'standard',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\",\r\n\t\t\"shadowMapEnabled\", \"pointLightShadows\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"shadowMapType\",\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\r\n\r\n\t\tvar encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = THREE.LinearEncoding;\r\n\r\n\t\t} else if ( map instanceof THREE.Texture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\r\n\t\tif ( encoding === THREE.LinearEncoding && gammaOverrideLinear ) {\r\n\r\n\t\t\tencoding = THREE.GammaEncoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\t\t\toutputEncoding: getTextureEncodingFromMap( renderer.getCurrentRenderTarget(), renderer.gammaOutput ),\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\r\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === THREE.CubeUVReflectionMapping ) || ( material.envMap.mapping === THREE.CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tpointLightShadows: lights.shadowsPointLight,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: renderer.toneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tchunks.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\tchunks.push( parameterName );\r\n\t\t\tchunks.push( parameters[ parameterName ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tfunction addLineNumbers( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t}\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_shadowMapSize = new THREE.Vector2(),\r\n\r\n\t_lookTarget = new THREE.Vector3(),\r\n\t_lightPositionWorld = new THREE.Vector3(),\r\n\r\n\t_renderList = [],\r\n\r\n\t_MorphingFlag = 1,\r\n\t_SkinningFlag = 2,\r\n\r\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants );\r\n\r\n\tvar cubeDirections = [\r\n\t\tnew THREE.Vector3( 1, 0, 0 ), new THREE.Vector3( - 1, 0, 0 ), new THREE.Vector3( 0, 0, 1 ),\r\n\t\tnew THREE.Vector3( 0, 0, - 1 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tvar cubeUps = [\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ),\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 1 ),\tnew THREE.Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n\tvar cube2DViewPorts = [\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(),\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4()\r\n\t];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\tvar distanceShader = THREE.ShaderLib[ \"distanceRGBA\" ];\r\n\tvar distanceUniforms = THREE.UniformsUtils.clone( distanceShader.uniforms );\r\n\r\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\r\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n\t\tvar depthMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning\r\n\t\t} );\r\n\r\n\t\t_depthMaterials[ i ] = depthMaterial;\r\n\r\n\t\tvar distanceMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tdefines: {\r\n\t\t\t\t'USE_SHADOWMAP': ''\r\n\t\t\t},\r\n\t\t\tuniforms: distanceUniforms,\r\n\t\t\tvertexShader: distanceShader.vertexShader,\r\n\t\t\tfragmentShader: distanceShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning\r\n\t\t} );\r\n\r\n\t\t_distanceMaterials[ i ] = distanceMaterial;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\tthis.cullFace = THREE.CullFaceFront;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tvar faceCount, isPointLight;\r\n\t\tvar shadows = _lights.shadows;\r\n\r\n\t\tif ( shadows.length === 0 ) return;\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\t\t_gl.cullFace( scope.cullFace === THREE.CullFaceFront ? _gl.FRONT : _gl.BACK );\r\n\t\t_state.setDepthTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( var i = 0, il = shadows.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = shadows[ i ];\r\n\r\n\t\t\tvar shadow = light.shadow;\r\n\t\t\tvar shadowCamera = shadow.camera;\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tfaceCount = 6;\r\n\t\t\t\tisPointLight = true;\r\n\r\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\r\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\r\n\r\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t\t\t// following orientation:\r\n\t\t\t\t//\r\n\t\t\t\t//  xzXZ\r\n\t\t\t\t//   y Y\r\n\t\t\t\t//\r\n\t\t\t\t// X - Positive x direction\r\n\t\t\t\t// x - Negative x direction\r\n\t\t\t\t// Y - Positive y direction\r\n\t\t\t\t// y - Negative y direction\r\n\t\t\t\t// Z - Positive z direction\r\n\t\t\t\t// z - Negative z direction\r\n\r\n\t\t\t\t// positive X\r\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative X\r\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Z\r\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative Z\r\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Y\r\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n\t\t\t\t// negative Y\r\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n\t\t\t\t_shadowMapSize.x *= 4.0;\r\n\t\t\t\t_shadowMapSize.y *= 2.0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfaceCount = 1;\r\n\t\t\t\tisPointLight = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tvar pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tshadow.map = new THREE.WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tshadowCamera.aspect = _shadowMapSize.x / _shadowMapSize.y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = shadow.map;\r\n\t\t\tvar shadowMatrix = shadow.matrix;\r\n\r\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// render shadow map for each cube face (if omni-directional) or\r\n\t\t\t// run a single pass if not\r\n\r\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n\t\t\t\tif ( isPointLight ) {\r\n\r\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\r\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\r\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\r\n\t\t\t\t\t_state.viewport( vpDimensions );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t\t// compute shadow matrix\r\n\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t\t_renderList.length = 0;\r\n\r\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\r\n\r\n\t\t\t\t// render shadow map\r\n\t\t\t\t// render regular objects\r\n\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Restore GL state.\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t\t_state.enable( _gl.BLEND );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar newMaterial = null;\r\n\r\n\t\tvar materialVariants = _depthMaterials;\r\n\t\tvar customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( isPointLight ) {\r\n\r\n\t\t\tmaterialVariants = _distanceMaterials;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! customMaterial ) {\r\n\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined &&\r\n\t\t\t\t\tgeometry.morphTargets.length > 0 && material.morphTargets;\r\n\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\t\tvar variantIndex = 0;\r\n\r\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\r\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n\t\t\tnewMaterial = materialVariants[ variantIndex ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewMaterial = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tnewMaterial.visible = material.visible;\r\n\t\tnewMaterial.wireframe = material.wireframe;\r\n\t\tnewMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\r\n\t\tif ( isPointLight && newMaterial.uniforms.lightPos !== undefined ) {\r\n\r\n\t\t\tnewMaterial.uniforms.lightPos.value.copy( lightPositionWorld );\r\n\r\n\t\t}\r\n\r\n\t\treturn newMaterial;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera, shadowCamera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) && ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tvar color = new THREE.Vector4();\r\n\r\n\tvar newAttributes = new Uint8Array( 16 );\r\n\tvar enabledAttributes = new Uint8Array( 16 );\r\n\tvar attributeDivisors = new Uint8Array( 16 );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\tvar currentPremultipledAlpha = false;\r\n\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthWrite = null;\r\n\r\n\tvar currentColorWrite = null;\r\n\r\n\tvar currentStencilWrite = null;\r\n\tvar currentStencilFunc = null;\r\n\tvar currentStencilRef = null;\r\n\tvar currentStencilMask = null;\r\n\tvar currentStencilFail  = null;\r\n\tvar currentStencilZFail = null;\r\n\tvar currentStencilZPass = null;\r\n\r\n\tvar currentFlipSided = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar currentScissorTest = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = undefined;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tvar currentClearColor = new THREE.Vector4();\r\n\tvar currentClearDepth = null;\r\n\tvar currentClearStencil = null;\r\n\r\n\tvar currentScissor = new THREE.Vector4();\r\n\tvar currentViewport = new THREE.Vector4();\r\n\r\n\tvar emptyTexture = gl.createTexture();\r\n\tgl.bindTexture( gl.TEXTURE_2D, emptyTexture );\r\n\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR );\r\n\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, new Uint8Array( 3 ) );\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tthis.clearColor( 0, 0, 0, 1 );\r\n\t\tthis.clearDepth( 1 );\r\n\t\tthis.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\tgl.frontFace( gl.CCW );\r\n\t\tgl.cullFace( gl.BACK );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\r\n\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\r\n\t\t\tattributeDivisors[ attribute ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttributeAndDivisor = function ( attribute, meshPerAttribute, extension ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\tthis.disable( gl.BLEND );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\tif ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.SRC_COLOR, gl.SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\t// TODO: Rename to setDepthMask\r\n\r\n\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\r\n\t\t\tgl.depthMask( depthWrite );\r\n\t\t\tcurrentDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\t// TODO: Rename to setColorMask\r\n\r\n\t\tif ( currentColorWrite !== colorWrite ) {\r\n\r\n\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\tcurrentColorWrite = colorWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t\t\t currentStencilRef \t!== stencilRef \t||\r\n\t\t\t\t currentStencilMask !== stencilMask ) {\r\n\r\n\t\t\tgl.stencilFunc( stencilFunc,  stencilRef, stencilMask );\r\n\r\n\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\tcurrentStencilRef  = stencilRef;\r\n\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilOp = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t\t\t currentStencilZFail !== stencilZFail ||\r\n\t\t\t\t currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\tgl.stencilOp( stencilFail,  stencilZFail, stencilZPass );\r\n\r\n\t\t\tcurrentStencilFail  = stencilFail;\r\n\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilTest = function ( stencilTest ) {\r\n\r\n\t\tif ( stencilTest ) {\r\n\r\n\t\t\tthis.enable( gl.STENCIL_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.STENCIL_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilWrite = function ( stencilWrite ) {\r\n\r\n\t\t// TODO: Rename to setStencilMask\r\n\r\n\t\tif ( currentStencilWrite !== stencilWrite ) {\r\n\r\n\t\t\tgl.stencilMask( stencilWrite );\r\n\t\t\tcurrentStencilWrite = stencilWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn currentScissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tcurrentScissorTest = scissorTest;\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === undefined ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTexture );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// clear values\r\n\r\n\tthis.clearColor = function ( r, g, b, a ) {\r\n\r\n\t\tcolor.set( r, g, b, a );\r\n\r\n\t\tif ( currentClearColor.equals( color ) === false ) {\r\n\r\n\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\tcurrentClearColor.copy( color );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function ( depth ) {\r\n\r\n\t\tif ( currentClearDepth !== depth ) {\r\n\r\n\t\t\tgl.clearDepth( depth );\r\n\t\t\tcurrentClearDepth = depth;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function ( stencil ) {\r\n\r\n\t\tif ( currentClearStencil !== stencil ) {\r\n\r\n\t\t\tgl.clearStencil( stencil );\r\n\t\t\tcurrentClearStencil = stencil;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.scissor = function ( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.viewport = function ( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentTextureSlot = undefined;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentColorWrite = null;\r\n\t\tcurrentDepthWrite = null;\r\n\t\tcurrentStencilWrite = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewport ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewport.w / viewport.z,\r\n\t\t\thalfViewportWidth = viewport.z * 0.5,\r\n\t\t\thalfViewportHeight = viewport.w * 0.5;\r\n\r\n\t\tvar size = 16 / viewport.w,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.setDepthWrite( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewport.w;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewport.z &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewport.w ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, viewport.x + screenPositionPixels.x - 8, viewport.y + screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, viewport.x + screenPositionPixels.x - 8, viewport.y + screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tstate.setDepthWrite( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\t\t\r\n\t\tif ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/Three.Legacy.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.defineProperties( THREE.Box2.prototype, {\r\n\tempty: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\t\treturn this.isEmpty();\r\n\t\t}\r\n\t},\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Box3.prototype, {\r\n\tempty: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\t\treturn this.isEmpty();\r\n\t\t}\r\n\t},\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t},\r\n\tisIntersectionSphere: {\r\n\t\tvalue: function ( sphere ) {\r\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Matrix3.prototype, {\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix3( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3Array: {\r\n\t\tvalue: function ( a ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Matrix4.prototype, {\r\n\textractPosition: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\t\treturn this.copyPosition( m );\r\n\t\t}\r\n\t},\r\n\tsetRotationFromQuaternion: {\r\n\t\tvalue: function ( q ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\t\treturn this.makeRotationFromQuaternion( q );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\t\treturn vector.applyProjection( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector4: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3Array: {\r\n\t\tvalue: function ( a ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\t}\r\n\t},\r\n\trotateAxis: {\r\n\t\tvalue: function ( v ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\t\tv.transformDirection( this );\r\n\t\t}\r\n\t},\r\n\tcrossVector: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\t}\r\n\t},\r\n\ttranslate: {\r\n\t\tvalue: function ( v ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateX: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateY: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateZ: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateByAxis: {\r\n\t\tvalue: function ( axis, angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Plane.prototype, {\r\n\tisIntersectionLine: {\r\n\t\tvalue: function ( line ) {\r\n\t\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\t\t\treturn this.intersectsLine( line );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Quaternion.prototype, {\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\t\treturn vector.applyQuaternion( this );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Ray.prototype, {\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t},\r\n\tisIntersectionPlane: {\r\n\t\tvalue: function ( plane ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\t\treturn this.intersectsPlane( plane );\r\n\t\t}\r\n\t},\r\n\tisIntersectionSphere: {\r\n\t\tvalue: function ( sphere ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Vector3.prototype, {\r\n\tsetEulerFromRotationMatrix: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t\t}\r\n\t},\r\n\tsetEulerFromQuaternion: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t\t}\r\n\t},\r\n\tgetPositionFromMatrix: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\t\treturn this.setFromMatrixPosition( m );\r\n\t\t}\r\n\t},\r\n\tgetScaleFromMatrix: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\t\treturn this.setFromMatrixScale( m );\r\n\t\t}\r\n\t},\r\n\tgetColumnFromMatrix: {\r\n\t\tvalue: function ( index, matrix ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\nTHREE.Vertex = function ( x, y, z ) {\r\n\r\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\treturn new THREE.Vector3( x, y, z );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Object3D.prototype, {\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\t\t}\r\n\t},\r\n\tgetChildByName: {\r\n\t\tvalue: function ( name ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\t\treturn this.getObjectByName( name );\r\n\t\t}\r\n\t},\r\n\trenderDepth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t\t}\r\n\t},\r\n\ttranslate: {\r\n\t\tvalue: function ( distance, axis ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\t\treturn this.translateOnAxis( axis, distance );\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE, {\r\n\tPointCloud: {\r\n\t\tvalue: function ( geometry, material ) {\r\n\t\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\t\treturn new THREE.Points( geometry, material );\r\n\t\t}\r\n\t},\r\n\tParticleSystem: {\r\n\t\tvalue: function ( geometry, material ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\t\treturn new THREE.Points( geometry, material );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.BufferAttribute.prototype, {\r\n\tlength: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.BufferGeometry.prototype, {\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\taddIndex: {\r\n\t\tvalue: function ( index ) {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\t\tthis.setIndex( index );\r\n\t\t}\r\n\t},\r\n\taddDrawCall: {\r\n\t\tvalue: function ( start, count, indexOffset ) {\r\n\t\t\tif ( indexOffset !== undefined ) {\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\t\t}\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\t\tthis.addGroup( start, count );\r\n\t\t}\r\n\t},\r\n\tclearDrawCalls: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\t\tthis.clearGroups();\r\n\t\t}\r\n\t},\r\n\tcomputeTangents: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tcomputeOffsets: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Material.prototype, {\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t}\r\n\t},\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE, {\r\n\tPointCloudMaterial: {\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t},\r\n\tParticleBasicMaterial: {\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t},\r\n\tParticleSystemMaterial:{\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.MeshPhongMaterial.prototype, {\r\n\tmetal: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.ShaderMaterial.prototype, {\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderer.prototype, {\r\n\tsupportsFloatTextures: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\t\t}\r\n\t},\r\n\tsupportsHalfFloatTextures: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\t\t}\r\n\t},\r\n\tsupportsStandardDerivatives: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\t\t}\r\n\t},\r\n\tsupportsCompressedTextureS3TC: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\t}\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\t}\r\n\t},\r\n\tsupportsBlendMinMax: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\t\t}\r\n\t},\r\n\tsupportsVertexTextures: {\r\n\t\tvalue: function () {\r\n\t\t\treturn this.capabilities.vertexTextures;\r\n\t\t}\r\n\t},\r\n\tsupportsInstancedArrays: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t}\r\n\t},\r\n\tenableScissorTest: {\r\n\t\tvalue: function ( boolean ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\t\tthis.setScissorTest( boolean );\r\n\t\t}\r\n\t},\r\n\tinitMaterial: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t\t}\r\n\t},\r\n\taddPrePlugin: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t\t}\r\n\t},\r\n\taddPostPlugin: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tupdateShadowMap: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.enabled;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.cullFace;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\tthis.shadowMap.cullFace = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderTarget.prototype, {\r\n\twrapS: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.TextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.CubeTextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\r\n// File:src/extras/CurveUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.CurveUtils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ShapeUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\ttriangulate: ( function () {\r\n\r\n\t\t/**\r\n\t\t * This code is a quick port of code written in C++ which was submitted to\r\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t\t * See original code and more information here:\r\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t\t *\r\n\t\t * ported to actionscript by Zevan Rosser\r\n\t\t * www.actionsnippet.com\r\n\t\t *\r\n\t\t * ported to javascript by Joshua Koo\r\n\t\t * http://www.lab4games.net/zz85/blog\r\n\t\t *\r\n\t\t */\r\n\r\n\t\tfunction snip( contour, u, v, w, n, verts ) {\r\n\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\t\tif ( Number.EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// takes in an contour array and returns\r\n\r\n\t\treturn function ( contour, indices ) {\r\n\r\n\t\t\tvar n = contour.length;\r\n\r\n\t\t\tif ( n < 3 ) return null;\r\n\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\t\tvar u, v, w;\r\n\r\n\t\t\tif ( THREE.ShapeUtils.area( contour ) > 0.0 ) {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar nv = n;\r\n\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\r\n\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnv --;\r\n\r\n\t\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t} )(),\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2: ( function () {\r\n\r\n\t\tfunction b2p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p1( t, p ) {\r\n\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p2( t, p ) {\r\n\r\n\t\t\treturn t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2 ) {\r\n\r\n\t\t\treturn b2p0( t, p0 ) + b2p1( t, p1 ) + b2p2( t, p2 );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3: ( function () {\r\n\r\n\t\tfunction b3p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p1( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p2( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p3( t, p ) {\r\n\r\n\t\t\treturn t * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t\treturn b3p0( t, p0 ) + b3p1( t, p1 ) + b3p2( t, p2 ) + b3p3( t, p3 );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\nTHREE.Curve.prototype = {\r\n\r\n\tconstructor: THREE.Curve,\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function() {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tvar arcLengths = this.getLengths();\r\n\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t//var time = Date.now();\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function( t ) {\r\n\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n*/\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tvar diff = curveLengths[ i ] - d;\r\n\t\t\tvar curve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};\r\n*/\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t}\r\n\r\n\t// Get length of sub-curve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\r\n\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistant sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\tvar point = points[ i ];\r\n\t\tgeometry.vertices.push( new THREE.Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/core/Font.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Font = function ( data ) {\r\n\r\n\tthis.data = data;\r\n\r\n};\r\n\r\nTHREE.Font.prototype = {\r\n\r\n\tconstructor: THREE.Font,\r\n\r\n\tgenerateShapes: function ( text, size, divisions ) {\r\n\r\n\t\tfunction createPaths( text ) {\r\n\r\n\t\t\tvar chars = String( text ).split( '' );\r\n\t\t\tvar scale = size / data.resolution;\r\n\t\t\tvar offset = 0;\r\n\r\n\t\t\tvar paths = [];\r\n\r\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\t\t\tvar ret = createPath( chars[ i ], scale, offset );\r\n\t\t\t\toffset += ret.offset;\r\n\r\n\t\t\t\tpaths.push( ret.path );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn paths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction createPath( c, scale, offset ) {\r\n\r\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\r\n\r\n\t\t\tif ( ! glyph ) return;\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar pts = [], b2 = THREE.ShapeUtils.b2, b3 = THREE.ShapeUtils.b3;\r\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\r\n\r\n\t\t\tif ( glyph.o ) {\r\n\r\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\t\t\tvar action = outline[ i ++ ];\r\n\r\n\t\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\t\tb2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\t\tb3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\t\tif ( divisions === undefined ) divisions = 4;\r\n\r\n\t\tvar data = this.data;\r\n\r\n\t\tvar paths = createPaths( text );\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\nTHREE.Path.prototype.constructor = THREE.Path;\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tthis.actions.push( { action: 'moveTo', args: [ x, y ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'lineTo', args: [ x, y ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve(\r\n\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\tnew THREE.Vector2( aX, aY )\r\n\t);\r\n\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'quadraticCurveTo', args: [ aCPx, aCPy, aX, aY ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve(\r\n\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\tnew THREE.Vector2( aX, aY )\r\n\t);\r\n\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'bezierCurveTo', args: [ aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'splineThru', args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar args = [\r\n\t\taX, aY,\r\n\t\txRadius, yRadius,\r\n\t\taStartAngle, aEndAngle,\r\n\t\taClockwise,\r\n\t\taRotation || 0 // aRotation is optional.\r\n\t];\r\n\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint( 1 );\r\n\targs.push( lastPoint.x );\r\n\targs.push( lastPoint.y );\r\n\r\n\tthis.actions.push( { action: 'ellipse', args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if ( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\tif ( this.autoClose ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions ) {\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\tvar points = [];\r\n\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, tx, ty;\r\n\r\n\tfor ( var i = 0, l = this.actions.length; i < l; i ++ ) {\r\n\r\n\t\tvar item = this.actions[ i ];\r\n\r\n\t\tvar action = item.action;\r\n\t\tvar args = item.args;\r\n\r\n\t\tswitch ( action ) {\r\n\r\n\t\tcase 'moveTo':\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'lineTo':\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'quadraticCurveTo':\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\ttx = b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'bezierCurveTo':\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\ttx = b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'splineThru':\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( var j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'arc':\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'ellipse':\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tvar cos, sin;\r\n\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1 ];\r\n\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < Number.EPSILON &&\r\n\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < Number.EPSILON )\r\n\t\tpoints.splice( points.length - 1, 1 );\r\n\r\n\tif ( this.autoClose ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( var i = 0, l = inActions.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar item = inActions[ i ];\r\n\r\n\t\t\tvar args = item.args;\r\n\t\t\tvar action = item.action;\r\n\r\n\t\t\tif ( action === 'moveTo' ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\r\n\t}\r\n\r\n\tvar isClockWise = THREE.ShapeUtils.isClockWise;\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length === 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length === 1 ) {\r\n\r\n\t\ttmpPath = subPaths[ 0 ];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[ mainIdx ] = undefined;\r\n\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\r\n\t\tvar ambiguous = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\r\n\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar tmpHoles;\r\n\r\n\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\ttmpShape = newShapes[ i ].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\nTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\treturn new THREE.ExtrudeGeometry( this, options );\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\treturn new THREE.ShapeGeometry( this, options );\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar holesPts = [];\r\n\r\n\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\treturn this.extractAllPoints( divisions );\r\n\r\n};\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\tb2( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t);\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentQuadraticBezier = THREE.CurveUtils.tangentQuadraticBezier;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\ttangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\ttangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t);\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentCubicBezier = THREE.CurveUtils.tangentCubicBezier;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\ttangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\ttangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight )\r\n\t);\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\t\t\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\t\tb2( t, this.v0.y, this.v1.y, this.v2.y ),\r\n\t\t\tb2( t, this.v0.z, this.v1.z, this.v2.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y ),\r\n\t\t\tb3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight ),\r\n\t\t\tinterpolate( point0.z, point1.z, point2.z, point3.z, weight )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( this.closed ) {\r\n\r\n\t\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3; // 4 points\r\n\r\n\t\t\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint % l ];\r\n\t\t\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\t\t\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = function ( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.' );\r\n\r\n\tTHREE.CatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n};\r\n\r\nTHREE.ClosedSplineCurve3.prototype = Object.create( THREE.CatmullRomCurve3.prototype );\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry;\r\n\r\n// File:src/extras/geometries/BoxBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.BoxBufferGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'BoxBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tvar scope = this;\r\n\r\n\t// segments\r\n\twidthSegments = Math.floor( widthSegments ) || 1;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\tdepthSegments = Math.floor( depthSegments ) || 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = calculateVertexCount( widthSegments, heightSegments, depthSegments );\r\n\tvar indexCount = ( vertexCount / 4 ) * 6;\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\tvar numberOfVertices = 0;\r\n\r\n\t// group variables\r\n\tvar groupStart = 0;\r\n\r\n\t// build each side of the box geometry\r\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\r\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\r\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\r\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\r\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount ( w, h, d ) {\r\n\r\n\t\tvar segments = 0;\r\n\r\n\t\t// calculate the amount of segments for each side\r\n\t\tsegments += w * h * 2; // xy\r\n\t\tsegments += w * d * 2; // xz\r\n\t\tsegments += d * h * 2; // zy\r\n\r\n\t\treturn segments * 4; // four vertices per segments\r\n\r\n\t}\r\n\r\n\tfunction buildPlane ( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\tvar segmentWidth\t= width / gridX;\r\n\t\tvar segmentHeight = height / gridY;\r\n\r\n\t\tvar widthHalf = width / 2;\r\n\t\tvar heightHalf = height / 2;\r\n\t\tvar depthHalf = depth / 2;\r\n\r\n\t\tvar gridX1 = gridX + 1;\r\n\t\tvar gridY1 = gridY + 1;\r\n\r\n\t\tvar vertexCounter = 0;\r\n\t\tvar groupCount = 0;\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tvar y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t// now apply vector to vertex buffer\r\n\t\t\t\tvertices[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tvertices[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tvertices[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t// now apply vector to normal buffer\r\n\t\t\t\tnormals[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tnormals[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tnormals[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// uvs\r\n\t\t\t\tuvs[ uvBufferOffset ] = ix / gridX;\r\n\t\t\t\tuvs[ uvBufferOffset + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tvertexBufferOffset += 3;\r\n\t\t\t\tuvBufferOffset += 2;\r\n\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// 1. you need three indices to draw a single face\r\n\t\t// 2. a single segment consists of two faces\r\n\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t// indices\r\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tindexBufferOffset += 6;\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t\t// update total number of vertices\r\n\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.BoxBufferGeometry.prototype.constructor = THREE.BoxBufferGeometry;\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 2 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.CylinderBufferGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = Math.floor( radialSegments )  || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\r\n\t// used to calculate buffer length\r\n\r\n\tvar vertexCount = calculateVertexCount();\r\n\tvar indexCount = calculateIndexCount();\r\n\r\n\t// buffers\r\n\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\r\n\tvar index = 0, indexOffset = 0, indexArray = [], halfHeight = height / 2;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif( openEnded === false ) {\r\n\r\n\t\tif( radiusTop > 0 ) {\r\n\r\n\t\t\tgenerateCap( true );\r\n\r\n\t\t}\r\n\r\n\t\tif( radiusBottom > 0 ) {\r\n\r\n\t\t\tgenerateCap( false );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount () {\r\n\r\n\t\tvar count = ( radialSegments + 1 ) * ( heightSegments + 1 );\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += ( ( radialSegments + 1 ) * 2 ) + ( radialSegments * 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction calculateIndexCount () {\r\n\r\n\t\tvar count = radialSegments * heightSegments * 2 * 3;\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += radialSegments * 2 * 3;\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction generateTorso () {\r\n\r\n\t\tvar x, y;\r\n\t\tvar normal = new THREE.Vector3();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tvar indexRow = [];\r\n\r\n\t\t\tvar v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\t\t// vertex\r\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\t\t\t\tnormal.copy( vertex );\r\n\r\n\t\t\t\t// handle special case if radiusTop/radiusBottom is zero\r\n\t\t\t\tif( ( radiusTop === 0  && y === 0 ) || ( radiusBottom === 0  && y === heightSegments ) ) {\r\n\r\n\t\t\t\t\tnormal.x = Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\t\tnormal.z = Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal.setY( Math.sqrt( normal.x * normal.x + normal.z * normal.z ) * tanTheta ).normalize();\r\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\t\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\t\t\t\tindexRow.push( index );\r\n\r\n\t\t\t\t// increase index\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\t\t\t\tvar i1 = indexArray[ y ][ x ];\r\n\t\t\t\tvar i2 = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tvar i3 = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tvar i4 = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices.setX( indexOffset, i1 ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset++;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i3 ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateCap ( top ) {\r\n\r\n\t\tvar x, centerIndexStart, centerIndexEnd;\r\n\t\tvar uv = new THREE.Vector2();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tvar sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tif( top === true ) {\r\n\r\n\t\t\t\tuv.x = x / radialSegments;\r\n\t\t\t\tuv.y = 0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuv.x = ( x - 1 ) / radialSegments;\r\n\t\t\t\tuv.y = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuvs.setXY( index, u, ( top === true ) ? 1 : 0 );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar c = centerIndexStart + x;\r\n\t\t\tvar i = centerIndexEnd + x;\r\n\r\n\t\t\tif( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\t\t\t\tindices.setX( indexOffset, i + 1); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.CylinderBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CylinderBufferGeometry.prototype.constructor = THREE.CylinderBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, 0 ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, 1 ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, 1 ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\n // points - to create a closed torus, one must use a set of points\r\n //    like so: [ a, b, c, d, a ], see first is the same as last.\r\n // segments - the number of circumference segments to create\r\n // phiStart - the starting radian\r\n // phiLength - the radian (0 to 2PI) range of the lathed section\r\n //    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheBufferGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\tphiLength = THREE.Math.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( segments + 1 ) * points.length;\r\n\tvar indexCount = segments * points.length * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar index = 0, indexOffset = 0, base;\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar i, j;\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar sin = Math.sin( phi );\r\n\t\tvar cos = Math.cos( phi );\r\n\r\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tbase = j + i * points.length;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + points.length;\r\n\t\t\tvar c = base + points.length + 1;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\t\tvar n1 = new THREE.Vector3();\r\n\t\tvar n2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\t\tbase = segments * points.length * 3;\r\n\r\n\t\tfor( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t} // next row\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LatheBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.LatheBufferGeometry.prototype.constructor = THREE.LatheBufferGeometry;\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points\r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2PI) range of the lathed section\r\n//    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.RingBufferGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 20;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( thetaSegments + 1 ) * ( phiSegments + 1 );\r\n\tvar indexCount = thetaSegments * phiSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// some helper variables\r\n\tvar index = 0, indexOffset = 0, segment;\r\n\tvar radius = innerRadius;\r\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\t// values are generate from the inside of the ring to the outside\r\n\r\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = i + thetaSegmentLevel;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = segment;\r\n\t\t\tvar b = segment + thetaSegments + 1;\r\n\t\t\tvar c = segment + thetaSegments + 2;\r\n\t\t\tvar d = segment + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n};\r\n\r\nTHREE.RingBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.RingBufferGeometry.prototype.constructor = THREE.RingBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new ( positions.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute )( indices, 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float> // how far from text outline is bevel\r\n * }\r\n */\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar font = parameters.font;\r\n\r\n\tif ( font instanceof THREE.Font === false ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.TorusBufferGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\r\n\t// helper variables\r\n\tvar center = new THREE.Vector3();\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices[ vertexBufferOffset ] = vertex.x;\r\n\t\t\tvertices[ vertexBufferOffset + 1 ] = vertex.y;\r\n\t\t\tvertices[ vertexBufferOffset + 2 ] = vertex.z;\r\n\r\n\t\t\t// this vector is used to calculate the normal\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals[ vertexBufferOffset ] = normal.x;\r\n\t\t\tnormals[ vertexBufferOffset + 1 ] = normal.y;\r\n\t\t\tnormals[ vertexBufferOffset + 2 ] = normal.z;\r\n\r\n\t\t\t// uv\r\n\t\t\tuvs[ uvBufferOffset ] = i / tubularSegments;\r\n\t\t\tuvs[ uvBufferOffset + 1 ] = j / radialSegments;\r\n\r\n\t\t\t// update offsets\r\n\t\t\tvertexBufferOffset += 3;\r\n\t\t\tuvBufferOffset += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t// update offset\r\n\t\t\tindexBufferOffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.TorusBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusBufferGeometry.prototype.constructor = THREE.TorusBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n *\r\n * see: http://www.blackpawn.com/texts/pqtorus/\r\n */\r\nTHREE.TorusKnotBufferGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar i, j, index = 0, indexOffset = 0;\r\n\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\r\n\tvar P1 = new THREE.Vector3();\r\n\tvar P2 = new THREE.Vector3();\r\n\r\n\tvar B = new THREE.Vector3();\r\n\tvar T = new THREE.Vector3();\r\n\tvar N = new THREE.Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\t\t\tvar cx = - tube * Math.cos( v );\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / tubularSegments;\r\n\t\t\tuv.y = j / radialSegments;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = q / p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusKnotBufferGeometry.prototype.constructor = THREE.TorusKnotBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed,\r\n\t\ttaper: taper\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, x1, x2 );\r\n\t\tvar min = Math.min( x0, x1, x2 );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (±1, ±1, ±1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, ±1/φ, ±φ)\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (±1/φ, ±φ, 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (±φ, 0, ±1/φ)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar groups = geometry.groups;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addGroup( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar group = groups[ o ];\r\n\r\n\t\t\t\tvar start = group.start;\r\n\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\t\t\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tbox.setFromObject( object );\r\n\r\n\t\tif ( box.isEmpty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tfunction setPoint( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.translate( 0, - 0.5, 0 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/i;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var iteratorSymbol =\n    typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided, then outerFn.prototype instanceof Generator.\n    var generator = Object.create((outerFn || Generator).prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function(arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    // This invoke function is written in a style that assumes some\n    // calling function (or Promise) will handle exceptions.\n    function invoke(method, arg) {\n      var result = generator[method](arg);\n      var value = result.value;\n      return value instanceof AwaitArgument\n        ? Promise.resolve(value.arg).then(invokeNext, invokeThrow)\n        : Promise.resolve(value).then(function(unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration. If the Promise is rejected, however, the\n            // result for this iteration will be rejected with the same\n            // reason. Note that rejections of yielded Promises are not\n            // thrown back into the generator function, as is the case\n            // when an awaited Promise is rejected. This difference in\n            // behavior between yield and await is important, because it\n            // allows the consumer to decide what to do with the yielded\n            // rejection (swallow it and continue, manually .throw it back\n            // into the generator, abandon iteration, whatever). With\n            // await, by contrast, there is no opportunity to examine the\n            // rejection reason outside the generator function, so the\n            // only option is to throw it from the await expression, and\n            // let the generator function handle the exception.\n            result.value = unwrapped;\n            return result;\n          });\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var invokeNext = invoke.bind(generator, \"next\");\n    var invokeThrow = invoke.bind(generator, \"throw\");\n    var invokeReturn = invoke.bind(generator, \"return\");\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return invoke(method, arg);\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : new Promise(function (resolve) {\n          resolve(callInvokeWithMethodAndArg());\n        });\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          context._sent = arg;\n\n          if (state === GenStateSuspendedYield) {\n            context.sent = arg;\n          } else {\n            context.sent = undefined;\n          }\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      this.sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n","require('./modules/es6.symbol');\nrequire('./modules/es6.object.create');\nrequire('./modules/es6.object.define-property');\nrequire('./modules/es6.object.define-properties');\nrequire('./modules/es6.object.get-own-property-descriptor');\nrequire('./modules/es6.object.get-prototype-of');\nrequire('./modules/es6.object.keys');\nrequire('./modules/es6.object.get-own-property-names');\nrequire('./modules/es6.object.freeze');\nrequire('./modules/es6.object.seal');\nrequire('./modules/es6.object.prevent-extensions');\nrequire('./modules/es6.object.is-frozen');\nrequire('./modules/es6.object.is-sealed');\nrequire('./modules/es6.object.is-extensible');\nrequire('./modules/es6.object.assign');\nrequire('./modules/es6.object.is');\nrequire('./modules/es6.object.set-prototype-of');\nrequire('./modules/es6.object.to-string');\nrequire('./modules/es6.function.bind');\nrequire('./modules/es6.function.name');\nrequire('./modules/es6.function.has-instance');\nrequire('./modules/es6.parse-int');\nrequire('./modules/es6.parse-float');\nrequire('./modules/es6.number.constructor');\nrequire('./modules/es6.number.to-fixed');\nrequire('./modules/es6.number.to-precision');\nrequire('./modules/es6.number.epsilon');\nrequire('./modules/es6.number.is-finite');\nrequire('./modules/es6.number.is-integer');\nrequire('./modules/es6.number.is-nan');\nrequire('./modules/es6.number.is-safe-integer');\nrequire('./modules/es6.number.max-safe-integer');\nrequire('./modules/es6.number.min-safe-integer');\nrequire('./modules/es6.number.parse-float');\nrequire('./modules/es6.number.parse-int');\nrequire('./modules/es6.math.acosh');\nrequire('./modules/es6.math.asinh');\nrequire('./modules/es6.math.atanh');\nrequire('./modules/es6.math.cbrt');\nrequire('./modules/es6.math.clz32');\nrequire('./modules/es6.math.cosh');\nrequire('./modules/es6.math.expm1');\nrequire('./modules/es6.math.fround');\nrequire('./modules/es6.math.hypot');\nrequire('./modules/es6.math.imul');\nrequire('./modules/es6.math.log10');\nrequire('./modules/es6.math.log1p');\nrequire('./modules/es6.math.log2');\nrequire('./modules/es6.math.sign');\nrequire('./modules/es6.math.sinh');\nrequire('./modules/es6.math.tanh');\nrequire('./modules/es6.math.trunc');\nrequire('./modules/es6.string.from-code-point');\nrequire('./modules/es6.string.raw');\nrequire('./modules/es6.string.trim');\nrequire('./modules/es6.string.iterator');\nrequire('./modules/es6.string.code-point-at');\nrequire('./modules/es6.string.ends-with');\nrequire('./modules/es6.string.includes');\nrequire('./modules/es6.string.repeat');\nrequire('./modules/es6.string.starts-with');\nrequire('./modules/es6.string.anchor');\nrequire('./modules/es6.string.big');\nrequire('./modules/es6.string.blink');\nrequire('./modules/es6.string.bold');\nrequire('./modules/es6.string.fixed');\nrequire('./modules/es6.string.fontcolor');\nrequire('./modules/es6.string.fontsize');\nrequire('./modules/es6.string.italics');\nrequire('./modules/es6.string.link');\nrequire('./modules/es6.string.small');\nrequire('./modules/es6.string.strike');\nrequire('./modules/es6.string.sub');\nrequire('./modules/es6.string.sup');\nrequire('./modules/es6.date.now');\nrequire('./modules/es6.date.to-json');\nrequire('./modules/es6.date.to-iso-string');\nrequire('./modules/es6.date.to-string');\nrequire('./modules/es6.date.to-primitive');\nrequire('./modules/es6.array.is-array');\nrequire('./modules/es6.array.from');\nrequire('./modules/es6.array.of');\nrequire('./modules/es6.array.join');\nrequire('./modules/es6.array.slice');\nrequire('./modules/es6.array.sort');\nrequire('./modules/es6.array.for-each');\nrequire('./modules/es6.array.map');\nrequire('./modules/es6.array.filter');\nrequire('./modules/es6.array.some');\nrequire('./modules/es6.array.every');\nrequire('./modules/es6.array.reduce');\nrequire('./modules/es6.array.reduce-right');\nrequire('./modules/es6.array.index-of');\nrequire('./modules/es6.array.last-index-of');\nrequire('./modules/es6.array.copy-within');\nrequire('./modules/es6.array.fill');\nrequire('./modules/es6.array.find');\nrequire('./modules/es6.array.find-index');\nrequire('./modules/es6.array.species');\nrequire('./modules/es6.array.iterator');\nrequire('./modules/es6.regexp.constructor');\nrequire('./modules/es6.regexp.to-string');\nrequire('./modules/es6.regexp.flags');\nrequire('./modules/es6.regexp.match');\nrequire('./modules/es6.regexp.replace');\nrequire('./modules/es6.regexp.search');\nrequire('./modules/es6.regexp.split');\nrequire('./modules/es6.promise');\nrequire('./modules/es6.map');\nrequire('./modules/es6.set');\nrequire('./modules/es6.weak-map');\nrequire('./modules/es6.weak-set');\nrequire('./modules/es6.typed.array-buffer');\nrequire('./modules/es6.typed.data-view');\nrequire('./modules/es6.typed.int8-array');\nrequire('./modules/es6.typed.uint8-array');\nrequire('./modules/es6.typed.uint8-clamped-array');\nrequire('./modules/es6.typed.int16-array');\nrequire('./modules/es6.typed.uint16-array');\nrequire('./modules/es6.typed.int32-array');\nrequire('./modules/es6.typed.uint32-array');\nrequire('./modules/es6.typed.float32-array');\nrequire('./modules/es6.typed.float64-array');\nrequire('./modules/es6.reflect.apply');\nrequire('./modules/es6.reflect.construct');\nrequire('./modules/es6.reflect.define-property');\nrequire('./modules/es6.reflect.delete-property');\nrequire('./modules/es6.reflect.enumerate');\nrequire('./modules/es6.reflect.get');\nrequire('./modules/es6.reflect.get-own-property-descriptor');\nrequire('./modules/es6.reflect.get-prototype-of');\nrequire('./modules/es6.reflect.has');\nrequire('./modules/es6.reflect.is-extensible');\nrequire('./modules/es6.reflect.own-keys');\nrequire('./modules/es6.reflect.prevent-extensions');\nrequire('./modules/es6.reflect.set');\nrequire('./modules/es6.reflect.set-prototype-of');\nrequire('./modules/es7.array.includes');\nrequire('./modules/es7.string.at');\nrequire('./modules/es7.string.pad-start');\nrequire('./modules/es7.string.pad-end');\nrequire('./modules/es7.string.trim-left');\nrequire('./modules/es7.string.trim-right');\nrequire('./modules/es7.string.match-all');\nrequire('./modules/es7.symbol.async-iterator');\nrequire('./modules/es7.symbol.observable');\nrequire('./modules/es7.object.get-own-property-descriptors');\nrequire('./modules/es7.object.values');\nrequire('./modules/es7.object.entries');\nrequire('./modules/es7.object.define-getter');\nrequire('./modules/es7.object.define-setter');\nrequire('./modules/es7.object.lookup-getter');\nrequire('./modules/es7.object.lookup-setter');\nrequire('./modules/es7.map.to-json');\nrequire('./modules/es7.set.to-json');\nrequire('./modules/es7.system.global');\nrequire('./modules/es7.error.is-error');\nrequire('./modules/es7.math.iaddh');\nrequire('./modules/es7.math.isubh');\nrequire('./modules/es7.math.imulh');\nrequire('./modules/es7.math.umulh');\nrequire('./modules/es7.reflect.define-metadata');\nrequire('./modules/es7.reflect.delete-metadata');\nrequire('./modules/es7.reflect.get-metadata');\nrequire('./modules/es7.reflect.get-metadata-keys');\nrequire('./modules/es7.reflect.get-own-metadata');\nrequire('./modules/es7.reflect.get-own-metadata-keys');\nrequire('./modules/es7.reflect.has-metadata');\nrequire('./modules/es7.reflect.has-own-metadata');\nrequire('./modules/es7.reflect.metadata');\nrequire('./modules/es7.asap');\nrequire('./modules/es7.observable');\nrequire('./modules/web.timers');\nrequire('./modules/web.immediate');\nrequire('./modules/web.dom.iterable');\nmodule.exports = require('./modules/_core');","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var $export = require('./_export')\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n$export($export.S, 'Object', {create: require('./_object-create')});","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","var $export = require('./_export');\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});","var $export = require('./_export');\r\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperties: require('./_object-dps')});","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = require('./_to-iobject')\n  , $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function(){\n  return require('./_object-gopn-ext').f;\n});","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function($preventExtensions){\n  return function preventExtensions(it){\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function($seal){\n  return function seal(it){\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});","// 19.1.2.12 Object.isFrozen(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isFrozen', function($isFrozen){\n  return function isFrozen(it){\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});","// 19.1.2.13 Object.isSealed(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isSealed', function($isSealed){\n  return function isSealed(it){\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});","// 19.1.2.11 Object.isExtensible(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isExtensible', function($isExtensible){\n  return function isExtensible(it){\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', {is: require('./_same-value')});","'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./_classof')\n  , test    = {};\ntest[require('./_wks')('toStringTag')] = 'z';\nif(test + '' != '[object z]'){\n  require('./_redefine')(Object.prototype, 'toString', function toString(){\n    return '[object ' + classof(this) + ']';\n  }, true);\n}","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});","// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\r\nvar $export = require('./_export');\r\n\r\n$export($export.P, 'Function', {bind: require('./_bind')});","var dP         = require('./_object-dp').f\n  , createDesc = require('./_property-desc')\n  , has        = require('./_has')\n  , FProto     = Function.prototype\n  , nameRE     = /^\\s*function ([^ (]*)/\n  , NAME       = 'name';\n\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function(){\n    try {\n      var that = this\n        , name = ('' + that).match(nameRE)[1];\n      has(that, NAME) || !isExtensible(that) || dP(that, NAME, createDesc(5, name));\n      return name;\n    } catch(e){\n      return '';\n    }\n  }\n});","var $export     = require('./_export')\r\n  , $parseFloat = require('./_parse-float');\r\n// 18.2.4 parseFloat(string)\r\n$export($export.G + $export.F * (parseFloat != $parseFloat), {parseFloat: $parseFloat});","'use strict';\nvar isObject       = require('./_is-object')\n  , getPrototypeOf = require('./_object-gpo')\n  , HAS_INSTANCE   = require('./_wks')('hasInstance')\n  , FunctionProto  = Function.prototype;\n// 19.2.3.6 Function.prototype[@@hasInstance](V)\nif(!(HAS_INSTANCE in FunctionProto))require('./_object-dp').f(FunctionProto, HAS_INSTANCE, {value: function(O){\n  if(typeof this != 'function' || !isObject(O))return false;\n  if(!isObject(this.prototype))return O instanceof this;\n  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n  while(O = getPrototypeOf(O))if(this.prototype === O)return true;\n  return false;\n}});","var $export   = require('./_export')\r\n  , $parseInt = require('./_parse-int');\r\n// 18.2.5 parseInt(string, radix)\r\n$export($export.G + $export.F * (parseInt != $parseInt), {parseInt: $parseInt});","'use strict';\nvar global            = require('./_global')\n  , has               = require('./_has')\n  , cof               = require('./_cof')\n  , inheritIfRequired = require('./_inherit-if-required')\n  , toPrimitive       = require('./_to-primitive')\n  , fails             = require('./_fails')\n  , gOPN              = require('./_object-gopn').f\n  , gOPD              = require('./_object-gopd').f\n  , dP                = require('./_object-dp').f\n  , $trim             = require('./_string-trim').trim\n  , NUMBER            = 'Number'\n  , $Number           = global[NUMBER]\n  , Base              = $Number\n  , proto             = $Number.prototype\n  // Opera ~12 has broken Object#toString\n  , BROKEN_COF        = cof(require('./_object-create')(proto)) == NUMBER\n  , TRIM              = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function(argument){\n  var it = toPrimitive(argument, false);\n  if(typeof it == 'string' && it.length > 2){\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0)\n      , third, radix, maxCode;\n    if(first === 43 || first === 45){\n      third = it.charCodeAt(2);\n      if(third === 88 || third === 120)return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if(first === 48){\n      switch(it.charCodeAt(1)){\n        case 66 : case 98  : radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79 : case 111 : radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default : return +it;\n      }\n      for(var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++){\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if(code < 48 || code > maxCode)return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif(!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')){\n  $Number = function Number(value){\n    var it = arguments.length < 1 ? 0 : value\n      , that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function(){ proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for(var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++){\n    if(has(Base, key = keys[j]) && !has($Number, key)){\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}","'use strict';\r\nvar $export      = require('./_export')\r\n  , anInstance   = require('./_an-instance')\r\n  , toInteger    = require('./_to-integer')\r\n  , aNumberValue = require('./_a-number-value')\r\n  , repeat       = require('./_string-repeat')\r\n  , $toFixed     = 1..toFixed\r\n  , floor        = Math.floor\r\n  , data         = [0, 0, 0, 0, 0, 0]\r\n  , ERROR        = 'Number.toFixed: incorrect invocation!'\r\n  , ZERO         = '0';\r\n\r\nvar multiply = function(n, c){\r\n  var i  = -1\r\n    , c2 = c;\r\n  while(++i < 6){\r\n    c2 += n * data[i];\r\n    data[i] = c2 % 1e7;\r\n    c2 = floor(c2 / 1e7);\r\n  }\r\n};\r\nvar divide = function(n){\r\n  var i = 6\r\n    , c = 0;\r\n  while(--i >= 0){\r\n    c += data[i];\r\n    data[i] = floor(c / n);\r\n    c = (c % n) * 1e7;\r\n  }\r\n};\r\nvar numToString = function(){\r\n  var i = 6\r\n    , s = '';\r\n  while(--i >= 0){\r\n    if(s !== '' || i === 0 || data[i] !== 0){\r\n      var t = String(data[i]);\r\n      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;\r\n    }\r\n  } return s;\r\n};\r\nvar pow = function(x, n, acc){\r\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\r\n};\r\nvar log = function(x){\r\n  var n  = 0\r\n    , x2 = x;\r\n  while(x2 >= 4096){\r\n    n += 12;\r\n    x2 /= 4096;\r\n  }\r\n  while(x2 >= 2){\r\n    n  += 1;\r\n    x2 /= 2;\r\n  } return n;\r\n};\r\n\r\n$export($export.P + $export.F * (!!$toFixed && (\r\n  0.00008.toFixed(3) !== '0.000' ||\r\n  0.9.toFixed(0) !== '1' ||\r\n  1.255.toFixed(2) !== '1.25' ||\r\n  1000000000000000128..toFixed(0) !== '1000000000000000128'\r\n) || !require('./_fails')(function(){\r\n  // V8 ~ Android 4.3-\r\n  $toFixed.call({});\r\n})), 'Number', {\r\n  toFixed: function toFixed(fractionDigits){\r\n    var x = aNumberValue(this, ERROR)\r\n      , f = toInteger(fractionDigits)\r\n      , s = ''\r\n      , m = ZERO\r\n      , e, z, j, k;\r\n    if(f < 0 || f > 20)throw RangeError(ERROR);\r\n    if(x != x)return 'NaN';\r\n    if(x <= -1e21 || x >= 1e21)return String(x);\r\n    if(x < 0){\r\n      s = '-';\r\n      x = -x;\r\n    }\r\n    if(x > 1e-21){\r\n      e = log(x * pow(2, 69, 1)) - 69;\r\n      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);\r\n      z *= 0x10000000000000;\r\n      e = 52 - e;\r\n      if(e > 0){\r\n        multiply(0, z);\r\n        j = f;\r\n        while(j >= 7){\r\n          multiply(1e7, 0);\r\n          j -= 7;\r\n        }\r\n        multiply(pow(10, j, 1), 0);\r\n        j = e - 1;\r\n        while(j >= 23){\r\n          divide(1 << 23);\r\n          j -= 23;\r\n        }\r\n        divide(1 << j);\r\n        multiply(1, 1);\r\n        divide(2);\r\n        m = numToString();\r\n      } else {\r\n        multiply(0, z);\r\n        multiply(1 << -e, 0);\r\n        m = numToString() + repeat.call(ZERO, f);\r\n      }\r\n    }\r\n    if(f > 0){\r\n      k = m.length;\r\n      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));\r\n    } else {\r\n      m = s + m;\r\n    } return m;\r\n  }\r\n});","'use strict';\r\nvar $export      = require('./_export')\r\n  , $fails       = require('./_fails')\r\n  , aNumberValue = require('./_a-number-value')\r\n  , $toPrecision = 1..toPrecision;\r\n\r\n$export($export.P + $export.F * ($fails(function(){\r\n  // IE7-\r\n  return $toPrecision.call(1, undefined) !== '1';\r\n}) || !$fails(function(){\r\n  // V8 ~ Android 4.3-\r\n  $toPrecision.call({});\r\n})), 'Number', {\r\n  toPrecision: function toPrecision(precision){\r\n    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');\r\n    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision); \r\n  }\r\n});","// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {EPSILON: Math.pow(2, -52)});","// 20.1.2.2 Number.isFinite(number)\nvar $export   = require('./_export')\n  , _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it){\n    return typeof it == 'number' && _isFinite(it);\n  }\n});","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {isInteger: require('./_is-integer')});","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number){\n    return number != number;\n  }\n});","// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {MAX_SAFE_INTEGER: 0x1fffffffffffff});","// 20.1.2.5 Number.isSafeInteger(number)\nvar $export   = require('./_export')\n  , isInteger = require('./_is-integer')\n  , abs       = Math.abs;\n\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number){\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});","// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {MIN_SAFE_INTEGER: -0x1fffffffffffff});","var $export     = require('./_export')\n  , $parseFloat = require('./_parse-float');\n// 20.1.2.12 Number.parseFloat(string)\n$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', {parseFloat: $parseFloat});","var $export   = require('./_export')\n  , $parseInt = require('./_parse-int');\n// 20.1.2.13 Number.parseInt(string, radix)\n$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', {parseInt: $parseInt});","// 20.2.2.3 Math.acosh(x)\nvar $export = require('./_export')\n  , log1p   = require('./_math-log1p')\n  , sqrt    = Math.sqrt\n  , $acosh  = Math.acosh;\n\n$export($export.S + $export.F * !($acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  && Math.floor($acosh(Number.MAX_VALUE)) == 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN \n  && $acosh(Infinity) == Infinity\n), 'Math', {\n  acosh: function acosh(x){\n    return (x = +x) < 1 ? NaN : x > 94906265.62425156\n      ? Math.log(x) + Math.LN2\n      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));\n  }\n});","// 20.2.2.5 Math.asinh(x)\nvar $export = require('./_export')\n  , $asinh  = Math.asinh;\n\nfunction asinh(x){\n  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));\n}\n\n// Tor Browser bug: Math.asinh(0) -> -0 \n$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', {asinh: asinh});","// 20.2.2.7 Math.atanh(x)\nvar $export = require('./_export')\n  , $atanh  = Math.atanh;\n\n// Tor Browser bug: Math.atanh(-0) -> 0 \n$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {\n  atanh: function atanh(x){\n    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;\n  }\n});","// 20.2.2.9 Math.cbrt(x)\nvar $export = require('./_export')\n  , sign    = require('./_math-sign');\n\n$export($export.S, 'Math', {\n  cbrt: function cbrt(x){\n    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);\n  }\n});","// 20.2.2.11 Math.clz32(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  clz32: function clz32(x){\n    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;\n  }\n});","// 20.2.2.14 Math.expm1(x)\nvar $export = require('./_export')\n  , $expm1  = require('./_math-expm1');\n\n$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', {expm1: $expm1});","// 20.2.2.16 Math.fround(x)\nvar $export   = require('./_export')\n  , sign      = require('./_math-sign')\n  , pow       = Math.pow\n  , EPSILON   = pow(2, -52)\n  , EPSILON32 = pow(2, -23)\n  , MAX32     = pow(2, 127) * (2 - EPSILON32)\n  , MIN32     = pow(2, -126);\n\nvar roundTiesToEven = function(n){\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\n\n$export($export.S, 'Math', {\n  fround: function fround(x){\n    var $abs  = Math.abs(x)\n      , $sign = sign(x)\n      , a, result;\n    if($abs < MIN32)return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n    a = (1 + EPSILON32 / EPSILON) * $abs;\n    result = a - (a - $abs);\n    if(result > MAX32 || result != result)return $sign * Infinity;\n    return $sign * result;\n  }\n});","// 20.2.2.12 Math.cosh(x)\nvar $export = require('./_export')\n  , exp     = Math.exp;\n\n$export($export.S, 'Math', {\n  cosh: function cosh(x){\n    return (exp(x = +x) + exp(-x)) / 2;\n  }\n});","// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])\nvar $export = require('./_export')\n  , abs     = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2){ // eslint-disable-line no-unused-vars\n    var sum  = 0\n      , i    = 0\n      , aLen = arguments.length\n      , larg = 0\n      , arg, div;\n    while(i < aLen){\n      arg = abs(arguments[i++]);\n      if(larg < arg){\n        div  = larg / arg;\n        sum  = sum * div * div + 1;\n        larg = arg;\n      } else if(arg > 0){\n        div  = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});","// 20.2.2.18 Math.imul(x, y)\nvar $export = require('./_export')\n  , $imul   = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * require('./_fails')(function(){\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y){\n    var UINT16 = 0xffff\n      , xn = +x\n      , yn = +y\n      , xl = UINT16 & xn\n      , yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});","// 20.2.2.21 Math.log10(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log10: function log10(x){\n    return Math.log(x) / Math.LN10;\n  }\n});","// 20.2.2.20 Math.log1p(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {log1p: require('./_math-log1p')});","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x){\n    return Math.log(x) / Math.LN2;\n  }\n});","// 20.2.2.28 Math.sign(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {sign: require('./_math-sign')});","// 20.2.2.30 Math.sinh(x)\nvar $export = require('./_export')\n  , expm1   = require('./_math-expm1')\n  , exp     = Math.exp;\n\n// V8 near Chromium 38 has a problem with very small numbers\n$export($export.S + $export.F * require('./_fails')(function(){\n  return !Math.sinh(-2e-17) != -2e-17;\n}), 'Math', {\n  sinh: function sinh(x){\n    return Math.abs(x = +x) < 1\n      ? (expm1(x) - expm1(-x)) / 2\n      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);\n  }\n});","// 20.2.2.33 Math.tanh(x)\nvar $export = require('./_export')\n  , expm1   = require('./_math-expm1')\n  , exp     = Math.exp;\n\n$export($export.S, 'Math', {\n  tanh: function tanh(x){\n    var a = expm1(x = +x)\n      , b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});","// 20.2.2.34 Math.trunc(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it){\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});","var $export        = require('./_export')\n  , toIndex        = require('./_to-index')\n  , fromCharCode   = String.fromCharCode\n  , $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x){ // eslint-disable-line no-unused-vars\n    var res  = []\n      , aLen = arguments.length\n      , i    = 0\n      , code;\n    while(aLen > i){\n      code = +arguments[i++];\n      if(toIndex(code, 0x10ffff) !== code)throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});","var $export   = require('./_export')\n  , toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length');\n\n$export($export.S, 'String', {\n  // 21.1.2.4 String.raw(callSite, ...substitutions)\n  raw: function raw(callSite){\n    var tpl  = toIObject(callSite.raw)\n      , len  = toLength(tpl.length)\n      , aLen = arguments.length\n      , res  = []\n      , i    = 0;\n    while(len > i){\n      res.push(String(tpl[i++]));\n      if(i < aLen)res.push(String(arguments[i]));\n    } return res.join('');\n  }\n});","'use strict';\nvar $export = require('./_export')\n  , $at     = require('./_string-at')(false);\n$export($export.P, 'String', {\n  // 21.1.3.3 String.prototype.codePointAt(pos)\n  codePointAt: function codePointAt(pos){\n    return $at(this, pos);\n  }\n});","'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function($trim){\n  return function trim(){\n    return $trim(this, 3);\n  };\n});","// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])\n'use strict';\nvar $export   = require('./_export')\n  , toLength  = require('./_to-length')\n  , context   = require('./_string-context')\n  , ENDS_WITH = 'endsWith'\n  , $endsWith = ''[ENDS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(ENDS_WITH), 'String', {\n  endsWith: function endsWith(searchString /*, endPosition = @length */){\n    var that = context(this, searchString, ENDS_WITH)\n      , endPosition = arguments.length > 1 ? arguments[1] : undefined\n      , len    = toLength(that.length)\n      , end    = endPosition === undefined ? len : Math.min(toLength(endPosition), len)\n      , search = String(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export  = require('./_export')\n  , context  = require('./_string-context')\n  , INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /*, position = 0 */){\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export     = require('./_export')\n  , toLength    = require('./_to-length')\n  , context     = require('./_string-context')\n  , STARTS_WITH = 'startsWith'\n  , $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /*, position = 0 */){\n    var that   = context(this, searchString, STARTS_WITH)\n      , index  = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length))\n      , search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function(createHTML){\n  return function anchor(name){\n    return createHTML(this, 'a', 'name', name);\n  }\n});","'use strict';\n// B.2.3.3 String.prototype.big()\nrequire('./_string-html')('big', function(createHTML){\n  return function big(){\n    return createHTML(this, 'big', '', '');\n  }\n});","'use strict';\n// B.2.3.4 String.prototype.blink()\nrequire('./_string-html')('blink', function(createHTML){\n  return function blink(){\n    return createHTML(this, 'blink', '', '');\n  }\n});","'use strict';\n// B.2.3.5 String.prototype.bold()\nrequire('./_string-html')('bold', function(createHTML){\n  return function bold(){\n    return createHTML(this, 'b', '', '');\n  }\n});","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function(createHTML){\n  return function fixed(){\n    return createHTML(this, 'tt', '', '');\n  }\n});","'use strict';\n// B.2.3.8 String.prototype.fontsize(size)\nrequire('./_string-html')('fontsize', function(createHTML){\n  return function fontsize(size){\n    return createHTML(this, 'font', 'size', size);\n  }\n});","'use strict';\n// B.2.3.7 String.prototype.fontcolor(color)\nrequire('./_string-html')('fontcolor', function(createHTML){\n  return function fontcolor(color){\n    return createHTML(this, 'font', 'color', color);\n  }\n});","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function(createHTML){\n  return function link(url){\n    return createHTML(this, 'a', 'href', url);\n  }\n});","'use strict';\n// B.2.3.9 String.prototype.italics()\nrequire('./_string-html')('italics', function(createHTML){\n  return function italics(){\n    return createHTML(this, 'i', '', '');\n  }\n});","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function(createHTML){\n  return function small(){\n    return createHTML(this, 'small', '', '');\n  }\n});","'use strict';\n// B.2.3.12 String.prototype.strike()\nrequire('./_string-html')('strike', function(createHTML){\n  return function strike(){\n    return createHTML(this, 'strike', '', '');\n  }\n});","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function(createHTML){\n  return function sub(){\n    return createHTML(this, 'sub', '', '');\n  }\n});","'use strict';\n// B.2.3.14 String.prototype.sup()\nrequire('./_string-html')('sup', function(createHTML){\n  return function sup(){\n    return createHTML(this, 'sup', '', '');\n  }\n});","// 20.3.3.1 / 15.9.4.4 Date.now()\r\nvar $export = require('./_export');\r\n\r\n$export($export.S, 'Date', {now: function(){ return new Date().getTime(); }});","var DateProto    = Date.prototype\n  , INVALID_DATE = 'Invalid Date'\n  , TO_STRING    = 'toString'\n  , $toString    = DateProto[TO_STRING]\n  , getTime      = DateProto.getTime;\nif(new Date(NaN) + '' != INVALID_DATE){\n  require('./_redefine')(DateProto, TO_STRING, function toString(){\n    var value = getTime.call(this);\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}","'use strict';\nvar $export     = require('./_export')\n  , toObject    = require('./_to-object')\n  , toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function(){\n  return new Date(NaN).toJSON() !== null || Date.prototype.toJSON.call({toISOString: function(){ return 1; }}) !== 1;\n}), 'Date', {\n  toJSON: function toJSON(key){\n    var O  = toObject(this)\n      , pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});","var TO_PRIMITIVE = require('./_wks')('toPrimitive')\r\n  , proto        = Date.prototype;\r\n\r\nif(!(TO_PRIMITIVE in proto))require('./_hide')(proto, TO_PRIMITIVE, require('./_date-to-primitive'));","'use strict';\r\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\r\nvar $export = require('./_export')\r\n  , fails   = require('./_fails')\r\n  , getTime = Date.prototype.getTime;\r\n\r\nvar lz = function(num){\r\n  return num > 9 ? num : '0' + num;\r\n};\r\n\r\n// PhantomJS / old WebKit has a broken implementations\r\n$export($export.P + $export.F * (fails(function(){\r\n  return new Date(-5e13 - 1).toISOString() != '0385-07-25T07:06:39.999Z';\r\n}) || !fails(function(){\r\n  new Date(NaN).toISOString();\r\n})), 'Date', {\r\n  toISOString: function toISOString(){\r\n    if(!isFinite(getTime.call(this)))throw RangeError('Invalid time value');\r\n    var d = this\r\n      , y = d.getUTCFullYear()\r\n      , m = d.getUTCMilliseconds()\r\n      , s = y < 0 ? '-' : y > 9999 ? '+' : '';\r\n    return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\r\n      '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\r\n      'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\r\n      ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\r\n  }\r\n});","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\r\nvar $export = require('./_export');\r\n\r\n$export($export.S, 'Array', {isArray: require('./_is-array')});","'use strict';\r\nvar $export    = require('./_export')\r\n  , html       = require('./_html')\r\n  , cof        = require('./_cof')\r\n  , toIndex    = require('./_to-index')\r\n  , toLength   = require('./_to-length')\r\n  , arraySlice = [].slice;\r\n\r\n// fallback for not array-like ES3 strings and DOM objects\r\n$export($export.P + $export.F * require('./_fails')(function(){\r\n  if(html)arraySlice.call(html);\r\n}), 'Array', {\r\n  slice: function slice(begin, end){\r\n    var len   = toLength(this.length)\r\n      , klass = cof(this);\r\n    end = end === undefined ? len : end;\r\n    if(klass == 'Array')return arraySlice.call(this, begin, end);\r\n    var start  = toIndex(begin, len)\r\n      , upTo   = toIndex(end, len)\r\n      , size   = toLength(upTo - start)\r\n      , cloned = Array(size)\r\n      , i      = 0;\r\n    for(; i < size; i++)cloned[i] = klass == 'String'\r\n      ? this.charAt(start + i)\r\n      : this[start + i];\r\n    return cloned;\r\n  }\r\n});","'use strict';\nvar $export        = require('./_export')\n  , createProperty = require('./_create-property');\n\n// WebKit Array.of isn't generic\n$export($export.S + $export.F * require('./_fails')(function(){\n  function F(){}\n  return !(Array.of.call(F) instanceof F);\n}), 'Array', {\n  // 22.1.2.3 Array.of( ...items)\n  of: function of(/* ...args */){\n    var index  = 0\n      , aLen   = arguments.length\n      , result = new (typeof this == 'function' ? this : Array)(aLen);\n    while(aLen > index)createProperty(result, index, arguments[index++]);\n    result.length = aLen;\n    return result;\n  }\n});","'use strict';\r\n// 22.1.3.13 Array.prototype.join(separator)\r\nvar $export   = require('./_export')\r\n  , toIObject = require('./_to-iobject')\r\n  , arrayJoin = [].join;\r\n\r\n// fallback for not array-like strings\r\n$export($export.P + $export.F * (require('./_iobject') != Object || !require('./_strict-method')(arrayJoin)), 'Array', {\r\n  join: function join(separator){\r\n    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);\r\n  }\r\n});","'use strict';\r\nvar $export  = require('./_export')\r\n  , $forEach = require('./_array-methods')(0)\r\n  , STRICT   = require('./_strict-method')([].forEach, true);\r\n\r\n$export($export.P + $export.F * !STRICT, 'Array', {\r\n  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\r\n  forEach: function forEach(callbackfn /* , thisArg */){\r\n    return $forEach(this, callbackfn, arguments[1]);\r\n  }\r\n});","'use strict';\r\nvar $export   = require('./_export')\r\n  , aFunction = require('./_a-function')\r\n  , toObject  = require('./_to-object')\r\n  , fails     = require('./_fails')\r\n  , $sort     = [].sort\r\n  , test      = [1, 2, 3];\r\n\r\n$export($export.P + $export.F * (fails(function(){\r\n  // IE8-\r\n  test.sort(undefined);\r\n}) || !fails(function(){\r\n  // V8 bug\r\n  test.sort(null);\r\n  // Old WebKit\r\n}) || !require('./_strict-method')($sort)), 'Array', {\r\n  // 22.1.3.25 Array.prototype.sort(comparefn)\r\n  sort: function sort(comparefn){\r\n    return comparefn === undefined\r\n      ? $sort.call(toObject(this))\r\n      : $sort.call(toObject(this), aFunction(comparefn));\r\n  }\r\n});","'use strict';\r\nvar $export = require('./_export')\r\n  , $map    = require('./_array-methods')(1);\r\n\r\n$export($export.P + $export.F * !require('./_strict-method')([].map, true), 'Array', {\r\n  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])\r\n  map: function map(callbackfn /* , thisArg */){\r\n    return $map(this, callbackfn, arguments[1]);\r\n  }\r\n});","'use strict';\nvar $export = require('./_export')\n  , $filter = require('./_array-methods')(2);\n\n$export($export.P + $export.F * !require('./_strict-method')([].filter, true), 'Array', {\n  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])\n  filter: function filter(callbackfn /* , thisArg */){\n    return $filter(this, callbackfn, arguments[1]);\n  }\n});","'use strict';\r\nvar $export = require('./_export')\r\n  , $some   = require('./_array-methods')(3);\r\n\r\n$export($export.P + $export.F * !require('./_strict-method')([].some, true), 'Array', {\r\n  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])\r\n  some: function some(callbackfn /* , thisArg */){\r\n    return $some(this, callbackfn, arguments[1]);\r\n  }\r\n});","'use strict';\r\nvar $export = require('./_export')\r\n  , $every  = require('./_array-methods')(4);\r\n\r\n$export($export.P + $export.F * !require('./_strict-method')([].every, true), 'Array', {\r\n  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])\r\n  every: function every(callbackfn /* , thisArg */){\r\n    return $every(this, callbackfn, arguments[1]);\r\n  }\r\n});","'use strict';\r\nvar $export = require('./_export')\r\n  , $reduce = require('./_array-reduce');\r\n\r\n$export($export.P + $export.F * !require('./_strict-method')([].reduce, true), 'Array', {\r\n  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])\r\n  reduce: function reduce(callbackfn /* , initialValue */){\r\n    return $reduce(this, callbackfn, arguments.length, arguments[1], false);\r\n  }\r\n});","'use strict';\r\nvar $export = require('./_export')\r\n  , $reduce = require('./_array-reduce');\r\n\r\n$export($export.P + $export.F * !require('./_strict-method')([].reduceRight, true), 'Array', {\r\n  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])\r\n  reduceRight: function reduceRight(callbackfn /* , initialValue */){\r\n    return $reduce(this, callbackfn, arguments.length, arguments[1], true);\r\n  }\r\n});","'use strict';\r\nvar $export       = require('./_export')\r\n  , $indexOf      = require('./_array-includes')(false)\r\n  , $native       = [].indexOf\r\n  , NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;\r\n\r\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\r\n  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])\r\n  indexOf: function indexOf(searchElement /*, fromIndex = 0 */){\r\n    return NEGATIVE_ZERO\r\n      // convert -0 to +0\r\n      ? $native.apply(this, arguments) || 0\r\n      : $indexOf(this, searchElement, arguments[1]);\r\n  }\r\n});","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export')\n  , $find   = require('./_array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);","'use strict';\r\nvar $export       = require('./_export')\r\n  , toIObject     = require('./_to-iobject')\r\n  , toInteger     = require('./_to-integer')\r\n  , toLength      = require('./_to-length')\r\n  , $native       = [].lastIndexOf\r\n  , NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\r\n\r\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\r\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\r\n  lastIndexOf: function lastIndexOf(searchElement /*, fromIndex = @[*-1] */){\r\n    // convert -0 to +0\r\n    if(NEGATIVE_ZERO)return $native.apply(this, arguments) || 0;\r\n    var O      = toIObject(this)\r\n      , length = toLength(O.length)\r\n      , index  = length - 1;\r\n    if(arguments.length > 1)index = Math.min(index, toInteger(arguments[1]));\r\n    if(index < 0)index = length + index;\r\n    for(;index >= 0; index--)if(index in O)if(O[index] === searchElement)return index || 0;\r\n    return -1;\r\n  }\r\n});","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', {fill: require('./_array-fill')});\n\nrequire('./_add-to-unscopables')('fill');","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export')\n  , $find   = require('./_array-methods')(6)\n  , KEY     = 'findIndex'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', {copyWithin: require('./_array-copy-within')});\n\nrequire('./_add-to-unscopables')('copyWithin');","var global            = require('./_global')\n  , inheritIfRequired = require('./_inherit-if-required')\n  , dP                = require('./_object-dp').f\n  , gOPN              = require('./_object-gopn').f\n  , isRegExp          = require('./_is-regexp')\n  , $flags            = require('./_flags')\n  , $RegExp           = global.RegExp\n  , Base              = $RegExp\n  , proto             = $RegExp.prototype\n  , re1               = /a/g\n  , re2               = /a/g\n  // \"new\" creates a new object, old webkit buggy here\n  , CORRECT_NEW       = new $RegExp(re1) !== re1;\n\nif(require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function(){\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))){\n  $RegExp = function RegExp(p, f){\n    var tiRE = this instanceof $RegExp\n      , piRE = isRegExp(p)\n      , fiU  = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function(key){\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function(){ return Base[key]; },\n      set: function(it){ Base[key] = it; }\n    });\n  };\n  for(var keys = gOPN(Base), i = 0; keys.length > i; )proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');","require('./_set-species')('Array');","'use strict';\r\nrequire('./es6.regexp.flags');\r\nvar anObject    = require('./_an-object')\r\n  , $flags      = require('./_flags')\r\n  , DESCRIPTORS = require('./_descriptors')\r\n  , TO_STRING   = 'toString'\r\n  , $toString   = /./[TO_STRING];\r\n\r\nvar define = function(fn){\r\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\r\n};\r\n\r\n// 21.2.5.14 RegExp.prototype.toString()\r\nif(require('./_fails')(function(){ return $toString.call({source: 'a', flags: 'b'}) != '/a/b'; })){\r\n  define(function toString(){\r\n    var R = anObject(this);\r\n    return '/'.concat(R.source, '/',\r\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\r\n  });\r\n// FF44- RegExp#toString has a wrong name\r\n} else if($toString.name != TO_STRING){\r\n  define(function toString(){\r\n    return $toString.call(this);\r\n  });\r\n}","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');","// 21.2.5.3 get RegExp.prototype.flags()\nif(require('./_descriptors') && /./g.flags != 'g')require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});","// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function(defined, REPLACE, $replace){\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue){\n    'use strict';\n    var O  = defined(this)\n      , fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});","// @@match logic\nrequire('./_fix-re-wks')('match', 1, function(defined, MATCH, $match){\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});","// @@search logic\nrequire('./_fix-re-wks')('search', 1, function(defined, SEARCH, $search){\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , anObject           = require('./_an-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , setProto           = require('./_set-proto').set\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);","// @@split logic\nrequire('./_fix-re-wks')('split', 2, function(defined, SPLIT, $split){\n  'use strict';\n  var isRegExp   = require('./_is-regexp')\n    , _split     = $split\n    , $push      = [].push\n    , $SPLIT     = 'split'\n    , LENGTH     = 'length'\n    , LAST_INDEX = 'lastIndex';\n  if(\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ){\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function(separator, limit){\n      var string = String(this);\n      if(separator === undefined && limit === 0)return [];\n      // If `separator` is not a regex, use native split\n      if(!isRegExp(separator))return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if(!NPCG)separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while(match = separatorCopy.exec(string)){\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if(lastIndex > lastLastIndex){\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          if(!NPCG && match[LENGTH] > 1)match[0].replace(separator2, function(){\n            for(i = 1; i < arguments[LENGTH] - 2; i++)if(arguments[i] === undefined)match[i] = undefined;\n          });\n          if(match[LENGTH] > 1 && match.index < string[LENGTH])$push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if(output[LENGTH] >= splitLimit)break;\n        }\n        if(separatorCopy[LAST_INDEX] === match.index)separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if(lastLastIndex === string[LENGTH]){\n        if(lastLength || !separatorCopy.test(''))output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if('0'[$SPLIT](undefined, 0)[LENGTH]){\n    $split = function(separator, limit){\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit){\n    var O  = defined(this)\n      , fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);","'use strict';\nvar each         = require('./_array-methods')(0)\n  , redefine     = require('./_redefine')\n  , meta         = require('./_meta')\n  , assign       = require('./_object-assign')\n  , weak         = require('./_collection-weak')\n  , isObject     = require('./_is-object')\n  , has          = require('./_has')\n  , getWeak      = meta.getWeak\n  , isExtensible = Object.isExtensible\n  , uncaughtFrozenStore = weak.ufstore\n  , tmp          = {}\n  , InternalMap;\n\nvar wrapper = function(get){\n  return function WeakMap(){\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key){\n    if(isObject(key)){\n      var data = getWeak(key);\n      if(data === true)return uncaughtFrozenStore(this).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value){\n    return weak.def(this, key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')('WeakMap', wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif(new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7){\n  InternalMap = weak.getConstructor(wrapper);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function(key){\n    var proto  = $WeakMap.prototype\n      , method = proto[key];\n    redefine(proto, key, function(a, b){\n      // store frozen objects on internal weakmap shim\n      if(isObject(a) && !isExtensible(a)){\n        if(!this._f)this._f = new InternalMap;\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}","'use strict';\nvar weak = require('./_collection-weak');\n\n// 23.4 WeakSet Objects\nrequire('./_collection')('WeakSet', function(get){\n  return function WeakSet(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.4.3.1 WeakSet.prototype.add(value)\n  add: function add(value){\n    return weak.def(this, value, true);\n  }\n}, weak, false, true);","'use strict';\nvar $export      = require('./_export')\n  , $typed       = require('./_typed')\n  , buffer       = require('./_typed-buffer')\n  , anObject     = require('./_an-object')\n  , toIndex      = require('./_to-index')\n  , toLength     = require('./_to-length')\n  , isObject     = require('./_is-object')\n  , TYPED_ARRAY  = require('./_wks')('typed_array')\n  , ArrayBuffer  = require('./_global').ArrayBuffer\n  , speciesConstructor = require('./_species-constructor')\n  , $ArrayBuffer = buffer.ArrayBuffer\n  , $DataView    = buffer.DataView\n  , $isView      = $typed.ABV && ArrayBuffer.isView\n  , $slice       = $ArrayBuffer.prototype.slice\n  , VIEW         = $typed.VIEW\n  , ARRAY_BUFFER = 'ArrayBuffer';\n\n$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), {ArrayBuffer: $ArrayBuffer});\n\n$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {\n  // 24.1.3.1 ArrayBuffer.isView(arg)\n  isView: function isView(it){\n    return $isView && $isView(it) || isObject(it) && VIEW in it;\n  }\n});\n\n$export($export.P + $export.U + $export.F * require('./_fails')(function(){\n  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;\n}), ARRAY_BUFFER, {\n  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)\n  slice: function slice(start, end){\n    if($slice !== undefined && end === undefined)return $slice.call(anObject(this), start); // FF fix\n    var len    = anObject(this).byteLength\n      , first  = toIndex(start, len)\n      , final  = toIndex(end === undefined ? len : end, len)\n      , result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first))\n      , viewS  = new $DataView(this)\n      , viewT  = new $DataView(result)\n      , index  = 0;\n    while(first < final){\n      viewT.setUint8(index++, viewS.getUint8(first++));\n    } return result;\n  }\n});\n\nrequire('./_set-species')(ARRAY_BUFFER);","require('./_typed-array')('Int8', 1, function(init){\n  return function Int8Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});","require('./_typed-array')('Uint8', 1, function(init){\n  return function Uint8Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","require('./_typed-array')('Uint8', 1, function(init){\n  return function Uint8ClampedArray(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n}, true);","require('./_typed-array')('Int16', 2, function(init){\n  return function Int16Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","require('./_typed-array')('Uint16', 2, function(init){\n  return function Uint16Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","require('./_typed-array')('Int32', 4, function(init){\n  return function Int32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","require('./_typed-array')('Uint32', 4, function(init){\n  return function Uint32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export   = require('./_export')\n  , aFunction = require('./_a-function')\n  , anObject  = require('./_an-object')\n  , _apply    = Function.apply;\n\n$export($export.S, 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList){\n    return _apply.call(aFunction(target), thisArgument, anObject(argumentsList));\n  }\n});","require('./_typed-array')('Float64', 8, function(init){\n  return function Float64Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export   = require('./_export')\n  , create    = require('./_object-create')\n  , aFunction = require('./_a-function')\n  , anObject  = require('./_an-object')\n  , isObject  = require('./_is-object')\n  , bind      = require('./_bind');\n\n// MS Edge supports only 2 arguments\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\n$export($export.S + $export.F * require('./_fails')(function(){\n  function F(){}\n  return !(Reflect.construct(function(){}, [], F) instanceof F);\n}), 'Reflect', {\n  construct: function construct(Target, args /*, newTarget*/){\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if(Target == newTarget){\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch(args.length){\n        case 0: return new Target;\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args));\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto    = newTarget.prototype\n      , instance = create(isObject(proto) ? proto : Object.prototype)\n      , result   = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});","// 26.1.4 Reflect.deleteProperty(target, propertyKey)\nvar $export  = require('./_export')\n  , gOPD     = require('./_object-gopd').f\n  , anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  deleteProperty: function deleteProperty(target, propertyKey){\n    var desc = gOPD(anObject(target), propertyKey);\n    return desc && !desc.configurable ? false : delete target[propertyKey];\n  }\n});","// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)\nvar dP          = require('./_object-dp')\n  , $export     = require('./_export')\n  , anObject    = require('./_an-object')\n  , toPrimitive = require('./_to-primitive');\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\n$export($export.S + $export.F * require('./_fails')(function(){\n  Reflect.defineProperty(dP.f({}, 1, {value: 1}), 1, {value: 2});\n}), 'Reflect', {\n  defineProperty: function defineProperty(target, propertyKey, attributes){\n    anObject(target);\n    propertyKey = toPrimitive(propertyKey, true);\n    anObject(attributes);\n    try {\n      dP.f(target, propertyKey, attributes);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});","'use strict';\n// 26.1.5 Reflect.enumerate(target)\nvar $export  = require('./_export')\n  , anObject = require('./_an-object');\nvar Enumerate = function(iterated){\n  this._t = anObject(iterated); // target\n  this._i = 0;                  // next index\n  var keys = this._k = []       // keys\n    , key;\n  for(key in iterated)keys.push(key);\n};\nrequire('./_iter-create')(Enumerate, 'Object', function(){\n  var that = this\n    , keys = that._k\n    , key;\n  do {\n    if(that._i >= keys.length)return {value: undefined, done: true};\n  } while(!((key = keys[that._i++]) in that._t));\n  return {value: key, done: false};\n});\n\n$export($export.S, 'Reflect', {\n  enumerate: function enumerate(target){\n    return new Enumerate(target);\n  }\n});","// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD           = require('./_object-gopd')\n  , getPrototypeOf = require('./_object-gpo')\n  , has            = require('./_has')\n  , $export        = require('./_export')\n  , isObject       = require('./_is-object')\n  , anObject       = require('./_an-object');\n\nfunction get(target, propertyKey/*, receiver*/){\n  var receiver = arguments.length < 3 ? target : arguments[2]\n    , desc, proto;\n  if(anObject(target) === receiver)return target[propertyKey];\n  if(desc = gOPD.f(target, propertyKey))return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if(isObject(proto = getPrototypeOf(target)))return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', {get: get});","// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)\nvar gOPD     = require('./_object-gopd')\n  , $export  = require('./_export')\n  , anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey){\n    return gOPD.f(anObject(target), propertyKey);\n  }\n});","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey){\n    return propertyKey in target;\n  }\n});","// 26.1.8 Reflect.getPrototypeOf(target)\nvar $export  = require('./_export')\n  , getProto = require('./_object-gpo')\n  , anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getPrototypeOf: function getPrototypeOf(target){\n    return getProto(anObject(target));\n  }\n});","// 26.1.10 Reflect.isExtensible(target)\nvar $export       = require('./_export')\n  , anObject      = require('./_an-object')\n  , $isExtensible = Object.isExtensible;\n\n$export($export.S, 'Reflect', {\n  isExtensible: function isExtensible(target){\n    anObject(target);\n    return $isExtensible ? $isExtensible(target) : true;\n  }\n});","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {ownKeys: require('./_own-keys')});","// 26.1.12 Reflect.preventExtensions(target)\nvar $export            = require('./_export')\n  , anObject           = require('./_an-object')\n  , $preventExtensions = Object.preventExtensions;\n\n$export($export.S, 'Reflect', {\n  preventExtensions: function preventExtensions(target){\n    anObject(target);\n    try {\n      if($preventExtensions)$preventExtensions(target);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP             = require('./_object-dp')\n  , gOPD           = require('./_object-gopd')\n  , getPrototypeOf = require('./_object-gpo')\n  , has            = require('./_has')\n  , $export        = require('./_export')\n  , createDesc     = require('./_property-desc')\n  , anObject       = require('./_an-object')\n  , isObject       = require('./_is-object');\n\nfunction set(target, propertyKey, V/*, receiver*/){\n  var receiver = arguments.length < 4 ? target : arguments[3]\n    , ownDesc  = gOPD.f(anObject(target), propertyKey)\n    , existingDescriptor, proto;\n  if(!ownDesc){\n    if(isObject(proto = getPrototypeOf(target))){\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if(has(ownDesc, 'value')){\n    if(ownDesc.writable === false || !isObject(receiver))return false;\n    existingDescriptor = gOPD.f(receiver, propertyKey) || createDesc(0);\n    existingDescriptor.value = V;\n    dP.f(receiver, propertyKey, existingDescriptor);\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', {set: set});","// 26.1.14 Reflect.setPrototypeOf(target, proto)\nvar $export  = require('./_export')\n  , setProto = require('./_set-proto');\n\nif(setProto)$export($export.S, 'Reflect', {\n  setPrototypeOf: function setPrototypeOf(target, proto){\n    setProto.check(target, proto);\n    try {\n      setProto.set(target, proto);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});","'use strict';\n// https://github.com/mathiasbynens/String.prototype.at\nvar $export = require('./_export')\n  , $at     = require('./_string-at')(true);\n\n$export($export.P, 'String', {\n  at: function at(pos){\n    return $at(this, pos);\n  }\n});","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export   = require('./_export')\n  , $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /*, fromIndex = 0 */){\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export')\n  , $pad    = require('./_string-pad');\n\n$export($export.P, 'String', {\n  padEnd: function padEnd(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);\n  }\n});","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export')\n  , $pad    = require('./_string-pad');\n\n$export($export.P, 'String', {\n  padStart: function padStart(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimLeft', function($trim){\n  return function trimLeft(){\n    return $trim(this, 1);\n  };\n}, 'trimStart');","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimRight', function($trim){\n  return function trimRight(){\n    return $trim(this, 2);\n  };\n}, 'trimEnd');","'use strict';\r\n// https://tc39.github.io/String.prototype.matchAll/\r\nvar $export     = require('./_export')\r\n  , defined     = require('./_defined')\r\n  , toLength    = require('./_to-length')\r\n  , isRegExp    = require('./_is-regexp')\r\n  , getFlags    = require('./_flags')\r\n  , RegExpProto = RegExp.prototype;\r\n\r\nvar $RegExpStringIterator = function(regexp, string){\r\n  this._r = regexp;\r\n  this._s = string;\r\n};\r\n\r\nrequire('./_iter-create')($RegExpStringIterator, 'RegExp String', function next(){\r\n  var match = this._r.exec(this._s);\r\n  return {value: match, done: match === null};\r\n});\r\n\r\n$export($export.P, 'String', {\r\n  matchAll: function matchAll(regexp){\r\n    defined(this);\r\n    if(!isRegExp(regexp))throw TypeError(regexp + ' is not a regexp!');\r\n    var S     = String(this)\r\n      , flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp)\r\n      , rx    = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);\r\n    rx.lastIndex = toLength(regexp.lastIndex);\r\n    return new $RegExpStringIterator(rx, S);\r\n  }\r\n});","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export        = require('./_export')\n  , ownKeys        = require('./_own-keys')\n  , toIObject      = require('./_to-iobject')\n  , gOPD           = require('./_object-gopd')\n  , createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object){\n    var O       = toIObject(object)\n      , getDesc = gOPD.f\n      , keys    = ownKeys(O)\n      , result  = {}\n      , i       = 0\n      , key, D;\n    while(keys.length > i)createProperty(result, key = keys[i++], getDesc(O, key));\n    return result;\n  }\n});","require('./_wks-define')('asyncIterator');","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export')\n  , $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it){\n    return $values(it);\n  }\n});","'use strict';\r\nvar $export         = require('./_export')\r\n  , toObject        = require('./_to-object')\r\n  , aFunction       = require('./_a-function')\r\n  , $defineProperty = require('./_object-dp');\r\n\r\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\r\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\r\n  __defineGetter__: function __defineGetter__(P, getter){\r\n    $defineProperty.f(toObject(this), P, {get: aFunction(getter), enumerable: true, configurable: true});\r\n  }\r\n});","require('./_typed-array')('Float32', 4, function(init){\n  return function Float32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});","// https://github.com/tc39/proposal-object-values-entries\nvar $export  = require('./_export')\n  , $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it){\n    return $entries(it);\n  }\n});","require('./_wks-define')('observable');","'use strict';\r\nvar $export         = require('./_export')\r\n  , toObject        = require('./_to-object')\r\n  , aFunction       = require('./_a-function')\r\n  , $defineProperty = require('./_object-dp');\r\n\r\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\r\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\r\n  __defineSetter__: function __defineSetter__(P, setter){\r\n    $defineProperty.f(toObject(this), P, {set: aFunction(setter), enumerable: true, configurable: true});\r\n  }\r\n});","'use strict';\r\nvar $export                  = require('./_export')\r\n  , toObject                 = require('./_to-object')\r\n  , toPrimitive              = require('./_to-primitive')\r\n  , getPrototypeOf           = require('./_object-gpo')\r\n  , getOwnPropertyDescriptor = require('./_object-gopd').f;\r\n\r\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\r\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\r\n  __lookupSetter__: function __lookupSetter__(P){\r\n    var O = toObject(this)\r\n      , K = toPrimitive(P, true)\r\n      , D;\r\n    do {\r\n      if(D = getOwnPropertyDescriptor(O, K))return D.set;\r\n    } while(O = getPrototypeOf(O));\r\n  }\r\n});","'use strict';\r\nvar $export                  = require('./_export')\r\n  , toObject                 = require('./_to-object')\r\n  , toPrimitive              = require('./_to-primitive')\r\n  , getPrototypeOf           = require('./_object-gpo')\r\n  , getOwnPropertyDescriptor = require('./_object-gopd').f;\r\n\r\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\r\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\r\n  __lookupGetter__: function __lookupGetter__(P){\r\n    var O = toObject(this)\r\n      , K = toPrimitive(P, true)\r\n      , D;\r\n    do {\r\n      if(D = getOwnPropertyDescriptor(O, K))return D.get;\r\n    } while(O = getPrototypeOf(O));\r\n  }\r\n});","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Set', {toJSON: require('./_collection-to-json')('Set')});","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});","// https://github.com/ljharb/proposal-global\nvar $export = require('./_export');\n\n$export($export.S, 'System', {global: require('./_global')});","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  iaddh: function iaddh(x0, x1, y0, y1){\n    var $x0 = x0 >>> 0\n      , $x1 = x1 >>> 0\n      , $y0 = y0 >>> 0;\n    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;\n  }\n});","// https://github.com/ljharb/proposal-is-error\nvar $export = require('./_export')\n  , cof     = require('./_cof');\n\n$export($export.S, 'Error', {\n  isError: function isError(it){\n    return cof(it) === 'Error';\n  }\n});","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  isubh: function isubh(x0, x1, y0, y1){\n    var $x0 = x0 >>> 0\n      , $x1 = x1 >>> 0\n      , $y0 = y0 >>> 0;\n    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;\n  }\n});","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  umulh: function umulh(u, v){\n    var UINT16 = 0xffff\n      , $u = +u\n      , $v = +v\n      , u0 = $u & UINT16\n      , v0 = $v & UINT16\n      , u1 = $u >>> 16\n      , v1 = $v >>> 16\n      , t  = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);\n  }\n});","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  imulh: function imulh(u, v){\n    var UINT16 = 0xffff\n      , $u = +u\n      , $v = +v\n      , u0 = $u & UINT16\n      , v0 = $v & UINT16\n      , u1 = $u >> 16\n      , v1 = $v >> 16\n      , t  = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);\n  }\n});","var metadata                  = require('./_metadata')\n  , anObject                  = require('./_an-object')\n  , toMetaKey                 = metadata.key\n  , ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey){\n  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));\n}});","var metadata               = require('./_metadata')\n  , anObject               = require('./_an-object')\n  , toMetaKey              = metadata.key\n  , getOrCreateMetadataMap = metadata.map\n  , store                  = metadata.store;\n\nmetadata.exp({deleteMetadata: function deleteMetadata(metadataKey, target /*, targetKey */){\n  var targetKey   = arguments.length < 3 ? undefined : toMetaKey(arguments[2])\n    , metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n  if(metadataMap === undefined || !metadataMap['delete'](metadataKey))return false;\n  if(metadataMap.size)return true;\n  var targetMetadata = store.get(target);\n  targetMetadata['delete'](targetKey);\n  return !!targetMetadata.size || store['delete'](target);\n}});","var metadata               = require('./_metadata')\n  , anObject               = require('./_an-object')\n  , ordinaryGetOwnMetadata = metadata.get\n  , toMetaKey              = metadata.key;\n\nmetadata.exp({getOwnMetadata: function getOwnMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryGetOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});","var metadata               = require('./_metadata')\n  , anObject               = require('./_an-object')\n  , getPrototypeOf         = require('./_object-gpo')\n  , ordinaryHasOwnMetadata = metadata.has\n  , ordinaryGetOwnMetadata = metadata.get\n  , toMetaKey              = metadata.key;\n\nvar ordinaryGetMetadata = function(MetadataKey, O, P){\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\nmetadata.exp({getMetadata: function getMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});","var metadata                = require('./_metadata')\n  , anObject                = require('./_an-object')\n  , ordinaryOwnMetadataKeys = metadata.keys\n  , toMetaKey               = metadata.key;\n\nmetadata.exp({getOwnMetadataKeys: function getOwnMetadataKeys(target /*, targetKey */){\n  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n}});","var Set                     = require('./es6.set')\n  , from                    = require('./_array-from-iterable')\n  , metadata                = require('./_metadata')\n  , anObject                = require('./_an-object')\n  , getPrototypeOf          = require('./_object-gpo')\n  , ordinaryOwnMetadataKeys = metadata.keys\n  , toMetaKey               = metadata.key;\n\nvar ordinaryMetadataKeys = function(O, P){\n  var oKeys  = ordinaryOwnMetadataKeys(O, P)\n    , parent = getPrototypeOf(O);\n  if(parent === null)return oKeys;\n  var pKeys  = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;\n};\n\nmetadata.exp({getMetadataKeys: function getMetadataKeys(target /*, targetKey */){\n  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n}});","var metadata               = require('./_metadata')\n  , anObject               = require('./_an-object')\n  , getPrototypeOf         = require('./_object-gpo')\n  , ordinaryHasOwnMetadata = metadata.has\n  , toMetaKey              = metadata.key;\n\nvar ordinaryHasMetadata = function(MetadataKey, O, P){\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if(hasOwn)return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\nmetadata.exp({hasMetadata: function hasMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});","var metadata               = require('./_metadata')\n  , anObject               = require('./_an-object')\n  , ordinaryHasOwnMetadata = metadata.has\n  , toMetaKey              = metadata.key;\n\nmetadata.exp({hasOwnMetadata: function hasOwnMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryHasOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});","'use strict';\r\n// https://github.com/zenparsing/es-observable\r\nvar $export     = require('./_export')\r\n  , global      = require('./_global')\r\n  , core        = require('./_core')\r\n  , microtask   = require('./_microtask')()\r\n  , OBSERVABLE  = require('./_wks')('observable')\r\n  , aFunction   = require('./_a-function')\r\n  , anObject    = require('./_an-object')\r\n  , anInstance  = require('./_an-instance')\r\n  , redefineAll = require('./_redefine-all')\r\n  , hide        = require('./_hide')\r\n  , forOf       = require('./_for-of')\r\n  , RETURN      = forOf.RETURN;\r\n\r\nvar getMethod = function(fn){\r\n  return fn == null ? undefined : aFunction(fn);\r\n};\r\n\r\nvar cleanupSubscription = function(subscription){\r\n  var cleanup = subscription._c;\r\n  if(cleanup){\r\n    subscription._c = undefined;\r\n    cleanup();\r\n  }\r\n};\r\n\r\nvar subscriptionClosed = function(subscription){\r\n  return subscription._o === undefined;\r\n};\r\n\r\nvar closeSubscription = function(subscription){\r\n  if(!subscriptionClosed(subscription)){\r\n    subscription._o = undefined;\r\n    cleanupSubscription(subscription);\r\n  }\r\n};\r\n\r\nvar Subscription = function(observer, subscriber){\r\n  anObject(observer);\r\n  this._c = undefined;\r\n  this._o = observer;\r\n  observer = new SubscriptionObserver(this);\r\n  try {\r\n    var cleanup      = subscriber(observer)\r\n      , subscription = cleanup;\r\n    if(cleanup != null){\r\n      if(typeof cleanup.unsubscribe === 'function')cleanup = function(){ subscription.unsubscribe(); };\r\n      else aFunction(cleanup);\r\n      this._c = cleanup;\r\n    }\r\n  } catch(e){\r\n    observer.error(e);\r\n    return;\r\n  } if(subscriptionClosed(this))cleanupSubscription(this);\r\n};\r\n\r\nSubscription.prototype = redefineAll({}, {\r\n  unsubscribe: function unsubscribe(){ closeSubscription(this); }\r\n});\r\n\r\nvar SubscriptionObserver = function(subscription){\r\n  this._s = subscription;\r\n};\r\n\r\nSubscriptionObserver.prototype = redefineAll({}, {\r\n  next: function next(value){\r\n    var subscription = this._s;\r\n    if(!subscriptionClosed(subscription)){\r\n      var observer = subscription._o;\r\n      try {\r\n        var m = getMethod(observer.next);\r\n        if(m)return m.call(observer, value);\r\n      } catch(e){\r\n        try {\r\n          closeSubscription(subscription);\r\n        } finally {\r\n          throw e;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  error: function error(value){\r\n    var subscription = this._s;\r\n    if(subscriptionClosed(subscription))throw value;\r\n    var observer = subscription._o;\r\n    subscription._o = undefined;\r\n    try {\r\n      var m = getMethod(observer.error);\r\n      if(!m)throw value;\r\n      value = m.call(observer, value);\r\n    } catch(e){\r\n      try {\r\n        cleanupSubscription(subscription);\r\n      } finally {\r\n        throw e;\r\n      }\r\n    } cleanupSubscription(subscription);\r\n    return value;\r\n  },\r\n  complete: function complete(value){\r\n    var subscription = this._s;\r\n    if(!subscriptionClosed(subscription)){\r\n      var observer = subscription._o;\r\n      subscription._o = undefined;\r\n      try {\r\n        var m = getMethod(observer.complete);\r\n        value = m ? m.call(observer, value) : undefined;\r\n      } catch(e){\r\n        try {\r\n          cleanupSubscription(subscription);\r\n        } finally {\r\n          throw e;\r\n        }\r\n      } cleanupSubscription(subscription);\r\n      return value;\r\n    }\r\n  }\r\n});\r\n\r\nvar $Observable = function Observable(subscriber){\r\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\r\n};\r\n\r\nredefineAll($Observable.prototype, {\r\n  subscribe: function subscribe(observer){\r\n    return new Subscription(observer, this._f);\r\n  },\r\n  forEach: function forEach(fn){\r\n    var that = this;\r\n    return new (core.Promise || global.Promise)(function(resolve, reject){\r\n      aFunction(fn);\r\n      var subscription = that.subscribe({\r\n        next : function(value){\r\n          try {\r\n            return fn(value);\r\n          } catch(e){\r\n            reject(e);\r\n            subscription.unsubscribe();\r\n          }\r\n        },\r\n        error: reject,\r\n        complete: resolve\r\n      });\r\n    });\r\n  }\r\n});\r\n\r\nredefineAll($Observable, {\r\n  from: function from(x){\r\n    var C = typeof this === 'function' ? this : $Observable;\r\n    var method = getMethod(anObject(x)[OBSERVABLE]);\r\n    if(method){\r\n      var observable = anObject(method.call(x));\r\n      return observable.constructor === C ? observable : new C(function(observer){\r\n        return observable.subscribe(observer);\r\n      });\r\n    }\r\n    return new C(function(observer){\r\n      var done = false;\r\n      microtask(function(){\r\n        if(!done){\r\n          try {\r\n            if(forOf(x, false, function(it){\r\n              observer.next(it);\r\n              if(done)return RETURN;\r\n            }) === RETURN)return;\r\n          } catch(e){\r\n            if(done)throw e;\r\n            observer.error(e);\r\n            return;\r\n          } observer.complete();\r\n        }\r\n      });\r\n      return function(){ done = true; };\r\n    });\r\n  },\r\n  of: function of(){\r\n    for(var i = 0, l = arguments.length, items = Array(l); i < l;)items[i] = arguments[i++];\r\n    return new (typeof this === 'function' ? this : $Observable)(function(observer){\r\n      var done = false;\r\n      microtask(function(){\r\n        if(!done){\r\n          for(var i = 0; i < items.length; ++i){\r\n            observer.next(items[i]);\r\n            if(done)return;\r\n          } observer.complete();\r\n        }\r\n      });\r\n      return function(){ done = true; };\r\n    });\r\n  }\r\n});\r\n\r\nhide($Observable.prototype, OBSERVABLE, function(){ return this; });\r\n\r\n$export($export.G, {Observable: $Observable});\r\n\r\nrequire('./_set-species')('Observable');","// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask\r\nvar $export   = require('./_export')\r\n  , microtask = require('./_microtask')()\r\n  , process   = require('./_global').process\r\n  , isNode    = require('./_cof')(process) == 'process';\r\n\r\n$export($export.G, {\r\n  asap: function asap(fn){\r\n    var domain = isNode && process.domain;\r\n    microtask(domain ? domain.bind(fn) : fn);\r\n  }\r\n});","var metadata                  = require('./_metadata')\n  , anObject                  = require('./_an-object')\n  , aFunction                 = require('./_a-function')\n  , toMetaKey                 = metadata.key\n  , ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({metadata: function metadata(metadataKey, metadataValue){\n  return function decorator(target, targetKey){\n    ordinaryDefineOwnMetadata(\n      metadataKey, metadataValue,\n      (targetKey !== undefined ? anObject : aFunction)(target),\n      toMetaKey(targetKey)\n    );\n  };\n}});","var $export = require('./_export')\n  , $task   = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate:   $task.set,\n  clearImmediate: $task.clear\n});","// ie9- setTimeout & setInterval additional parameters fix\nvar global     = require('./_global')\n  , $export    = require('./_export')\n  , invoke     = require('./_invoke')\n  , partial    = require('./_partial')\n  , navigator  = global.navigator\n  , MSIE       = !!navigator && /MSIE .\\./.test(navigator.userAgent); // <- dirty ie9- check\nvar wrap = function(set){\n  return MSIE ? function(fn, time /*, ...args */){\n    return set(invoke(\n      partial,\n      [].slice.call(arguments, 2),\n      typeof fn == 'function' ? fn : Function(fn)\n    ), time);\n  } : set;\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout:  wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","var $iterators    = require('./es6.array.iterator')\n  , redefine      = require('./_redefine')\n  , global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , wks           = require('./_wks')\n  , ITERATOR      = wks('iterator')\n  , TO_STRING_TAG = wks('toStringTag')\n  , ArrayValues   = Iterators.Array;\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype\n    , key;\n  if(proto){\n    if(!proto[ITERATOR])hide(proto, ITERATOR, ArrayValues);\n    if(!proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    for(key in $iterators)if(!proto[key])redefine(proto, key, $iterators[key], true);\n  }\n}","require('../../modules/core.regexp.escape');\nmodule.exports = require('../../modules/_core').RegExp.escape;","var global    = require('./_global')\n  , core      = require('./_core')\n  , hide      = require('./_hide')\n  , redefine  = require('./_redefine')\n  , ctx       = require('./_ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target)redefine(target, key, out, type & $export.U);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar anObject    = require('./_an-object')\r\n  , dPs         = require('./_object-dps')\r\n  , enumBugKeys = require('./_enum-bug-keys')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , Empty       = function(){ /* empty */ }\r\n  , PROTOTYPE   = 'prototype';\r\n\r\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\nvar createDict = function(){\r\n  // Thrash, waste and sodomy: IE GC bug\r\n  var iframe = require('./_dom-create')('iframe')\r\n    , i      = enumBugKeys.length\r\n    , gt     = '>'\r\n    , iframeDocument;\r\n  iframe.style.display = 'none';\r\n  require('./_html').appendChild(iframe);\r\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n  // createDict = iframe.contentWindow.Object;\r\n  // html.removeChild(iframe);\r\n  iframeDocument = iframe.contentWindow.document;\r\n  iframeDocument.open();\r\n  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n  iframeDocument.close();\r\n  createDict = iframeDocument.F;\r\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n  return createDict();\r\n};\r\n\r\nmodule.exports = Object.create || function create(O, Properties){\r\n  var result;\r\n  if(O !== null){\r\n    Empty[PROTOTYPE] = anObject(O);\r\n    result = new Empty;\r\n    Empty[PROTOTYPE] = null;\r\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n    result[IE_PROTO] = O;\r\n  } else result = createDict();\r\n  return Properties === undefined ? result : dPs(result, Properties);\r\n};","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};","var global    = require('./_global')\n  , hide      = require('./_hide')\n  , has       = require('./_has')\n  , SRC       = require('./_uid')('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  var isFunction = typeof val == 'function';\n  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n  if(O[key] === val)return;\n  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe){\n      delete O[key];\n      hide(O, key, val);\n    } else {\n      if(O[key])O[key] = val;\n      else hide(O, key, val);\n    }\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","exports.f = require('./_wks');","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","var global         = require('./_global')\r\n  , core           = require('./_core')\r\n  , LIBRARY        = require('./_library')\r\n  , wksExt         = require('./_wks-ext')\r\n  , defineProperty = require('./_object-dp').f;\r\nmodule.exports = function(name){\r\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\r\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\r\n};","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar $keys       = require('./_object-keys-internal')\r\n  , enumBugKeys = require('./_enum-bug-keys');\r\n\r\nmodule.exports = Object.keys || function keys(O){\r\n  return $keys(O, enumBugKeys);\r\n};","var pIE            = require('./_object-pie')\r\n  , createDesc     = require('./_property-desc')\r\n  , toIObject      = require('./_to-iobject')\r\n  , toPrimitive    = require('./_to-primitive')\r\n  , has            = require('./_has')\r\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\r\n  , gOPD           = Object.getOwnPropertyDescriptor;\r\n\r\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\r\n  O = toIObject(O);\r\n  P = toPrimitive(P, true);\r\n  if(IE8_DOM_DEFINE)try {\r\n    return gOPD(O, P);\r\n  } catch(e){ /* empty */ }\r\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\r\n};","module.exports = false;","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\r\nvar $keys      = require('./_object-keys-internal')\r\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\r\n\r\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\r\n  return $keys(O, hiddenKeys);\r\n};","exports.f = {}.propertyIsEnumerable;","exports.f = Object.getOwnPropertySymbols;","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};","var dP       = require('./_object-dp')\r\n  , anObject = require('./_an-object')\r\n  , getKeys  = require('./_object-keys');\r\n\r\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\r\n  anObject(O);\r\n  var keys   = getKeys(Properties)\r\n    , length = keys.length\r\n    , i = 0\r\n    , P;\r\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n  return O;\r\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar has         = require('./_has')\r\n  , toObject    = require('./_to-object')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , ObjectProto = Object.prototype;\r\n\r\nmodule.exports = Object.getPrototypeOf || function(O){\r\n  O = toObject(O);\r\n  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n    return O.constructor.prototype;\r\n  } return O instanceof Object ? ObjectProto : null;\r\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};","'use strict';\nvar aFunction  = require('./_a-function')\n  , isObject   = require('./_is-object')\n  , invoke     = require('./_invoke')\n  , arraySlice = [].slice\n  , factories  = {};\n\nvar construct = function(F, len, args){\n  if(!(len in factories)){\n    for(var n = [], i = 0; i < len; i++)n[i] = 'a[' + i + ']';\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /*, args... */){\n  var fn       = aFunction(this)\n    , partArgs = arraySlice.call(arguments, 1);\n  var bound = function(/* args... */){\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if(isObject(fn.prototype))bound.prototype = fn.prototype;\n  return bound;\n};","var $parseInt = require('./_global').parseInt\n  , $trim     = require('./_string-trim').trim\n  , ws        = require('./_string-ws')\n  , hex       = /^[\\-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix){\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;","var $parseFloat = require('./_global').parseFloat\n  , $trim       = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str){\n  var string = $trim(String(str), 3)\n    , result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;","var isObject       = require('./_is-object')\r\n  , setPrototypeOf = require('./_set-proto').set;\r\nmodule.exports = function(that, target, C){\r\n  var P, S = target.constructor;\r\n  if(S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf){\r\n    setPrototypeOf(that, P);\r\n  } return that;\r\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var $export = require('./_export')\n  , defined = require('./_defined')\n  , fails   = require('./_fails')\n  , spaces  = require('./_string-ws')\n  , space   = '[' + spaces + ']'\n  , non     = '\\u200b\\u0085'\n  , ltrim   = RegExp('^' + space + space + '*')\n  , rtrim   = RegExp(space + space + '*$');\n\nvar exporter = function(KEY, exec, ALIAS){\n  var exp   = {};\n  var FORCE = fails(function(){\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if(ALIAS)exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function(string, TYPE){\n  string = String(defined(string));\n  if(TYPE & 1)string = string.replace(ltrim, '');\n  if(TYPE & 2)string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;","'use strict';\nvar toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n\nmodule.exports = function repeat(count){\n  var str = String(defined(this))\n    , res = ''\n    , n   = toInteger(count);\n  if(n < 0 || n == Infinity)throw RangeError(\"Count can't be negative\");\n  for(;n > 0; (n >>>= 1) && (str += str))if(n & 1)res += str;\n  return res;\n};","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","var cof = require('./_cof');\r\nmodule.exports = function(it, msg){\r\n  if(typeof it != 'number' && cof(it) != 'Number')throw TypeError(msg);\r\n  return +it;\r\n};","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object')\n  , floor    = Math.floor;\nmodule.exports = function isInteger(it){\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};","// 20.2.2.20 Math.log1p(x)\nmodule.exports = Math.log1p || function log1p(x){\n  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);\n};","// 20.2.2.14 Math.expm1(x)\nvar $expm1 = Math.expm1;\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x){\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;\n} : $expm1;","// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x){\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};","var MATCH = require('./_wks')('match');\nmodule.exports = function(KEY){\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch(e){\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch(f){ /* empty */ }\n  } return true;\n};","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp')\n  , defined  = require('./_defined');\n\nmodule.exports = function(that, searchString, NAME){\n  if(isRegExp(searchString))throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};","var $export = require('./_export')\n  , fails   = require('./_fails')\n  , defined = require('./_defined')\n  , quot    = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function(string, tag, attribute, value) {\n  var S  = String(defined(string))\n    , p1 = '<' + tag;\n  if(attribute !== '')p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function(NAME, exec){\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function(){\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};","'use strict';\r\nvar anObject    = require('./_an-object')\r\n  , toPrimitive = require('./_to-primitive')\r\n  , NUMBER      = 'number';\r\n\r\nmodule.exports = function(hint){\r\n  if(hint !== 'string' && hint !== NUMBER && hint !== 'default')throw TypeError('Incorrect hint');\r\n  return toPrimitive(anObject(this), hint != NUMBER);\r\n};","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};","'use strict';\r\nvar $defineProperty = require('./_object-dp')\r\n  , createDesc      = require('./_property-desc');\r\n\r\nmodule.exports = function(object, index, value){\r\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\r\n  else object[index] = value;\r\n};","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};","module.exports = require('./_global').document && document.documentElement;","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","var fails = require('./_fails');\r\n\r\nmodule.exports = function(method, arg){\r\n  return !!method && fails(function(){\r\n    arg ? method.call(null, function(){}, 1) : method.call(null);\r\n  });\r\n};","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables')\n  , ArrayProto  = Array.prototype;\nif(ArrayProto[UNSCOPABLES] == undefined)require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function(key){\n  ArrayProto[UNSCOPABLES][key] = true;\n};","var aFunction = require('./_a-function')\r\n  , toObject  = require('./_to-object')\r\n  , IObject   = require('./_iobject')\r\n  , toLength  = require('./_to-length');\r\n\r\nmodule.exports = function(that, callbackfn, aLen, memo, isRight){\r\n  aFunction(callbackfn);\r\n  var O      = toObject(that)\r\n    , self   = IObject(O)\r\n    , length = toLength(O.length)\r\n    , index  = isRight ? length - 1 : 0\r\n    , i      = isRight ? -1 : 1;\r\n  if(aLen < 2)for(;;){\r\n    if(index in self){\r\n      memo = self[index];\r\n      index += i;\r\n      break;\r\n    }\r\n    index += i;\r\n    if(isRight ? index < 0 : length <= index){\r\n      throw TypeError('Reduce of empty array with no initial value');\r\n    }\r\n  }\r\n  for(;isRight ? index >= 0 : length > index; index += i)if(index in self){\r\n    memo = callbackfn(memo, self[index], index, O);\r\n  }\r\n  return memo;\r\n};","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object')\n  , toIndex  = require('./_to-index')\n  , toLength = require('./_to-length');\nmodule.exports = function fill(value /*, start = 0, end = @length */){\n  var O      = toObject(this)\n    , length = toLength(O.length)\n    , aLen   = arguments.length\n    , index  = toIndex(aLen > 1 ? arguments[1] : undefined, length)\n    , end    = aLen > 2 ? arguments[2] : undefined\n    , endPos = end === undefined ? length : toIndex(end, length);\n  while(endPos > index)O[index++] = value;\n  return O;\n};","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object')\n  , toIndex  = require('./_to-index')\n  , toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target/*= 0*/, start/*= 0, end = @length*/){\n  var O     = toObject(this)\n    , len   = toLength(O.length)\n    , to    = toIndex(target, len)\n    , from  = toIndex(start, len)\n    , end   = arguments.length > 2 ? arguments[2] : undefined\n    , count = Math.min((end === undefined ? len : toIndex(end, len)) - from, len - to)\n    , inc   = 1;\n  if(from < to && to < from + count){\n    inc  = -1;\n    from += count - 1;\n    to   += count - 1;\n  }\n  while(count-- > 0){\n    if(from in O)O[to] = O[from];\n    else delete O[to];\n    to   += inc;\n    from += inc;\n  } return O;\n};","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object')\n  , cof      = require('./_cof')\n  , MATCH    = require('./_wks')('match');\nmodule.exports = function(it){\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function(){\n  var that   = anObject(this)\n    , result = '';\n  if(that.global)     result += 'g';\n  if(that.ignoreCase) result += 'i';\n  if(that.multiline)  result += 'm';\n  if(that.unicode)    result += 'u';\n  if(that.sticky)     result += 'y';\n  return result;\n};","'use strict';\nvar global      = require('./_global')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};","module.exports = {};","'use strict';\nvar hide     = require('./_hide')\n  , redefine = require('./_redefine')\n  , fails    = require('./_fails')\n  , defined  = require('./_defined')\n  , wks      = require('./_wks');\n\nmodule.exports = function(KEY, length, exec){\n  var SYMBOL   = wks(KEY)\n    , fns      = exec(defined, SYMBOL, ''[KEY])\n    , strfn    = fns[0]\n    , rxfn     = fns[1];\n  if(fails(function(){\n    var O = {};\n    O[SYMBOL] = function(){ return 7; };\n    return ''[KEY](O) != 7;\n  })){\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function(string, arg){ return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function(string){ return rxfn.call(string, this); }\n    );\n  }\n};","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};","'use strict';\nvar global            = require('./_global')\n  , $export           = require('./_export')\n  , redefine          = require('./_redefine')\n  , redefineAll       = require('./_redefine-all')\n  , meta              = require('./_meta')\n  , forOf             = require('./_for-of')\n  , anInstance        = require('./_an-instance')\n  , isObject          = require('./_is-object')\n  , fails             = require('./_fails')\n  , $iterDetect       = require('./_iter-detect')\n  , setToStringTag    = require('./_set-to-string-tag')\n  , inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  var fixMethod = function(KEY){\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a){\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a){ fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b){ fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if(typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance             = new C\n      // early implementations not supports chaining\n      , HASNT_CHAINING       = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance\n      // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n      , THROWS_ON_PRIMITIVES = fails(function(){ instance.has(1); })\n      // most early implementations doesn't supports iterables, most modern - not close it correctly\n      , ACCEPT_ITERABLES     = $iterDetect(function(iter){ new C(iter); }) // eslint-disable-line no-new\n      // for early implementations -0 and +0 not the same\n      , BUGGY_ZERO = !IS_WEAK && fails(function(){\n        // V8 ~ Chromium 42- fails only with 5+ elements\n        var $instance = new C()\n          , index     = 5;\n        while(index--)$instance[ADDER](index, index);\n        return !$instance.has(-0);\n      });\n    if(!ACCEPT_ITERABLES){ \n      C = wrapper(function(target, iterable){\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base, target, C);\n        if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if(THROWS_ON_PRIMITIVES || BUGGY_ZERO){\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if(BUGGY_ZERO || HASNT_CHAINING)fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if(IS_WEAK && proto.clear)delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , hide        = require('./_hide')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};","var redefine = require('./_redefine');\nmodule.exports = function(target, src, safe){\n  for(var key in src)redefine(target, key, src[key], safe);\n  return target;\n};","'use strict';\nvar redefineAll       = require('./_redefine-all')\n  , getWeak           = require('./_meta').getWeak\n  , anObject          = require('./_an-object')\n  , isObject          = require('./_is-object')\n  , anInstance        = require('./_an-instance')\n  , forOf             = require('./_for-of')\n  , createArrayMethod = require('./_array-methods')\n  , $has              = require('./_has')\n  , arrayFind         = createArrayMethod(5)\n  , arrayFindIndex    = createArrayMethod(6)\n  , id                = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function(that){\n  return that._l || (that._l = new UncaughtFrozenStore);\n};\nvar UncaughtFrozenStore = function(){\n  this.a = [];\n};\nvar findUncaughtFrozen = function(store, key){\n  return arrayFind(store.a, function(it){\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function(key){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)return entry[1];\n  },\n  has: function(key){\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function(key, value){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function(key){\n    var index = arrayFindIndex(this.a, function(it){\n      return it[0] === key;\n    });\n    if(~index)this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this)['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var data = getWeak(anObject(key), true);\n    if(data === true)uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};","'use strict';\nvar global         = require('./_global')\n  , DESCRIPTORS    = require('./_descriptors')\n  , LIBRARY        = require('./_library')\n  , $typed         = require('./_typed')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , fails          = require('./_fails')\n  , anInstance     = require('./_an-instance')\n  , toInteger      = require('./_to-integer')\n  , toLength       = require('./_to-length')\n  , gOPN           = require('./_object-gopn').f\n  , dP             = require('./_object-dp').f\n  , arrayFill      = require('./_array-fill')\n  , setToStringTag = require('./_set-to-string-tag')\n  , ARRAY_BUFFER   = 'ArrayBuffer'\n  , DATA_VIEW      = 'DataView'\n  , PROTOTYPE      = 'prototype'\n  , WRONG_LENGTH   = 'Wrong length!'\n  , WRONG_INDEX    = 'Wrong index!'\n  , $ArrayBuffer   = global[ARRAY_BUFFER]\n  , $DataView      = global[DATA_VIEW]\n  , Math           = global.Math\n  , parseInt       = global.parseInt\n  , RangeError     = global.RangeError\n  , Infinity       = global.Infinity\n  , BaseBuffer     = $ArrayBuffer\n  , abs            = Math.abs\n  , pow            = Math.pow\n  , min            = Math.min\n  , floor          = Math.floor\n  , log            = Math.log\n  , LN2            = Math.LN2\n  , BUFFER         = 'buffer'\n  , BYTE_LENGTH    = 'byteLength'\n  , BYTE_OFFSET    = 'byteOffset'\n  , $BUFFER        = DESCRIPTORS ? '_b' : BUFFER\n  , $LENGTH        = DESCRIPTORS ? '_l' : BYTE_LENGTH\n  , $OFFSET        = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nvar packIEEE754 = function(value, mLen, nBytes){\n  var buffer = Array(nBytes)\n    , eLen   = nBytes * 8 - mLen - 1\n    , eMax   = (1 << eLen) - 1\n    , eBias  = eMax >> 1\n    , rt     = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0\n    , i      = 0\n    , s      = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0\n    , e, m, c;\n  value = abs(value)\n  if(value != value || value === Infinity){\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if(value * (c = pow(2, -e)) < 1){\n      e--;\n      c *= 2;\n    }\n    if(e + eBias >= 1){\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if(value * c >= 2){\n      e++;\n      c /= 2;\n    }\n    if(e + eBias >= eMax){\n      m = 0;\n      e = eMax;\n    } else if(e + eBias >= 1){\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for(; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for(; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n};\nvar unpackIEEE754 = function(buffer, mLen, nBytes){\n  var eLen  = nBytes * 8 - mLen - 1\n    , eMax  = (1 << eLen) - 1\n    , eBias = eMax >> 1\n    , nBits = eLen - 7\n    , i     = nBytes - 1\n    , s     = buffer[i--]\n    , e     = s & 127\n    , m;\n  s >>= 7;\n  for(; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for(; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if(e === 0){\n    e = 1 - eBias;\n  } else if(e === eMax){\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n};\n\nvar unpackI32 = function(bytes){\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n};\nvar packI8 = function(it){\n  return [it & 0xff];\n};\nvar packI16 = function(it){\n  return [it & 0xff, it >> 8 & 0xff];\n};\nvar packI32 = function(it){\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n};\nvar packF64 = function(it){\n  return packIEEE754(it, 52, 8);\n};\nvar packF32 = function(it){\n  return packIEEE754(it, 23, 4);\n};\n\nvar addGetter = function(C, key, internal){\n  dP(C[PROTOTYPE], key, {get: function(){ return this[internal]; }});\n};\n\nvar get = function(view, bytes, index, isLittleEndian){\n  var numIndex = +index\n    , intIndex = toInteger(numIndex);\n  if(numIndex != intIndex || intIndex < 0 || intIndex + bytes > view[$LENGTH])throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b\n    , start = intIndex + view[$OFFSET]\n    , pack  = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n};\nvar set = function(view, bytes, index, conversion, value, isLittleEndian){\n  var numIndex = +index\n    , intIndex = toInteger(numIndex);\n  if(numIndex != intIndex || intIndex < 0 || intIndex + bytes > view[$LENGTH])throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b\n    , start = intIndex + view[$OFFSET]\n    , pack  = conversion(+value);\n  for(var i = 0; i < bytes; i++)store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n};\n\nvar validateArrayBufferArguments = function(that, length){\n  anInstance(that, $ArrayBuffer, ARRAY_BUFFER);\n  var numberLength = +length\n    , byteLength   = toLength(numberLength);\n  if(numberLength != byteLength)throw RangeError(WRONG_LENGTH);\n  return byteLength;\n};\n\nif(!$typed.ABV){\n  $ArrayBuffer = function ArrayBuffer(length){\n    var byteLength = validateArrayBufferArguments(this, length);\n    this._b       = arrayFill.call(Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength){\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH]\n      , offset       = toInteger(byteOffset);\n    if(offset < 0 || offset > bufferLength)throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if(offset + byteLength > bufferLength)throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if(DESCRIPTORS){\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset){\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset){\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /*, littleEndian */){\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /*, littleEndian */){\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /*, littleEndian */){\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /*, littleEndian */){\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /*, littleEndian */){\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /*, littleEndian */){\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value){\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value){\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /*, littleEndian */){\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /*, littleEndian */){\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /*, littleEndian */){\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if(!fails(function(){\n    new $ArrayBuffer;     // eslint-disable-line no-new\n  }) || !fails(function(){\n    new $ArrayBuffer(.5); // eslint-disable-line no-new\n  })){\n    $ArrayBuffer = function ArrayBuffer(length){\n      return new BaseBuffer(validateArrayBufferArguments(this, length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for(var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j; ){\n      if(!((key = keys[j++]) in $ArrayBuffer))hide($ArrayBuffer, key, BaseBuffer[key]);\n    };\n    if(!LIBRARY)ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2))\n    , $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if(view.getInt8(0) || !view.getInt8(1))redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value){\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value){\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;","var global = require('./_global')\n  , hide   = require('./_hide')\n  , uid    = require('./_uid')\n  , TYPED  = uid('typed_array')\n  , VIEW   = uid('view')\n  , ABV    = !!(global.ArrayBuffer && global.DataView)\n  , CONSTR = ABV\n  , i = 0, l = 9, Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile(i < l){\n  if(Typed = global[TypedArrayConstructors[i++]]){\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV:    ABV,\n  CONSTR: CONSTR,\n  TYPED:  TYPED,\n  VIEW:   VIEW\n};","'use strict';\nif(require('./_descriptors')){\n  var LIBRARY             = require('./_library')\n    , global              = require('./_global')\n    , fails               = require('./_fails')\n    , $export             = require('./_export')\n    , $typed              = require('./_typed')\n    , $buffer             = require('./_typed-buffer')\n    , ctx                 = require('./_ctx')\n    , anInstance          = require('./_an-instance')\n    , propertyDesc        = require('./_property-desc')\n    , hide                = require('./_hide')\n    , redefineAll         = require('./_redefine-all')\n    , isInteger           = require('./_is-integer')\n    , toInteger           = require('./_to-integer')\n    , toLength            = require('./_to-length')\n    , toIndex             = require('./_to-index')\n    , toPrimitive         = require('./_to-primitive')\n    , has                 = require('./_has')\n    , same                = require('./_same-value')\n    , classof             = require('./_classof')\n    , isObject            = require('./_is-object')\n    , toObject            = require('./_to-object')\n    , isArrayIter         = require('./_is-array-iter')\n    , create              = require('./_object-create')\n    , getPrototypeOf      = require('./_object-gpo')\n    , gOPN                = require('./_object-gopn').f\n    , isIterable          = require('./core.is-iterable')\n    , getIterFn           = require('./core.get-iterator-method')\n    , uid                 = require('./_uid')\n    , wks                 = require('./_wks')\n    , createArrayMethod   = require('./_array-methods')\n    , createArrayIncludes = require('./_array-includes')\n    , speciesConstructor  = require('./_species-constructor')\n    , ArrayIterators      = require('./es6.array.iterator')\n    , Iterators           = require('./_iterators')\n    , $iterDetect         = require('./_iter-detect')\n    , setSpecies          = require('./_set-species')\n    , arrayFill           = require('./_array-fill')\n    , arrayCopyWithin     = require('./_array-copy-within')\n    , $DP                 = require('./_object-dp')\n    , $GOPD               = require('./_object-gopd')\n    , dP                  = $DP.f\n    , gOPD                = $GOPD.f\n    , RangeError          = global.RangeError\n    , TypeError           = global.TypeError\n    , Uint8Array          = global.Uint8Array\n    , ARRAY_BUFFER        = 'ArrayBuffer'\n    , SHARED_BUFFER       = 'Shared' + ARRAY_BUFFER\n    , BYTES_PER_ELEMENT   = 'BYTES_PER_ELEMENT'\n    , PROTOTYPE           = 'prototype'\n    , ArrayProto          = Array[PROTOTYPE]\n    , $ArrayBuffer        = $buffer.ArrayBuffer\n    , $DataView           = $buffer.DataView\n    , arrayForEach        = createArrayMethod(0)\n    , arrayFilter         = createArrayMethod(2)\n    , arraySome           = createArrayMethod(3)\n    , arrayEvery          = createArrayMethod(4)\n    , arrayFind           = createArrayMethod(5)\n    , arrayFindIndex      = createArrayMethod(6)\n    , arrayIncludes       = createArrayIncludes(true)\n    , arrayIndexOf        = createArrayIncludes(false)\n    , arrayValues         = ArrayIterators.values\n    , arrayKeys           = ArrayIterators.keys\n    , arrayEntries        = ArrayIterators.entries\n    , arrayLastIndexOf    = ArrayProto.lastIndexOf\n    , arrayReduce         = ArrayProto.reduce\n    , arrayReduceRight    = ArrayProto.reduceRight\n    , arrayJoin           = ArrayProto.join\n    , arraySort           = ArrayProto.sort\n    , arraySlice          = ArrayProto.slice\n    , arrayToString       = ArrayProto.toString\n    , arrayToLocaleString = ArrayProto.toLocaleString\n    , ITERATOR            = wks('iterator')\n    , TAG                 = wks('toStringTag')\n    , TYPED_CONSTRUCTOR   = uid('typed_constructor')\n    , DEF_CONSTRUCTOR     = uid('def_constructor')\n    , ALL_CONSTRUCTORS    = $typed.CONSTR\n    , TYPED_ARRAY         = $typed.TYPED\n    , VIEW                = $typed.VIEW\n    , WRONG_LENGTH        = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function(O, length){\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function(){\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function(){\n    new Uint8Array(1).set({});\n  });\n\n  var strictToLength = function(it, SAME){\n    if(it === undefined)throw TypeError(WRONG_LENGTH);\n    var number = +it\n      , length = toLength(it);\n    if(SAME && !same(number, length))throw RangeError(WRONG_LENGTH);\n    return length;\n  };\n\n  var toOffset = function(it, BYTES){\n    var offset = toInteger(it);\n    if(offset < 0 || offset % BYTES)throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function(it){\n    if(isObject(it) && TYPED_ARRAY in it)return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function(C, length){\n    if(!(isObject(C) && TYPED_CONSTRUCTOR in C)){\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function(O, list){\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function(C, list){\n    var index  = 0\n      , length = list.length\n      , result = allocate(C, length);\n    while(length > index)result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function(it, key, internal){\n    dP(it, key, {get: function(){ return this._d[internal]; }});\n  };\n\n  var $from = function from(source /*, mapfn, thisArg */){\n    var O       = toObject(source)\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , iterFn  = getIterFn(O)\n      , i, length, values, result, step, iterator;\n    if(iterFn != undefined && !isArrayIter(iterFn)){\n      for(iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++){\n        values.push(step.value);\n      } O = values;\n    }\n    if(mapping && aLen > 2)mapfn = ctx(mapfn, arguments[2], 2);\n    for(i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++){\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/*...items*/){\n    var index  = 0\n      , length = arguments.length\n      , result = allocate(this, length);\n    while(length > index)result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function(){ arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString(){\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /*, end */){\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /*, thisArg */){\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /*, start, end */){ // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /*, thisArg */){\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /*, thisArg */){\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /*, thisArg */){\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /*, thisArg */){\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /*, fromIndex */){\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /*, fromIndex */){\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator){ // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /*, fromIndex */){ // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /*, thisArg */){\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /*, initialValue */){ // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /*, initialValue */){ // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse(){\n      var that   = this\n        , length = validate(that).length\n        , middle = Math.floor(length / 2)\n        , index  = 0\n        , value;\n      while(index < middle){\n        value         = that[index];\n        that[index++] = that[--length];\n        that[length]  = value;\n      } return that;\n    },\n    some: function some(callbackfn /*, thisArg */){\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn){\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end){\n      var O      = validate(this)\n        , length = O.length\n        , $begin = toIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end){\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /*, offset */){\n    validate(this);\n    var offset = toOffset(arguments[1], 1)\n      , length = this.length\n      , src    = toObject(arrayLike)\n      , len    = toLength(src.length)\n      , index  = 0;\n    if(len + offset > length)throw RangeError(WRONG_LENGTH);\n    while(index < len)this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries(){\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys(){\n      return arrayKeys.call(validate(this));\n    },\n    values: function values(){\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function(target, key){\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key){\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc){\n    if(isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ){\n      target[key] = desc.value;\n      return target;\n    } else return dP(target, key, desc);\n  };\n\n  if(!ALL_CONSTRUCTORS){\n    $GOPD.f = $getDesc;\n    $DP.f   = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty:           $setDesc\n  });\n\n  if(fails(function(){ arrayToString.call({}); })){\n    arrayToString = arrayToLocaleString = function toString(){\n      return arrayJoin.call(this);\n    }\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice:          $slice,\n    set:            $set,\n    constructor:    function(){ /* noop */ },\n    toString:       arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function(){ return this[TYPED_ARRAY]; }\n  });\n\n  module.exports = function(KEY, BYTES, wrapper, CLAMPED){\n    CLAMPED = !!CLAMPED;\n    var NAME       = KEY + (CLAMPED ? 'Clamped' : '') + 'Array'\n      , ISNT_UINT8 = NAME != 'Uint8Array'\n      , GETTER     = 'get' + KEY\n      , SETTER     = 'set' + KEY\n      , TypedArray = global[NAME]\n      , Base       = TypedArray || {}\n      , TAC        = TypedArray && getPrototypeOf(TypedArray)\n      , FORCED     = !TypedArray || !$typed.ABV\n      , O          = {}\n      , TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function(that, index){\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function(that, index, value){\n      var data = that._d;\n      if(CLAMPED)value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function(that, index){\n      dP(that, index, {\n        get: function(){\n          return getter(this, index);\n        },\n        set: function(value){\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if(FORCED){\n      TypedArray = wrapper(function(that, data, $offset, $length){\n        anInstance(that, TypedArray, NAME, '_d');\n        var index  = 0\n          , offset = 0\n          , buffer, byteLength, length, klass;\n        if(!isObject(data)){\n          length     = strictToLength(data, true)\n          byteLength = length * BYTES;\n          buffer     = new $ArrayBuffer(byteLength);\n        } else if(data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER){\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if($length === undefined){\n            if($len % BYTES)throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if(byteLength < 0)throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if(byteLength + offset > $len)throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if(TYPED_ARRAY in data){\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while(index < length)addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if(!$iterDetect(function(iter){\n      // V8 works with iterators, but fails in many other cases\n      // https://code.google.com/p/v8/issues/detail?id=4552\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)){\n      TypedArray = wrapper(function(that, data, $offset, $length){\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if(!isObject(data))return new Base(strictToLength(data, ISNT_UINT8));\n        if(data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER){\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if(TYPED_ARRAY in data)return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function(key){\n        if(!(key in TypedArray))hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if(!LIBRARY)TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator   = TypedArrayPrototype[ITERATOR]\n      , CORRECT_ITER_NAME = !!$nativeIterator && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined)\n      , $iterator         = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if(CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)){\n      dP(TypedArrayPrototype, TAG, {\n        get: function(){ return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES,\n      from: $from,\n      of: $of\n    });\n\n    if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, {set: $set});\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    $export($export.P + $export.F * (TypedArrayPrototype.toString != arrayToString), NAME, {toString: arrayToString});\n\n    $export($export.P + $export.F * fails(function(){\n      new TypedArray(1).slice();\n    }), NAME, {slice: $slice});\n\n    $export($export.P + $export.F * (fails(function(){\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString()\n    }) || !fails(function(){\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, {toLocaleString: $toLocaleString});\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if(!LIBRARY && !CORRECT_ITER_NAME)hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function(){ /* empty */ };","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};","// all object keys, includes non-enumerable and symbols\nvar gOPN     = require('./_object-gopn')\n  , gOPS     = require('./_object-gops')\n  , anObject = require('./_an-object')\n  , Reflect  = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it){\n  var keys       = gOPN.f(anObject(it))\n    , getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length')\n  , repeat   = require('./_string-repeat')\n  , defined  = require('./_defined');\n\nmodule.exports = function(that, maxLength, fillString, left){\n  var S            = String(defined(that))\n    , stringLength = S.length\n    , fillStr      = fillString === undefined ? ' ' : String(fillString)\n    , intMaxLength = toLength(maxLength);\n  if(intMaxLength <= stringLength || fillStr == '')return S;\n  var fillLen = intMaxLength - stringLength\n    , stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if(stringFiller.length > fillLen)stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject')\n  , isEnum    = require('./_object-pie').f;\nmodule.exports = function(isEntries){\n  return function(it){\n    var O      = toIObject(it)\n      , keys   = getKeys(O)\n      , length = keys.length\n      , i      = 0\n      , result = []\n      , key;\n    while(length > i)if(isEnum.call(O, key = keys[i++])){\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};","// Forced replacement prototype accessors methods\r\nmodule.exports = require('./_library')|| !require('./_fails')(function(){\r\n  var K = Math.random();\r\n  // In FF throws only define methods\r\n  __defineSetter__.call(null, K, function(){ /* empty */});\r\n  delete require('./_global')[K];\r\n});","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};","var Map     = require('./es6.map')\n  , $export = require('./_export')\n  , shared  = require('./_shared')('metadata')\n  , store   = shared.store || (shared.store = new (require('./es6.weak-map')));\n\nvar getOrCreateMetadataMap = function(target, targetKey, create){\n  var targetMetadata = store.get(target);\n  if(!targetMetadata){\n    if(!create)return undefined;\n    store.set(target, targetMetadata = new Map);\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if(!keyMetadata){\n    if(!create)return undefined;\n    targetMetadata.set(targetKey, keyMetadata = new Map);\n  } return keyMetadata;\n};\nvar ordinaryHasOwnMetadata = function(MetadataKey, O, P){\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\nvar ordinaryGetOwnMetadata = function(MetadataKey, O, P){\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\nvar ordinaryDefineOwnMetadata = function(MetadataKey, MetadataValue, O, P){\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\nvar ordinaryOwnMetadataKeys = function(target, targetKey){\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false)\n    , keys        = [];\n  if(metadataMap)metadataMap.forEach(function(_, key){ keys.push(key); });\n  return keys;\n};\nvar toMetaKey = function(it){\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\nvar exp = function(O){\n  $export($export.S, 'Reflect', O);\n};\n\nmodule.exports = {\n  store: store,\n  map: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  key: toMetaKey,\n  exp: exp\n};","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};","'use strict';\nvar path      = require('./_path')\n  , invoke    = require('./_invoke')\n  , aFunction = require('./_a-function');\nmodule.exports = function(/* ...pargs */){\n  var fn     = aFunction(this)\n    , length = arguments.length\n    , pargs  = Array(length)\n    , i      = 0\n    , _      = path._\n    , holder = false;\n  while(length > i)if((pargs[i] = arguments[i++]) === _)holder = true;\n  return function(/* ...args */){\n    var that = this\n      , aLen = arguments.length\n      , j = 0, k = 0, args;\n    if(!holder && !aLen)return invoke(fn, pargs, that);\n    args = pargs.slice();\n    if(holder)for(;length > j; j++)if(args[j] === _)args[j] = arguments[k++];\n    while(aLen > k)args.push(arguments[k++]);\n    return invoke(fn, args, that);\n  };\n};","// https://github.com/benjamingr/RexExp.escape\nvar $export = require('./_export')\n  , $re     = require('./_replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\n","var shared = require('./_shared')('keys')\r\n  , uid    = require('./_uid');\r\nmodule.exports = function(key){\r\n  return shared[key] || (shared[key] = uid(key));\r\n};","// IE 8- don't enum bug keys\r\nmodule.exports = (\r\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n).split(',');","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};","var has          = require('./_has')\r\n  , toIObject    = require('./_to-iobject')\r\n  , arrayIndexOf = require('./_array-includes')(false)\r\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\r\n\r\nmodule.exports = function(object, names){\r\n  var O      = toIObject(object)\r\n    , i      = 0\r\n    , result = []\r\n    , key;\r\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n  // Don't enum bug & hidden keys\r\n  while(names.length > i)if(has(O, key = names[i++])){\r\n    ~arrayIndexOf(result, key) || result.push(key);\r\n  }\r\n  return result;\r\n};","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\r\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n});","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\r\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};","module.exports = require('./_global');","module.exports = function(regExp, replace){\n  var replacer = replace === Object(replace) ? function(part){\n    return replace[part];\n  } : replace;\n  return function(it){\n    return String(it).replace(regExp, replacer);\n  };\n};","var isObject = require('./_is-object')\r\n  , isArray  = require('./_is-array')\r\n  , SPECIES  = require('./_wks')('species');\r\n\r\nmodule.exports = function(original){\r\n  var C;\r\n  if(isArray(original)){\r\n    C = original.constructor;\r\n    // cross-realm fallback\r\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\r\n    if(isObject(C)){\r\n      C = C[SPECIES];\r\n      if(C === null)C = undefined;\r\n    }\r\n  } return C === undefined ? Array : C;\r\n};"]}